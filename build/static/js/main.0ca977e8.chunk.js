(this.webpackJsonpshelp=this.webpackJsonpshelp||[]).push([[0],{141:function(e,t,a){e.exports=a.p+"static/media/background.2385d97e.jpeg"},153:function(e,t,a){e.exports=a.p+"static/media/info1.ebd76ad0.jpg"},154:function(e,t,a){e.exports=a.p+"static/media/revenue.50c53316.svg"},155:function(e,t,a){e.exports=a.p+"static/media/happy.ad2afc43.svg"},156:function(e,t,a){e.exports=a.p+"static/media/earth.6bcfa3a5.svg"},157:function(e,t,a){e.exports=a.p+"static/media/info2.a6baadb6.jpg"},170:function(e,t,a){e.exports=a(304)},303:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),l=a.n(c),o=a(6),s=a.n(o),i=(a(176),a(13)),u=a(15),m=a(40),d=a(4),p=a(310),E=a(311),f=Object(i.b)((function(e){return{cart:e.cart}}))((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1];return r.a.createElement(p.a,{expanded:c,fixed:"top",expand:"lg",collapseOnSelect:!0},r.a.createElement(p.a.Brand,null,r.a.createElement(u.b,{onClick:function(){return l(!1)},to:"/",className:"nav-link home-link"},r.a.createElement("h2",{className:"nav-link-header"},"Shelp"))),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){return l(!c&&"expanded")}}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(E.a,{className:"nav-links-container"},r.a.createElement(E.a,{className:"nav-links-one"},r.a.createElement(E.a,null,r.a.createElement(u.b,{onClick:function(){return l(!1)},to:"/login",className:"shop-login link-nav"},"Shop Login"))),r.a.createElement(E.a,{className:"nav-links-two"},r.a.createElement(E.a,null,r.a.createElement(u.b,{onClick:function(){return l(!1)},className:"nav-link-two link-nav",to:"/products"},"All Products")),r.a.createElement(E.a,null,r.a.createElement(u.b,{onClick:function(){return l(!1)},className:"nav-link-two link-nav",to:"/Map"},"See Map")),r.a.createElement(E.a,null,r.a.createElement(u.b,{onClick:function(){return l(!1)},className:"nav-link-two link-nav",to:"/cart"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-shopping-cart"})),r.a.createElement("b",null,"Cart (".concat(e.cart.length,")"))))))))})),h=a(43),b=function(e){return function(t){t({type:"ADD",data:e})}},v=function(e){return function(t){t({type:"REMOVE",data:e})}},g=function(){return function(e){e({type:"EMPTY_CART",data:[]})}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return[].concat(Object(h.a)(e),[t.data]);case"REMOVE":return e.filter((function(e){return e.id!==t.data}));case"EMPTY_CART":return t.data;default:return e}},y=function(e){return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"img-modal-container",onClick:e.modalSwitch},r.a.createElement("img",{className:"modal-img",src:e.img,alt:"big product",onClick:e.modalSwitch}),r.a.createElement("button",{className:"ui button modal-close-button",onClick:e.modalSwitch},"Close")))},w=function(e){var t=e.slice(5,10).split("-").reverse();return t.splice(1,0,"."),t.splice(3,0,"."),t.join("").concat(e.slice(0,4))},k=Object(i.b)((function(e){return{cart:e.cart}}),{addToCart:b})((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],o=function(t){return e.cart.find((function(e){return e.id===t.id}))},s=function(){l(!c)};return r.a.createElement("div",null,c&&r.a.createElement(y,{img:e.product.img.location,modalSwitch:s}),r.a.createElement("div",{className:"row product-container"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{className:"single-product-img",onClick:s,src:e.product.img.location,alt:"product","data-testid":"img"}))),r.a.createElement("div",{className:"col-md-6 product-shop-desc"},r.a.createElement("div",{className:"product-header-date"},r.a.createElement("h3",{"data-testid":"desc"},e.product.description)," ",r.a.createElement("h6",null,"Expiration date: ",r.a.createElement("span",{"data-testid":"expiration",className:"expiration-date"},r.a.createElement("b",null,w(e.product.date)))))," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"product-shop-small-screen-container"},r.a.createElement("div",{className:"product-shop-desc-texts"},r.a.createElement("p",{className:"product-shop-desc-text","data-testid":"shopname"},r.a.createElement("i",{className:"fas fa-store"})," ",r.a.createElement("b",null,e.product.shop.name)),r.a.createElement("p",{className:"product-shop-desc-text","data-testid":"shopaddress"},r.a.createElement("i",{className:"fas fa-map-marker-alt"})," ",e.product.shop.address,", ",e.product.shop.zip," ",e.product.shop.city),r.a.createElement("p",{className:"product-shop-desc-text","data-testid":"shopphone"},r.a.createElement("i",{className:"fas fa-phone"})," ",e.product.shop.phone," ",""!==e.product.shop.website&&r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-globe"})," ",e.product.shop.website))),r.a.createElement("div",{className:"img-container-small-screen"},r.a.createElement("img",{className:"single-product-img",onClick:s,src:e.product.img.location,alt:"product"})))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"price-container"},r.a.createElement("div",{className:"prices"},r.a.createElement("h3",{"data-testid":"price"},e.product.price,"\u20ac"),r.a.createElement("h6",{className:"original-price","data-testid":"originalprice"},e.product.originalPrice,"\u20ac")),r.a.createElement("h5",{className:"discount","data-testid":"discount"},"-",e.product.discount,"%"))),r.a.createElement("div",{className:"col-md-2 cart-button-container"},r.a.createElement("button",{className:"ui button cart-button","data-testid":"cartbutton",disabled:o(e.product),onClick:function(){return e.addToCart(e.product)}},o(e.product)?r.a.createElement("p",null,"In cart"):r.a.createElement("p",null,"Add to Cart")))))})),O=a(141),S=a.n(O),x=function(){return r.a.createElement("footer",{className:"page-footer font-small footer"},r.a.createElement("hr",{className:"footer-hr"}),r.a.createElement("div",{className:"footer-copyright"},"\xa9 Shelp 2020"),r.a.createElement("div",{className:"footer-contact row"},r.a.createElement("div",{className:"footer-email col-md-6 col-sm-6"},r.a.createElement("i",{className:"fas fa-at footer-icon"}),r.a.createElement("p",null," support@shelp.fi")),r.a.createElement("div",{className:"footer-phone col-md-6 col-sm-6"},r.a.createElement("i",{className:"fas fa-phone-square footer-icon"}),r.a.createElement("p",null," 050-12345678"))))},j=Object(i.b)((function(e){return{products:e.products}}))((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){0===e.products.length?l(!0):l(!1)}),[e.products]);for(var o=e.products.filter((function(e){return!0===e.availability})).map((function(e){return{date:new Date(e.date),id:e.id}})).sort((function(e,t){return t.date-e.date})).slice(0,5),s=[],i=function(t){s=s.concat(e.products.filter((function(e){return e.id===o[t].id})))},m=0;m<o.length;m++)i(m);return r.a.createElement("div",{className:"main container-fluid home-container"},r.a.createElement("div",{className:"home-header-image-container"},r.a.createElement("div",{className:"home-image-container"},r.a.createElement("img",{src:S.a,alt:"background","data-testid":"background-img"})),r.a.createElement("div",{className:"introduction"},r.a.createElement("div",{"data-testid":"introduction-texts"},r.a.createElement("h1",{className:"introduction-header"},"Welcome to Shelp!"),r.a.createElement("p",{className:"introduction-text"},"Every month, people like you use Shelp to save tens of thousands of food products from ending up in the trash bin. Buy cheaper and better, saving the world has never tasted this good!")),r.a.createElement("div",{className:"home-buttons","data-testid":"homebuttons"},r.a.createElement("div",{className:"button-text"},r.a.createElement(u.b,{to:"/customerinfo"},r.a.createElement("button",{className:"ui button"},"Order")),r.a.createElement("p",null,r.a.createElement("b",null,"Ordering")," with Shelp saves you hundreds of euros every year.")),r.a.createElement("div",{className:"button-text"},r.a.createElement(u.b,{to:"/partnerinfo"},r.a.createElement("button",{className:"ui button"},"Sell")),r.a.createElement("p",null,r.a.createElement("b",null,"Selling")," with Shelp increases your revenue by 2-6%."))))),r.a.createElement("div",{className:"container home-intro-container"},r.a.createElement("div",{className:"home-intro"},r.a.createElement("h3",null,r.a.createElement("b",null,"Save as much as you can eat")),r.a.createElement("p",null,"For consumers, using Shelp means discovering new products that grocery stores offer at around 50% discount and creating a more sustainable environment while at it.")," ",r.a.createElement("hr",null),!c&&r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement("b",null,"Our freshest offers!")),r.a.createElement("div",{"data-testid":"home-products"},s.map((function(e){return r.a.createElement(k,{key:e.id,product:e})}))),r.a.createElement("p",null,r.a.createElement("strong",null,"To discover more, see",r.a.createElement("span",null,r.a.createElement(u.b,{to:"/products",className:"home-span-link"},' "All Products"'))))),c&&r.a.createElement("div",{"data-testid":"home-no-products"},r.a.createElement("h4",null,r.a.createElement("b",null,"There are currently no products on sale, please check again later")))),r.a.createElement(x,null)))})),C=a(57),P=Object(i.b)((function(e){return{products:e.products,shops:e.shops}}))((function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],l=a[1];if(null===c)return l([]),null;if(0===e.products.length)return r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"products-header"},r.a.createElement("h2",null,"Products on sale:"))," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"no-products-onsale"},r.a.createElement("h3",null,r.a.createElement("b",null,"There are currently no products on sale, please check again later"))),r.a.createElement(x,null));var o;if(o=e.shops.map((function(e){return{value:e.name,label:e.name}})),0===c.length)return r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"products-header"},r.a.createElement("h2",null,"Products on sale:"))," ",r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("p",null,"Search shop:"),r.a.createElement(C.a,{options:o,placeholder:"Select shop(s)",onChange:l,isMulti:!0,isSearchable:!0})),r.a.createElement("div",{"data-testid":"products"},e.products.filter((function(e){return!0===e.availability})).map((function(e){return r.a.createElement(k,{key:e.id,product:e})}))),r.a.createElement(x,null));var s=[],i=c.map((function(e){return e.label}));return r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"products-header"},r.a.createElement("h2",null,"Products on sale:"))," ",r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("p",null,"Search shop:"),r.a.createElement(C.a,{options:o,placeholder:"Select shop(s)",onChange:l,isMulti:!0,isSearchable:!0})),r.a.createElement("div",null,i.forEach((function(t){s=s.concat(e.products.filter((function(e){return e.shop.name===t})))})),s.filter((function(e){return!0===e.availability})).map((function(e){return r.a.createElement(k,{key:e.id,product:e})}))),0===s.length&&r.a.createElement("div",{className:"no-shop-results"},r.a.createElement("h1",null,"No search results..."),r.a.createElement("h6",null,"Try with different shop(s)")),r.a.createElement(x,null))})),A=a(312),z=a(69),I=a(16),L=a.n(I),D="/api/products",T=null,F=function(e){T="bearer ".concat(e)},R=function(){T=null},_=function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(L.a.get(D));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},M=function(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:T}},n.next=3,s.a.awrap(L.a.post(D,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},H=function(e,t){var a,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a={headers:{Authorization:T}},r.next=3,s.a.awrap(L.a.put("".concat(D,"/").concat(e),t,a));case 3:return n=r.sent,r.abrupt("return",n.data);case 5:case"end":return r.stop()}}))},W=function(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:T}},n.next=3,s.a.awrap(L.a.delete("".concat(D,"/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},Y=function(e,t){var a,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Object(z.a)({},t,{availability:!1}),r.next=3,s.a.awrap(L.a.put("".concat(D,"/availability/").concat(e),a));case 3:return n=r.sent,r.abrupt("return",n.data);case 5:case"end":return r.stop()}}))},q=function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(L.a.put("".concat(D,"/expired/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},B=function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(L.a.post("".concat(D,"/image"),e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},Z=function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(L.a.delete("".concat(D,"/images/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},J=null,V=function(e){J="bearer ".concat(e)},U=function(){J=null},G=function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(L.a.get("/api/shops"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},K=function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(L.a.post("/api/shops",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},Q=function(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:J}},n.next=3,s.a.awrap(L.a.put("".concat("/api/shops","/").concat(e.id),e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},X=function(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:J}},n.next=3,s.a.awrap(L.a.delete("".concat("/api/shops","/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},$=function(e){return function(t){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:window.localStorage.setItem("loggedInShop",JSON.stringify(e)),t({type:"LOGIN_SHOP",data:e});case 2:case"end":return a.stop()}}))}},ee=function(){return function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:window.localStorage.removeItem("loggedInShop"),e({type:"LOGOUT_SHOP"});case 2:case"end":return t.stop()}}))}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SHOP":return t.data;case"LOGOUT_SHOP":return null;default:return e}},ae=function(e,t){return function(a){a({type:"NEW_ALERT",data:e}),setTimeout((function(){a({type:"HIDE_ALERT"})}),1e3*t)}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_ALERT":return t.data;case"HIDE_ALERT":return"";default:return e}},re=function(e,t){return function(a){a({type:"NEW_CONFIRM",data:e}),setTimeout((function(){a({type:"HIDE_CONFIRM"})}),1e3*t)}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_CONFIRM":return t.data;case"HIDE_CONFIRM":return"";default:return e}},le=function(){return function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(_());case 2:t=a.sent,e({type:"INIT_PRODUCTS",data:t});case 4:case"end":return a.stop()}}))}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_PRODUCTS":return t.data;default:return e}},se=function(){return function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(G());case 2:t=a.sent,e({type:"INIT_SHOPS",data:t});case 4:case"end":return a.stop()}}))}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_SHOPS":return t.data;default:return e}},ue={setAlert:ae,setConfirm:re,initializeProducts:le,initializeShops:se},me=Object(i.b)((function(e){return{shopLogin:e.shopLogin}}),ue)((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(1),i=Object(d.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(0),E=Object(d.a)(p,2),f=E[0],h=E[1],b=Object(n.useState)(""),v=Object(d.a)(b,2),g=v[0],N=v[1],y=Object(n.useState)(null),k=Object(d.a)(y,2),O=k[0],S=k[1],x=Object(n.useState)(null),j=Object(d.a)(x,2),C=j[0],P=j[1],A=Object(n.useState)(!0),z=Object(d.a)(A,2),I=z[0],L=z[1],D=Object(n.useState)(!1),T=Object(d.a)(D,2),R=T[0],_=T[1],M={display:I?"":"none"},Y={display:R?"":"none"},q=0===f?"ui button selected-btn":"ui basic teal button not-selected-btn",J=.1===f?"ui button selected-btn":"ui basic teal button not-selected-btn",V=.2===f?"ui button selected-btn":"ui basic teal button not-selected-btn",U=.3===f?"ui button selected-btn":"ui basic teal button not-selected-btn",G=.4===f?"ui button selected-btn":"ui basic teal button not-selected-btn",K=.5===f?"ui button selected-btn":"ui basic teal button not-selected-btn",Q=.6===f?"ui button selected-btn":"ui basic teal button not-selected-btn",X=.7===f?"ui button selected-btn":"ui basic teal button not-selected-btn",$=.8===f?"ui button selected-btn":"ui basic teal button not-selected-btn",ee=.9===f?"ui button selected-btn":"ui basic teal button not-selected-btn";return r.a.createElement("div",null,r.a.createElement("div",{style:M,className:"row product-container"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:e.product.img.location,alt:"product"}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("h4",null,e.product.description),r.a.createElement("hr",{className:"divider"}),r.a.createElement("h6",null,"Expiration date: ",r.a.createElement("b",null,w(e.product.date)))),r.a.createElement("div",{className:"img-container-small-screen"},r.a.createElement("img",{src:e.product.img.location,alt:"product"})),r.a.createElement("div",{className:"col-md-2 col-sm-12 price-container-shop"},r.a.createElement("div",{className:"price-container shop-prices"},r.a.createElement("div",{className:"prices"},r.a.createElement("h4",null,e.product.price," \u20ac"),r.a.createElement("h6",{className:"original-price"},e.product.originalPrice," \u20ac")),r.a.createElement("h5",{className:"discount"},"-",e.product.discount,"%"))),r.a.createElement("div",{className:"col-md-2 col-sm-12"},r.a.createElement("div",{className:"shop-product-buttons"},r.a.createElement("button",{className:"btn btn-info edit-button",onClick:function(){return t=e.product,L(!1),_(!0),l(t.description),m(t.originalPrice),h(t.discount/100),N(t.date),void P(t);var t},"data-testid":"shop-product-edit"},"Edit"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t=e.product,s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return F(e.shopLogin.token),a.prev=1,a.next=4,s.a.awrap(W(t.id));case 4:return a.next=6,s.a.awrap(Z(t.img.id));case 6:e.setConfirm("Product was removed!",5),e.initializeProducts(),e.initializeShops(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log("error",a.t0),e.setAlert("Product was not removed, please try again",5);case 15:case"end":return a.stop()}}),null,null,[[1,11]]);var t},"data-testid":"shop-product-remove"},"Remove")))),r.a.createElement("div",{style:Y},r.a.createElement("form",{onSubmit:function(t){var a,n,r,l,o,i,m,d,p;return s.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:if(t.preventDefault(),(a=new FormData).append("img",O),n=u*(1-f),r=Math.round(100*(n+Number.EPSILON))/100,l=100*f,0===f&&(r=u,l=0),o={description:c,price:r,discount:l,originalPrice:u,date:g,availability:!0,expired:!1,shop:e.shopLogin.id},""!==c){E.next=11;break}return e.setAlert("Product needs a name or a short description",5),E.abrupt("return");case 11:if(i=new Date,(m=new Date(g)).setHours(23),m.setMinutes(59),m.setSeconds(59),!(i>m)){E.next=19;break}return e.setAlert("Expiration date must be at least current date",5),E.abrupt("return");case 19:if(F(e.shopLogin.token),d=C.img.id,E.prev=21,null===O){E.next=29;break}return E.next=25,s.a.awrap(Z(C.img.id));case 25:return E.next=27,s.a.awrap(B(a));case 27:p=E.sent,d=p.id;case 29:return o.img=d,E.next=32,s.a.awrap(H(C.id,o));case 32:e.initializeProducts(),e.initializeShops(),e.setConfirm("Product edited successfully!",5),L(!0),_(!1),E.next=43;break;case 39:E.prev=39,E.t0=E.catch(21),console.log("error",E.t0),e.setAlert("Could not edit product, please try again",5);case 43:case"end":return E.stop()}}),null,null,[[21,39]])}},r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Name/description:"),r.a.createElement("div",{className:"col-lg-5 col-md-9"},r.a.createElement("input",{"data-testid":"name",type:"text",className:"form-control",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Original price:"),r.a.createElement("div",{className:"col-lg-5 col-md-9"},r.a.createElement("input",{"data-testid":"originalPrice",type:"number",className:"form-control",value:u,onChange:function(e){return m(e.target.value)}}))),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Discount %:"),r.a.createElement("div",{className:"col-lg-5 col-md-9"},r.a.createElement("div",{className:"discount-buttons"},r.a.createElement("div",{onClick:function(){return h(0)},className:q},"0 %"),r.a.createElement("div",{onClick:function(){return h(.1)},className:J},"10 %"),r.a.createElement("div",{onClick:function(){return h(.2)},className:V},"20 %"),r.a.createElement("div",{onClick:function(){return h(.3)},className:U},"30 %"),r.a.createElement("div",{onClick:function(){return h(.4)},className:G},"40 %"),r.a.createElement("div",{onClick:function(){return h(.5)},className:K},"50 %"),r.a.createElement("div",{onClick:function(){return h(.6)},className:Q},"60 %"),r.a.createElement("div",{onClick:function(){return h(.7)},className:X},"70 %"),r.a.createElement("div",{onClick:function(){return h(.8)},className:$},"80 %"),r.a.createElement("div",{onClick:function(){return h(.9)},className:ee},"90 %")))),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Discounted price:"),r.a.createElement("div",{className:"col-lg-2 col-md-9"},r.a.createElement("input",{type:"number",className:"form-control-plaintext discounted-price",value:e.product.price,readOnly:!0}))),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Select image:"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{"data-testid":"file",type:"file",onChange:function(e){S(e.target.files[0])}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Expiration date:"),r.a.createElement("div",{className:"col-lg-3 col-md-4"},r.a.createElement("input",{"data-testid":"date",type:"date",className:"form-control",value:g,onChange:function(e){return N(e.target.value)}})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{onClick:function(){var e=(new Date).toISOString().slice(0,10);N(e)},className:"ui basic teal button","data-testid":"product-today"},"Today"),r.a.createElement("div",{onClick:function(){var e=new Date(g),t=e.setDate(e.getDate()+1),a=new Date(t).toISOString().slice(0,10);N(a)},className:"ui basic teal button","data-testid":"product-1Day"},"+1 Day"))),r.a.createElement("div",{className:"edit-product-buttons"},r.a.createElement("div",{className:"ui basic red button",onClick:function(){_(!1),L(!0)},"data-testid":"shop-product-cancel"},"Cancel"),r.a.createElement("button",{className:"ui button",type:"submit","data-testid":"shop-product-edit-product"},"Edit Product")),r.a.createElement("hr",null))))})),de=a(309),pe={setAlert:ae,setConfirm:re,initializeProducts:le,initializeShops:se},Ee=Object(i.b)((function(e){return{shopLogin:e.shopLogin}}),pe)((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(1),i=Object(d.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(0),E=Object(d.a)(p,2),f=E[0],h=E[1],b=Object(n.useState)(1),v=Object(d.a)(b,2),g=v[0],N=v[1],y=Object(n.useState)(null),w=Object(d.a)(y,2),k=w[0],O=w[1],S=Object(n.useState)(""),x=Object(d.a)(S,2),j=x[0],C=x[1],P=Object(n.useState)(!1),A=Object(d.a)(P,2),z=A[0],I=A[1],L=Object(n.useState)(!0),D=Object(d.a)(L,2),T=D[0],R=D[1],_=(new Date).toISOString().slice(0,10);Object(n.useEffect)((function(){C(_)}),[_]);var H=0===f?"ui button selected-btn":"ui basic teal button not-selected-btn",W=.1===f?"ui button selected-btn":"ui basic teal button not-selected-btn",Y=.2===f?"ui button selected-btn":"ui basic teal button not-selected-btn",q=.3===f?"ui button selected-btn":"ui basic teal button not-selected-btn",J=.4===f?"ui button selected-btn":"ui basic teal button not-selected-btn",V=.5===f?"ui button selected-btn":"ui basic teal button not-selected-btn",U=.6===f?"ui button selected-btn":"ui basic teal button not-selected-btn",G=.7===f?"ui button selected-btn":"ui basic teal button not-selected-btn",K=.8===f?"ui button selected-btn":"ui basic teal button not-selected-btn",Q=.9===f?"ui button selected-btn":"ui basic teal button not-selected-btn",X={display:z?"":"none"},$={display:T?"":"none"};return r.a.createElement("div",null,r.a.createElement("div",{className:"loader",style:X},r.a.createElement(de.a,{active:!0,size:"big",content:"Please wait"})),r.a.createElement("form",{onSubmit:function(t){var a,n,r,o,i,d,p,E,b,v;return s.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(t.preventDefault(),null!==k){y.next=4;break}return e.setAlert("Please add an image to the product",5),y.abrupt("return");case 4:if((a=new FormData).append("img",k),n=u*(1-f),r=Math.round(100*(n+Number.EPSILON))/100,o=100*f,0===f&&(r=u,o=0),i={description:c,price:r,discount:o,originalPrice:u,date:j,availability:!0,expired:!1,shop:e.shopLogin.id},""!==c){y.next=14;break}return e.setAlert("Product needs a name or a short description",5),y.abrupt("return");case 14:if(d=new Date,(p=new Date(j)).setHours(23),p.setMinutes(59),p.setSeconds(59),!(d>p)){y.next=22;break}return e.setAlert("Expiration date must be at least current date",5),y.abrupt("return");case 22:E="",F(e.shopLogin.token),y.prev=24,R(!1),I(!0),b=0;case 28:if(!(b<g)){y.next=39;break}return y.next=31,s.a.awrap(B(a));case 31:return v=y.sent,E=v.id,i.imgId=v.id,y.next=36,s.a.awrap(M(i));case 36:b++,y.next=28;break;case 39:l(""),m(1),h(0),N(1),C(_),I(!1),R(!0),e.initializeProducts(),e.initializeShops(),e.setConfirm("Product(s) added successfully!",5),y.next=59;break;case 51:return y.prev=51,y.t0=y.catch(24),I(!1),R(!0),console.log("error",y.t0),e.setAlert("Product wasn't added, please try again",5),y.next=59,s.a.awrap(Z(E));case 59:case"end":return y.stop()}}),null,null,[[24,51]])},style:$},r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Name/description:"),r.a.createElement("div",{className:"col-lg-5 col-md-9"},r.a.createElement("input",{type:"text",className:"form-control",id:"desc",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Price:"),r.a.createElement("div",{className:"col-lg-5 col-md-9"},r.a.createElement("input",{type:"number",className:"form-control",id:"price",value:u,onChange:function(e){return m(e.target.value)}}))),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col form-label"},"Discount %:"),r.a.createElement("div",{className:"col-lg-5 col-md-9"},r.a.createElement("div",{className:"discount-buttons"},r.a.createElement("div",{onClick:function(){return h(0)},className:H},"0 %"),r.a.createElement("div",{onClick:function(){return h(.1)},className:W},"10 %"),r.a.createElement("div",{onClick:function(){return h(.2)},className:Y},"20 %"),r.a.createElement("div",{onClick:function(){return h(.3)},className:q},"30 %"),r.a.createElement("div",{onClick:function(){return h(.4)},className:J},"40 %"),r.a.createElement("div",{onClick:function(){return h(.5)},className:V},"50 %"),r.a.createElement("div",{onClick:function(){return h(.6)},className:U},"60 %"),r.a.createElement("div",{onClick:function(){return h(.7)},className:G},"70 %"),r.a.createElement("div",{onClick:function(){return h(.8)},className:K},"80 %"),r.a.createElement("div",{onClick:function(){return h(.9)},className:Q},"90 %")))),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Select image:"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"file",id:"add-img",onChange:function(e){O(e.target.files[0])}}))),r.a.createElement("div",{className:"form-group row product-edit-form"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"How many?"),r.a.createElement("div",{className:"col-lg-2 col-md-2"},r.a.createElement("input",{type:"number",className:"form-control",id:"amount",value:g,onChange:function(e){return N(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-2 col-md-3 col-form-label"},"Expiration date:"),r.a.createElement("div",{className:"col-lg-3 col-md-4"},r.a.createElement("input",{type:"date",className:"form-control",id:"date",value:j,onChange:function(e){return C(e.target.value)}})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{onClick:function(){var e=new Date,t=e.setDate(e.getDate()+1),a=new Date(t).toISOString().slice(0,10);C(a)},className:"ui basic teal button","data-testid":"tomorrow"},"Tomorrow"),r.a.createElement("div",{onClick:function(){var e=new Date(j),t=e.setDate(e.getDate()+1),a=new Date(t).toISOString().slice(0,10);C(a)},className:"ui basic teal button","data-testid":"+1Day"},"+1 Day"))),r.a.createElement("div",{className:"add-product-button"},r.a.createElement("button",{className:"ui button",type:"submit","data-testid":"upload"},"Upload"))))})),fe=function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(L.a.post("/api/login",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},he=a(34),be={setAlert:ae,setConfirm:re,initializeProducts:le,initializeShops:se,logoutShop:ee,loginShop:$},ve=Object(i.b)((function(e){return{shopLogin:e.shopLogin,products:e.products,shops:e.shops}}),be)((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(d.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(""),E=Object(d.a)(p,2),f=E[0],h=E[1],b=Object(n.useState)(""),v=Object(d.a)(b,2),g=v[0],N=v[1],y=Object(n.useState)(""),w=Object(d.a)(y,2),k=w[0],O=w[1],S=Object(n.useState)(""),x=Object(d.a)(S,2),j=x[0],C=x[1],P=Object(n.useState)(""),A=Object(d.a)(P,2),z=A[0],I=A[1],D=Object(n.useState)(""),T=Object(d.a)(D,2),_=T[0],M=T[1],H=Object(n.useState)(""),Y=Object(d.a)(H,2),q=Y[0],B=Y[1],J=Object(n.useState)(!1),G=Object(d.a)(J,2),K=G[0],$=G[1],ee=Object(n.useState)(!1),te=Object(d.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!0),ce=Object(d.a)(re,2),le=ce[0],oe=ce[1],se=Object(n.useState)(!0),ie=Object(d.a)(se,2),ue=ie[0],me=ie[1],de=Object(n.useState)(!1),pe=Object(d.a)(de,2),Ee=pe[0],be=pe[1],ve=Object(n.useState)(!1),ge=Object(d.a)(ve,2),Ne=ge[0],ye=ge[1],we=Object(n.useState)({latitude:60.169857,longitude:24.938379,width:"20vw",height:"38vh",zoom:15}),ke=Object(d.a)(we,2),Oe=ke[0],Se=ke[1];Object(n.useEffect)((function(){Se({latitude:z,longitude:_,width:"20vw",height:"38vh",zoom:15})}),[z,_]);var xe=e.shops.find((function(t){return t.id===e.shopLogin.id})),je={display:ue?"":"none"},Ce={display:Ee?"":"none"},Pe={display:Ne?"":"none"},Ae={display:K?"":"none"},ze={display:ae?"":"none"},Ie=le?"password":"text";return r.a.createElement("div",null,r.a.createElement("div",{style:Ae,className:"remove-shop-modal"},r.a.createElement("div",{className:"remove-alert-text"},r.a.createElement("p",null,"ALERT! This will delete everything, including shop registration, there's no way back. Are you sure?")),r.a.createElement("div",{className:"remove-alert-buttons"},r.a.createElement("button",{onClick:function(){ne(!0)},className:"ui basic red button","data-testid":"remove-yes"},"Yes, I'm sure"),r.a.createElement("button",{onClick:function(){$(!1),ne(!1)},className:"ui basic teal button","data-testid":"remove-no"},"No, take me back")),r.a.createElement("div",{style:ze,className:"remove-password-container"},r.a.createElement("div",{className:"remove-confirm-text"},r.a.createElement("p",null,"To confirm, please give your password:")),r.a.createElement("form",{onSubmit:function(t){var a,n,r,c;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t.preventDefault(),a=e.shopLogin.name,n=t.target.password.value,V(e.shopLogin.token),F(e.shopLogin.token),r=e.products.filter((function(t){return t.shop.id===e.shopLogin.id})),l.prev=6,l.next=9,s.a.awrap(fe({name:a,password:n}));case 9:c=0;case 10:if(!(c<r.length)){l.next=18;break}return l.next=13,s.a.awrap(W(r[c].id));case 13:return l.next=15,s.a.awrap(Z(r[c].img.id));case 15:c++,l.next=10;break;case 18:return l.next=20,s.a.awrap(X(e.shopLogin.id));case 20:e.initializeProducts(),e.initializeShops(),R(),U(),e.logoutShop(),l.next=31;break;case 27:l.prev=27,l.t0=l.catch(6),console.log("error",l.t0),e.setAlert("Deletion was not successful, check your password and please try again",5);case 31:case"end":return l.stop()}}),null,null,[[6,27]])}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{name:"password",type:Ie,className:"form-control",id:"shopRemovePassword",placeholder:"Password"})),r.a.createElement("div",{className:"show-password"},r.a.createElement("input",{type:"checkbox",onClick:function(){oe(!le)}}),"Show password"),r.a.createElement("button",{type:"submit",className:"ui red button","data-testid":"remove"},"Remove everything")))),r.a.createElement("div",null,r.a.createElement("div",{style:Ce},r.a.createElement("div",{className:"edit-shop-header"},r.a.createElement("h3",null,"Edit shop details"),r.a.createElement("div",{className:"ui basic grey button",onClick:function(){be(!1),me(!0)},"data-testid":"manage-cancel"},"Cancel")),r.a.createElement("form",{onSubmit:function(t){var a,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),V(e.shopLogin.token),a={id:e.shopLogin.id,name:c,email:u,address:f,zip:g,city:k,phone:j,latitude:z,longitude:_,website:q},(n=JSON.parse(JSON.stringify(e.shopLogin))).name=a.name,r.prev=5,r.next=8,s.a.awrap(Q(a));case 8:e.loginShop(n),e.initializeShops(),e.setConfirm("Shop details updated successfully!",5),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(5),console.log("error",r.t0),e.setAlert("Shop details were not edited, please try again",5);case 17:case"end":return r.stop()}}),null,null,[[5,13]])},className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"newName"},"Shop Name"),r.a.createElement("input",{type:"text",value:c,onChange:function(e){return l(e.target.value)},className:"form-control edit-field",id:"newName",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"editEmail"},"Shop email"),r.a.createElement("input",{type:"text",value:u,onChange:function(e){return m(e.target.value)},className:"form-control edit-field",id:"editEmail",required:!0})),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("label",{htmlFor:"editAddress"},"Address"),r.a.createElement("input",{type:"text",value:f,onChange:function(e){return h(e.target.value)},className:"form-control edit-field",id:"editAddress",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopZip"},"Zip Code"),r.a.createElement("input",{type:"text",value:g,onChange:function(e){return N(e.target.value)},className:"form-control edit-field",id:"editZip",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"editCity"},"City"),r.a.createElement("input",{type:"text",value:k,onChange:function(e){return O(e.target.value)},className:"form-control edit-field",id:"editCity",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"editPhone"},"Phone number"),r.a.createElement("input",{type:"text",value:j,onChange:function(e){return C(e.target.value)},className:"form-control edit-field",id:"editPhone",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"editWebsite"},"Website (optional)"),r.a.createElement("input",{type:"text",value:q,onChange:function(e){return B(e.target.value)},className:"form-control edit-field",id:"editWebsite"})),r.a.createElement("div",{className:"col-md-12 coordinates-info"},r.a.createElement("h6",null,'If you want your shop to be shown on the map, you need to give latitude and longitude values. You need to fill at least "address", "zip code" and "city" fields to find the coordinates using "Get Coordinates" -button.')),r.a.createElement("div",{className:"coordinates-zone col-md-12"},r.a.createElement("div",{className:"coordinates-fields"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"editLatitude"},"Latitude (optional)"),r.a.createElement("input",{type:"text",value:z,onChange:function(e){return I(e.target.value)},className:"form-control edit-field",placeholder:"Latitude (optional)",id:"editLatitude"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"editLongitude"},"Longitude (optional)"),r.a.createElement("input",{type:"text",value:_,onChange:function(e){return M(e.target.value)},className:"form-control edit-field",placeholder:"Longitude (optional)",id:"editLongitude"}))),r.a.createElement("div",{className:"get-coordinates-map-container"},r.a.createElement("div",{className:"left-of-register-map"},r.a.createElement("div",{onClick:function(){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(ye(!1),I(""),M(""),""!==f&&""!==g&&""!==k){n.next=6;break}return e.setAlert("To get the coordinates, please type shop's address, zip code and city",5),n.abrupt("return");case 6:return t=encodeURI("".concat(f,", ").concat(g,", ").concat(k,", Finland")),n.prev=7,n.next=10,s.a.awrap(L.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(t,".json?types=address&access_token=").concat("pk.eyJ1IjoibHVua2lvIiwiYSI6ImNrNzRid2FkZzAwNmEzZm1ydThsYWV6Nm8ifQ.0Opp0v-zWtJ9H9OI5SKN1A")));case 10:if(1===(a=n.sent).data.features[0].relevance){n.next=14;break}return e.setAlert("Couldn't get the coordinates, please check that given address is correct. If this doesn't help, leave coordinate fields empty and contact us at support@shelp.fi",10),n.abrupt("return");case 14:I(a.data.features[0].center[1]),M(a.data.features[0].center[0]),ye(!0),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(7),console.log("error",n.t0),e.setAlert("Couldn't get the coordinates, please check that given address is correct. If this doesn't help, leave coordinate fields empty and contact us at support@shelp.fi",10);case 23:case"end":return n.stop()}}),null,null,[[7,19]])},className:"ui teal button","data-testid":"manage-coordinates"},"Get Coordinates"),r.a.createElement("div",{className:"clear-coordinates-container",style:Pe},r.a.createElement("p",{className:"coordinates-text"},"If the location is not correct on the map, clear the coordinates and leave both latitude and longitude fields empty. Please contact us at ",r.a.createElement("b",null,"support@shelp.fi")," for help."),r.a.createElement("div",{onClick:function(){ye(!1),I(""),M("")},className:"ui basic red button","data-testid":"manage-clear-coordinates"},"Clear coordinates"))),Ne&&r.a.createElement(he.b,Object.assign({style:{width:"300px !important"},className:"register-map"},Oe,{mapboxApiAccessToken:"pk.eyJ1IjoibHVua2lvIiwiYSI6ImNrNzRid2FkZzAwNmEzZm1ydThsYWV6Nm8ifQ.0Opp0v-zWtJ9H9OI5SKN1A",onViewportChange:function(e){Se(e)},mapStyle:"mapbox://styles/lunkio/ck74chdp3094a1ip59po50vd1"}),Ne&&r.a.createElement(he.a,{latitude:z,longitude:_},r.a.createElement("i",{className:"fas fa-map-marker-alt map-marker-register"}))))),r.a.createElement("div",{className:"edit-submit-button col-md-12"},r.a.createElement("button",{"data-testid":"manage-submit",type:"submit",className:"ui button"},"Submit changes"))))),r.a.createElement("div",{style:je,className:"zones-container"},r.a.createElement("div",{className:"edit-zone"},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"Edit shop details")),r.a.createElement("p",null,"Change and update your shop details")),r.a.createElement("button",{"data-testid":"manage-edit-shop",className:"btn btn-info",onClick:function(){return function(e){be(!0),me(!1),l(e.name),m(e.email),h(e.address),N(e.zip),O(e.city),C(e.phone),B(e.website),null===e.latitude?I(""):I(e.latitude),null===e.longitude?M(""):M(e.longitude)}(xe)}},"Edit Shop Details"))," ",r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("h3",null,"Danger Zone"),r.a.createElement("div",{className:"danger-zone"},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"Delete everything")),r.a.createElement("p",null,"Once you delete this shop, everything including its products will be deleted forever.")),r.a.createElement("button",{"data-testid":"manage-delete-shop",className:"btn btn-danger",onClick:function(){$(!0),ne(!1)}},"Delete Everything")))))})),ge=function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(L.a.get("/api/buyers"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},Ne=function(e){var t;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(L.a.post("/api/buyers",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},ye={setAlert:ae,setConfirm:re,initializeProducts:le},we=Object(i.b)((function(e){return{shopLogin:e.shopLogin}}),ye)((function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],l=a[1];if(Object(n.useEffect)((function(){!function(){var e;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(ge());case 2:e=t.sent,l(e);case 4:case"end":return t.stop()}}))}()}),[]),0===c.length)return null;var o=c.find((function(t){for(var a=t.products.map((function(e){return e.id})),n=0;n<a.length;n++)if(a[n]===e.product.id)return t;return null}));return r.a.createElement("div",{className:"row bought-product-container"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:e.product.img.location,alt:"product","data-testid":"bought-img"}))),r.a.createElement("div",{className:"col-md-6 bought-product-desc-container"},r.a.createElement("div",{className:"bought-product-desc"},r.a.createElement("h4",null,e.product.description)," ",r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("b",null,"Buyer:")," ",o.firstName," ",o.lastName,", ",o.email," ",o.phone),r.a.createElement("p",null,r.a.createElement("b",null,"Payment ID:")," ",o.paymentID),r.a.createElement("p",null,r.a.createElement("b",null,"Purchase time:")," ",o.timeOfPurchase)),r.a.createElement("div",{className:"img-container-small-screen bought-small-screen"},r.a.createElement("img",{src:e.product.img.location,alt:"product"}))),r.a.createElement("div",{className:"col-md-2 bought-product-price"},r.a.createElement("p",null,r.a.createElement("b",null,e.product.price," \u20ac"))),r.a.createElement("div",{className:"col-md-2 bought-product-delete-button"},r.a.createElement("div",null,r.a.createElement("button",{"data-testid":"remove-bought",className:"btn btn-danger",onClick:function(){return t=e.product,s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return F(e.shopLogin.token),a.prev=1,a.next=4,s.a.awrap(W(t.id));case 4:return a.next=6,s.a.awrap(Z(t.img.id));case 6:e.setConfirm("Bought product is now removed from this list",5),e.initializeProducts(),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),console.log("error",a.t0),e.setAlert("Product was not removed, please try again",5);case 14:case"end":return a.stop()}}),null,null,[[1,10]]);var t}},"Picked up/Remove"))))})),ke={setAlert:ae,setConfirm:re,initializeProducts:le,initializeShops:se},Oe=Object(i.b)((function(e){return{shopLogin:e.shopLogin}}),ke)((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!0),i=Object(d.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(!1),E=Object(d.a)(p,2),f=E[0],h=E[1],b=Object(n.useState)(!0),v=Object(d.a)(b,2),g=v[0],N=v[1],y={display:u?"":"none"},k={display:f?"":"none"},O={visibility:g?"visible":"hidden"};return r.a.createElement("div",{className:"row product-container"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:e.product.img.location,alt:"product","data-testid":"expired-img"}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("h4",null,e.product.description),r.a.createElement("hr",{className:"divider"}),r.a.createElement("h6",{style:y},"Expiration date: ",r.a.createElement("b",{style:{color:"red"}},w(e.product.date))),r.a.createElement("div",{style:k,className:"row expired-edit"},r.a.createElement("input",{type:"date",className:"form-control col-xl-4 col-lg-12 col-md-12",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("div",{className:"col-xl-8 col-lg-12 col-md-12 expiry-set-buttons"},r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){var e=new Date(c),t=e.setDate(e.getDate()+1),a=new Date(t).toISOString().slice(0,10);l(a)},className:"ui basic teal button","data-testid":"expired-1Day"},"+1 Day"),r.a.createElement("div",{onClick:function(){return function(t){var a,n,r;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(a={description:t.description,price:t.price,discount:t.discount,originalPrice:t.originalPrice,date:c,availability:!0,expired:!1,img:t.img.id},n=new Date,(r=new Date(c)).setHours(23),r.setMinutes(59),r.setSeconds(59),!(n>r)){l.next=9;break}return e.setAlert("Expiration date must be at least current date",5),l.abrupt("return");case 9:return F(e.shopLogin.token),l.prev=10,l.next=13,s.a.awrap(H(t.id,a));case 13:e.initializeProducts(),e.initializeShops(),e.setConfirm("Product's date edited successfully!",5),l.next=22;break;case 18:l.prev=18,l.t0=l.catch(10),console.log("error"),e.setAlert("Date was not updated, please try again",5);case 22:case"end":return l.stop()}}),null,null,[[10,18]])}(e.product)},className:"ui button set-date-button","data-testid":"expired-set-date"},"Set Date")),r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){m(!0),h(!1),N(!0)},className:"ui basic red button","data-testid":"expired-cancel"},"Cancel"))))),r.a.createElement("div",{className:"img-container-small-screen"},r.a.createElement("img",{src:e.product.img.location,alt:"product"})),r.a.createElement("div",{className:"col-md-1 col-sm-12 price-container-shop"},r.a.createElement("div",{className:"price-container shop-prices"},r.a.createElement("div",{className:"prices"},r.a.createElement("h5",null,e.product.price,"\u20ac"),r.a.createElement("h6",{className:"original-price"},e.product.originalPrice,"\u20ac")),r.a.createElement("h5",{className:"discount"},"-",e.product.discount,"%"))),r.a.createElement("div",{className:"col-md-3 col-sm-12",style:O},r.a.createElement("div",{className:"shop-expire-edit-button"},r.a.createElement("button",{className:"btn btn-info expire-edit-button",onClick:function(){return t=e.product,l(t.date),m(!1),h(!0),void N(!1);var t},"data-testid":"expired-edit"},"Edit expiration date"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t=e.product,s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return F(e.shopLogin.token),a.prev=1,a.next=4,s.a.awrap(W(t.id));case 4:return a.next=6,s.a.awrap(Z(t.img.id));case 6:e.setConfirm("Product was removed!",5),e.initializeProducts(),e.initializeShops(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log("error",a.t0),e.setAlert("Product was not removed, please try again",5);case 15:case"end":return a.stop()}}),null,null,[[1,11]]);var t},"data-testid":"expired-remove"},"Remove"))))})),Se={logoutShop:ee},xe=Object(i.b)((function(e){return{shopLogin:e.shopLogin,products:e.products,alert:e.alert,confirm:e.confirm}}),Se)((function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!0),s=Object(d.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(!1),p=Object(d.a)(m,2),E=p[0],f=p[1],h=Object(n.useState)(!1),b=Object(d.a)(h,2),v=b[0],g=b[1],N=Object(n.useState)(!1),y=Object(d.a)(N,2),w=y[0],k=y[1],O=Object(n.useState)(!1),S=Object(d.a)(O,2),x=S[0],j=S[1];if(null===c)return l([]),null;var P,z={display:i?"":"none"},I={display:E?"":"none"},L={display:v?"":"none"},D={display:w?"":"none"},T={display:x?"":"none"},F=function(){u(!1),f(!0),g(!1),k(!1),j(!1)};P=e.products.filter((function(t){return t.shop.id===e.shopLogin.id})).filter((function(e){return!0===e.availability})).map((function(e){return{value:e.id,label:e.description}}));var _=c.map((function(e){return e.value})),M=[];return r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"loggedin-header row"},r.a.createElement("h5",{className:"col-md-4 col-sm-12 partner-pages"},r.a.createElement("b",null,"Shelp Partner pages")),r.a.createElement("h3",{className:"col-md-4 col-sm-12 shopname"},"Logged in as ",e.shopLogin.name),r.a.createElement("div",{className:"col-md-4 col-sm-12 logout-shop"},r.a.createElement("button",{"data-testid":"logout",onClick:function(){R(),U(),e.logoutShop()},className:"btn btn-danger"},"Logout"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"loggedin-buttons"},r.a.createElement("button",{className:"ui button","data-testid":"products",onClick:function(){u(!0),f(!1),g(!1),k(!1),j(!1)}},"Products on sale"),r.a.createElement("button",{className:"ui button","data-testid":"bought",onClick:function(){u(!1),f(!1),g(!1),k(!0),j(!1)}},"Bought Products"),r.a.createElement("button",{className:"ui button","data-testid":"expired",onClick:function(){u(!1),f(!1),g(!1),k(!1),j(!0)}},"Expired Products"),r.a.createElement("button",{className:"ui button","data-testid":"add",onClick:F},"Add products"),r.a.createElement("button",{className:"ui button","data-testid":"manage",onClick:function(){u(!1),f(!1),g(!0),k(!1),j(!1)}},"Manage Shop")),r.a.createElement("div",{className:"info-message"},e.confirm&&r.a.createElement(A.a,{success:!0,header:e.confirm}),e.alert&&r.a.createElement(A.a,{error:!0,header:e.alert})),r.a.createElement("div",{style:z},r.a.createElement("div",null,r.a.createElement("h3",null,"Products on sale:")),r.a.createElement("hr",null),r.a.createElement(C.a,{options:P,placeholder:"Search products...",onChange:l,isMulti:!0,isSearchable:!0})," ",r.a.createElement("br",null),0===P.length&&r.a.createElement("div",{className:"no-products-sale"},r.a.createElement("h1",null,"No products on sale"),r.a.createElement("h5",{onClick:F},"Add products")),0===c.length&&r.a.createElement("div",null,e.products.filter((function(t){return t.shop.id===e.shopLogin.id})).filter((function(e){return!0===e.availability})).map((function(e){return r.a.createElement(me,{key:e.id,product:e})}))),c.length>0&&r.a.createElement("div",null,_.forEach((function(t){M=M.concat(e.products.filter((function(e){return e.id===t})))})),M.map((function(e){return r.a.createElement(me,{key:e.id,product:e})})))),r.a.createElement("div",{style:D},r.a.createElement("div",null,r.a.createElement("h3",null,"Bought products:")),r.a.createElement("hr",null),e.products.filter((function(t){return t.shop.id===e.shopLogin.id})).filter((function(e){return!0!==e.expired})).filter((function(e){return!1===e.availability})).map((function(e){return r.a.createElement(we,{key:e.id,product:e})}))),r.a.createElement("div",{style:T},r.a.createElement("div",null,r.a.createElement("h3",null,"Expired products:")),r.a.createElement("hr",null),e.products.filter((function(t){return t.shop.id===e.shopLogin.id})).filter((function(e){return!0===e.expired})).map((function(e){return r.a.createElement(Oe,{key:e.id,product:e})}))),r.a.createElement("div",{style:I},r.a.createElement("div",null,r.a.createElement("h3",null,"Add new product:")),r.a.createElement("hr",null),r.a.createElement(Ee,null)),r.a.createElement("div",{style:L},r.a.createElement("div",null,r.a.createElement("h3",null,"Manage Shop:")),r.a.createElement("hr",null),r.a.createElement(ve,null)))})),je={loginShop:$,setAlert:ae},Ce=Object(i.b)((function(e){return{shopLogin:e.shopLogin,alert:e.alert}}),je)((function(e){var t=Object(n.useState)(!0),a=Object(d.a)(t,2),c=a[0],l=a[1];if(e.shopLogin)return r.a.createElement(xe,null);var o=c?"password":"text";return r.a.createElement("div",{className:"container main login-form"},r.a.createElement("div",{className:"login-header"},r.a.createElement("h2",null,"Login as Shelp Partner")),r.a.createElement("form",{onSubmit:function(t){var a,n,r;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t.preventDefault(),a=t.target.name.value,n=t.target.password.value,c.prev=3,c.next=6,s.a.awrap(fe({name:a,password:n}));case 6:r=c.sent,F(r.token),e.loginShop(r),c.next=15;break;case 11:c.prev=11,c.t0=c.catch(3),console.log("error",c.t0),e.setAlert("Wrong username or password",3);case 15:case"end":return c.stop()}}),null,null,[[3,11]])}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"shopName"},"Shop Name"),r.a.createElement("input",{name:"name",type:"text",className:"form-control",id:"shopName"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"shopPassword"},"Password"),r.a.createElement("input",{name:"password",type:o,className:"form-control",id:"shopPassword"})),r.a.createElement("div",{className:"show-password"},r.a.createElement("input",{type:"checkbox",onClick:function(){l(!c)},id:"showPassword"}),"Show password"),r.a.createElement("div",{className:"login-button"},r.a.createElement("button",{id:"loginBtn",type:"submit",className:"ui button"},"Login"))),r.a.createElement("div",{className:"info-message"},e.alert&&r.a.createElement(A.a,{error:!0,header:e.alert})),r.a.createElement("div",{className:"signup-container"},r.a.createElement("p",null,"Not yet a partner?"),r.a.createElement(u.b,{to:"register"},r.a.createElement("button",{className:"ui grey basic button","data-testid":"signup"},"Sign up"))))})),Pe={setAlert:ae,initializeShops:se,logoutShop:ee},Ae=Object(i.b)((function(e){return{alert:e.alert}}),Pe)((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(d.a)(o,2),m=i[0],p=i[1],E=Object(n.useState)(""),f=Object(d.a)(E,2),h=f[0],b=f[1],v=Object(n.useState)(""),g=Object(d.a)(v,2),N=g[0],y=g[1],w=Object(n.useState)(""),k=Object(d.a)(w,2),O=k[0],S=k[1],x=Object(n.useState)(""),j=Object(d.a)(x,2),C=j[0],P=j[1],z=Object(n.useState)(""),I=Object(d.a)(z,2),D=I[0],T=I[1],F=Object(n.useState)(""),_=Object(d.a)(F,2),M=_[0],H=_[1],W=Object(n.useState)(""),Y=Object(d.a)(W,2),q=Y[0],B=Y[1],Z=Object(n.useState)(""),J=Object(d.a)(Z,2),V=J[0],Q=J[1],X=Object(n.useState)(""),$=Object(d.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)(!0),ne=Object(d.a)(ae,2),re=ne[0],ce=ne[1],le=Object(n.useState)(!0),oe=Object(d.a)(le,2),se=oe[0],ie=oe[1],ue=Object(n.useState)(!0),me=Object(d.a)(ue,2),de=me[0],pe=me[1],Ee=Object(n.useState)(!1),fe=Object(d.a)(Ee,2),be=fe[0],ve=fe[1],ge=Object(n.useState)(!1),Ne=Object(d.a)(ge,2),ye=Ne[0],we=Ne[1],ke=Object(n.useState)(!1),Oe=Object(d.a)(ke,2),Se=Oe[0],xe=Oe[1],je=Object(n.useState)(!1),Ce=Object(d.a)(je,2),Pe=Ce[0],Ae=Ce[1],ze=Object(n.useState)(!1),Ie=Object(d.a)(ze,2),Le=Ie[0],De=Ie[1],Te=Object(n.useState)(!1),Fe=Object(d.a)(Te,2),Re=Fe[0],_e=Fe[1],Me=Object(n.useState)(!1),He=Object(d.a)(Me,2),We=He[0],Ye=He[1],qe=Object(n.useState)(!0),Be=Object(d.a)(qe,2),Ze=Be[0],Je=Be[1],Ve=Object(n.useState)(!1),Ue=Object(d.a)(Ve,2),Ge=Ue[0],Ke=Ue[1],Qe=Object(n.useState)(!0),Xe=Object(d.a)(Qe,2),$e=Xe[0],et=Xe[1],tt=Object(n.useState)({latitude:60.169857,longitude:24.938379,width:"20vw",height:"38vh",zoom:15}),at=Object(d.a)(tt,2),nt=at[0],rt=at[1];Object(n.useEffect)((function(){rt({latitude:V,longitude:ee,width:"20vw",height:"38vh",zoom:15})}),[V,ee]);var ct={display:se?"":"none"},lt={display:de?"":"none"},ot={display:be?"":"none"},st={display:ye?"":"none"},it={display:Se?"":"none"},ut={display:Pe?"":"none"},mt={display:Le?"":"none"},dt={display:Re?"":"none"},pt={display:re?"":"none"},Et={display:We?"":"none"},ft={display:Ze?"":"none"},ht={display:Ge?"":"none"},bt=de?"progress-ball-active":"progress-ball-nonactive",vt=ye?"progress-ball-active":"progress-ball-nonactive",gt=Pe?"progress-ball-active":"progress-ball-nonactive",Nt=We?"progress-ball-active":"progress-ball-nonactive",yt=$e?"password":"text";return r.a.createElement("div",{className:"container main register-container"},r.a.createElement("div",{style:pt},r.a.createElement("div",{className:"goback-login-button"},r.a.createElement(u.b,{to:"/partnerinfo"},r.a.createElement("button",{className:"ui grey basic button"},"Go back"))),r.a.createElement("div",{className:"register-header"},r.a.createElement("div",null,r.a.createElement("h2",null,"Start selling with Shelp"),r.a.createElement("p",null,"Throwing food products away is bad business. Let us help you sell your surplus products and turn it into good business."),r.a.createElement("p",null,r.a.createElement("b",null,"Set up your Shelp account in just minutes by following the next steps!")),r.a.createElement("hr",null))),r.a.createElement("div",{className:"register-progress",style:ft},r.a.createElement("div",{className:bt}),r.a.createElement("div",{className:vt}),r.a.createElement("div",{className:gt}),r.a.createElement("div",{className:Nt})),r.a.createElement("div",{className:"register-overview",style:Et},r.a.createElement("h2",null,"Overview"),r.a.createElement("h6",null,"Check all the details and then press 'Submit' to register your Shop"))),r.a.createElement("form",{onSubmit:function(t){var a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),O===C&&""!==O&&""!==C){n.next=4;break}return e.setAlert("Please check that both passwords are identical and not empty",5),n.abrupt("return");case 4:return a={name:N,email:D,password:O,address:c,zip:m,city:h,phone:M,latitude:V,longitude:ee,website:q},n.prev=5,n.next=8,s.a.awrap(K(a));case 8:_e(!0),ie(!1),ve(!1),xe(!1),De(!1),ce(!1),Je(!1),R(),U(),e.logoutShop(),e.initializeShops(),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(5),console.log("error",n.t0),e.setAlert("Shop name already in use, please try with another name",5);case 25:case"end":return n.stop()}}),null,null,[[5,21]])},className:"row register-form"},r.a.createElement("div",{style:ct,className:"row register-fields"},r.a.createElement("div",{className:"register-question col-md-12",style:lt},r.a.createElement("h6",null,r.a.createElement("b",null,"Where is your shop located?"))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("label",{htmlFor:"shopAddress"},"Address"),r.a.createElement("input",{type:"text",onChange:function(e){return l(e.target.value)},className:"form-control register-field",placeholder:"Address",id:"shopAddress",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopZip"},"Zip Code"),r.a.createElement("input",{type:"text",onChange:function(e){return p(e.target.value)},className:"form-control register-field",placeholder:"Zip Code",id:"shopZip",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopCity"},"City"),r.a.createElement("input",{type:"text",onChange:function(e){return b(e.target.value)},className:"form-control register-field",placeholder:"City",id:"shopCity",required:!0})),r.a.createElement("div",{style:lt,className:"col-md-12 coordinates-info"},r.a.createElement("h6",null,'If you want your shop to be shown on the map, you need to give latitude and longitude values. Fill all the fields above and press the "Get Coordinates" -button for the coordinates.')),r.a.createElement("div",{style:lt,className:"coordinates-zone col-md-12"},r.a.createElement("div",{className:"coordinates-fields"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopLatitude"},"Latitude (optional)"),r.a.createElement("input",{type:"text",value:V,onChange:function(e){return Q(e.target.value)},className:"form-control register-field",placeholder:"Latitude (optional)",id:"shopLatitude"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopLongitude"},"Longitude (optional)"),r.a.createElement("input",{type:"text",value:ee,onChange:function(e){return te(e.target.value)},className:"form-control register-field",placeholder:"Longitude (optional)",id:"shopLongitude"}))),r.a.createElement("div",{className:"get-coordinates-map-container"},r.a.createElement("div",{className:"left-of-register-map"},r.a.createElement("div",{onClick:function(){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(Ke(!1),Q(""),te(""),""!==c&&""!==m&&""!==h){n.next=6;break}return e.setAlert("To get the coordinates, please type shop's address, zip code and city",5),n.abrupt("return");case 6:return t=encodeURI("".concat(c,", ").concat(m,", ").concat(h,", Finland")),n.prev=7,n.next=10,s.a.awrap(L.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(t,".json?types=address&access_token=").concat("pk.eyJ1IjoibHVua2lvIiwiYSI6ImNrNzRid2FkZzAwNmEzZm1ydThsYWV6Nm8ifQ.0Opp0v-zWtJ9H9OI5SKN1A")));case 10:if(1===(a=n.sent).data.features[0].relevance){n.next=14;break}return e.setAlert("Couldn't get the coordinates, please check that given address is correct. If this doesn't help, leave coordinate fields empty, they can be added also after registration",10),n.abrupt("return");case 14:Q(a.data.features[0].center[1]),te(a.data.features[0].center[0]),Ke(!0),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(7),console.log("error",n.t0),e.setAlert("Couldn't get the coordinates, please check that given address is correct. If this doesn't help, leave coordinate fields empty, they can be added also after registration",10);case 23:case"end":return n.stop()}}),null,null,[[7,19]])},className:"ui teal button"},"Get Coordinates"),r.a.createElement("div",{className:"clear-coordinates-container",style:ht},r.a.createElement("p",{className:"coordinates-text"},"If the location is not correct on the map, clear the coordinates and leave both latitude and longitude fields empty. They can be added after registration if needed."),r.a.createElement("div",{onClick:function(){Ke(!1),Q(""),te("")},className:"ui basic red button"},"Clear coordinates"))),Ge&&r.a.createElement(he.b,Object.assign({className:"register-map"},nt,{mapboxApiAccessToken:"pk.eyJ1IjoibHVua2lvIiwiYSI6ImNrNzRid2FkZzAwNmEzZm1ydThsYWV6Nm8ifQ.0Opp0v-zWtJ9H9OI5SKN1A",onViewportChange:function(e){rt(e)},mapStyle:"mapbox://styles/lunkio/ck74chdp3094a1ip59po50vd1"}),Ge&&r.a.createElement(he.a,{latitude:V,longitude:ee},r.a.createElement("i",{className:"fas fa-map-marker-alt map-marker-register"}))))),r.a.createElement("div",{style:lt,className:"register-continue-button col-md-12"},r.a.createElement("div",{onClick:function(){""===c||""===m||""===h?e.setAlert("All the fields must be filled",5):(ie(!1),pe(!1),ve(!0),we(!0))},className:"ui basic teal button","data-testid":"first-continue"},"Continue"))),r.a.createElement("div",{style:ot,className:"row register-fields"},r.a.createElement("div",{className:"register-question col-md-12",style:st},r.a.createElement("h6",null,r.a.createElement("b",null,"Please set your account details"))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("label",{htmlFor:"shopName"},"Shop Name (You will login with shop name once registered)"),r.a.createElement("input",{type:"text",onChange:function(e){return y(e.target.value)},className:"form-control register-field",placeholder:"Shop Name",id:"shopName",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopPsw"},"Password"),r.a.createElement("input",{type:yt,onChange:function(e){return S(e.target.value)},className:"form-control register-field",placeholder:"Password",id:"shopPsw",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopPswAgain"},"Password Again"),r.a.createElement("input",{type:yt,onChange:function(e){return P(e.target.value)},className:"form-control register-field",placeholder:"Password Again",id:"shopPswAgain",required:!0})),r.a.createElement("div",{className:"show-password col-md-12"},r.a.createElement("input",{type:"checkbox",onClick:function(){et(!$e)}}),"Show password"),r.a.createElement("div",{style:st,className:"register-continue-button col-md-12"},r.a.createElement("div",{onClick:function(){ie(!0),pe(!0),ve(!1),we(!1)},className:"ui basic grey button"},"Back"),r.a.createElement("div",{onClick:function(){var t,a,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.a.awrap(G());case 3:if(t=r.sent,a=t.map((function(e){return e.name})).map((function(e){return e.toLowerCase()})),n=N.toLowerCase(),!a.includes(n)){r.next=9;break}return e.setAlert("Shop name already in use, please try with another name",5),r.abrupt("return");case 9:r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),console.log("error"),e.setAlert("Something went wrong, please try again",5);case 15:if(""!==N){r.next=18;break}return e.setAlert("Please type your shop name",5),r.abrupt("return");case 18:if(O===C&&""!==O&&""!==C){r.next=21;break}return e.setAlert("Please check that both passwords are identical and not empty",5),r.abrupt("return");case 21:ve(!1),we(!1),xe(!0),Ae(!0);case 25:case"end":return r.stop()}}),null,null,[[0,11]])},className:"ui basic teal button","data-testid":"second-continue"},"Continue"))),r.a.createElement("div",{style:it,className:"row register-fields"},r.a.createElement("div",{className:"register-question col-md-12",style:ut},r.a.createElement("h6",null,r.a.createElement("b",null,"Please give your shop information"))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("label",{htmlFor:"shopEmail"},"Shop Email"),r.a.createElement("input",{type:"text",onChange:function(e){return T(e.target.value)},className:"form-control register-field",placeholder:"Email",id:"shopEmail",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopPhone"},"Phone number"),r.a.createElement("input",{type:"text",onChange:function(e){return H(e.target.value)},className:"form-control register-field",placeholder:"Phone number",id:"shopPhone",required:!0})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",{htmlFor:"shopWebsite"},"Website (optional)"),r.a.createElement("input",{type:"text",onChange:function(e){return B(e.target.value)},className:"form-control register-field",placeholder:"Website (optional)",id:"shopWebsite"})),r.a.createElement("div",{style:ut,className:"register-continue-button col-md-12"},r.a.createElement("div",{onClick:function(){ve(!0),we(!0),xe(!1),Ae(!1)},className:"ui basic grey button"},"Back"),r.a.createElement("div",{onClick:function(){""===D||""===M?e.setAlert("Please provide at least shop's phone and email information",5):(Ae(!1),Ye(!0),ie(!0),ve(!0),De(!0))},className:"ui basic teal button","data-testid":"third-continue"},"Continue"))),r.a.createElement("div",{style:mt,className:"col-md-12 register-submit-button"},r.a.createElement("button",{id:"submitBtn",type:"submit",className:"ui button"},"Submit")),r.a.createElement("div",{className:"info-message"},e.alert&&r.a.createElement(A.a,{error:!0,header:e.alert}))),r.a.createElement("div",{style:dt,className:"register-success"},r.a.createElement("h2",null,r.a.createElement("b",null,N)," is now registered!"),r.a.createElement("h6",null,"You can",r.a.createElement("span",null,r.a.createElement(u.b,{to:"/login",className:"home-span-link"}," Login"))," now.")))})),ze=a(313),Ie=Object(i.b)(null,{removeFromCart:v})((function(e){return r.a.createElement("div",{className:"row cart-product-container"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"cart-img-container"},r.a.createElement("img",{src:e.product.img.location,alt:"cart product","data-testid":"incart-img"}))),r.a.createElement("div",{className:"col-md-6 cart-product-desc"},r.a.createElement("div",{className:"product-header-date"},r.a.createElement("h4",null,e.product.description)," ",r.a.createElement("h6",null,"Expiration date: ",r.a.createElement("span",{className:"expiration-date"},r.a.createElement("b",null,w(e.product.date)))))," ",r.a.createElement("hr",{className:"divider"}),r.a.createElement("div",{className:"product-shop-small-screen-container"},r.a.createElement("div",{className:"product-shop-desc-texts"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-store"})," ",r.a.createElement("b",null,e.product.shop.name)),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-map-marker-alt"})," ",e.product.shop.address,", ",e.product.shop.zip," ",e.product.shop.city),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-phone"})," ",e.product.shop.phone," ",""!==e.product.shop.website&&r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-globe"})," ",e.product.shop.website))),r.a.createElement("div",{className:"img-container-small-screen"},r.a.createElement("img",{src:e.product.img.location,alt:"cart product"})))),r.a.createElement("div",{className:"col-md-2 price-container"},r.a.createElement("div",{className:"prices"},r.a.createElement("h4",null,e.product.price,"\u20ac"),r.a.createElement("h6",{className:"original-price"},e.product.originalPrice,"\u20ac")),r.a.createElement("h5",{className:"discount"},"-",e.product.discount,"%")),r.a.createElement("div",{className:"col-md-2 cart-remove-item-icon"},r.a.createElement("div",{className:"cart-remove-button",onClick:function(){return t=e.product,void e.removeFromCart(t.id);var t},"data-testid":"remove-from-cart"},r.a.createElement(ze.a,{name:"remove circle",size:"large"})),r.a.createElement("div",{className:"cart-remove-text-small-screen"},"Remove")))})),Le={emptyCart:g},De=Object(i.b)((function(e){return{cart:e.cart}}),Le)((function(e){if(0===e.cart.length)return r.a.createElement("div",{className:"container main empty-cart"},r.a.createElement("h1",null,"Cart is empty"),r.a.createElement(u.b,{to:"/products"},r.a.createElement("button",{className:"ui button","data-testid":"cart-empty-back-to-products"},"Discover offers")));var t=e.cart.reduce((function(e,t){return e+t.price}),0),a=e.cart.reduce((function(e,t){return e+t.originalPrice}),0)-t;return r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"cart-header"},r.a.createElement("h1",null,"Shopping Cart")," ",r.a.createElement("hr",null)),r.a.createElement("div",{className:"row cart-descriptions","data-testid":"cart-desc"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("p",null,r.a.createElement("b",null,"Product"))," ",r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("p",null,r.a.createElement("b",null,"Price"))," ",r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("p",null,r.a.createElement("b",null,"Remove"))," ",r.a.createElement("hr",null))),r.a.createElement("div",{"data-testid":"cart-products"},e.cart.map((function(e){return r.a.createElement(Ie,{key:e.id,product:e})}))),r.a.createElement("div",{className:"row cart-buttons"},r.a.createElement("div",{className:"col-lg-5 col-md-6 col-sm-8 cart-continue-empty-buttons"},r.a.createElement(u.b,{to:"/products"},r.a.createElement("button",{className:"ui teal basic button","data-testid":"continue-shopping"},"Continue shopping")),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){e.emptyCart()},"data-testid":"empty-cart"},"Empty Cart")),r.a.createElement("div",{className:"col-lg-5 col-md-3 col-sm-4 col-12 cart-price-container"},r.a.createElement("div",{className:"cart-prices"},r.a.createElement("h4",null,"Total: ",r.a.createElement("b",null,Math.round(100*(t+Number.EPSILON))/100)," \u20ac"),r.a.createElement("h6",null,"You save ",Math.round(100*(a+Number.EPSILON))/100," \u20ac"))),r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-12 checkout-button"},r.a.createElement(u.b,{to:"/checkout"},r.a.createElement("button",{className:"ui button","data-testid":"cart-checkout-button"},"Checkout")))),r.a.createElement(x,null))})),Te=a(39),Fe=a(152),Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PRODUCT_TO_PAYMENT":return[].concat(Object(h.a)(e),[t.data]);case"EMPTY_PAYMENT":return t.data;default:return e}},_e=Object(Te.d)(m.f,Object(i.b)(null,{addProductToPayment:function(e){return function(t){t({type:"ADD_PRODUCT_TO_PAYMENT",data:e})}},emptyPayment:function(){return function(e){e({type:"EMPTY_PAYMENT",data:[]})}},emptyCart:g}))((function(e){return r.a.createElement(Fe.PayPalButton,{amount:e.totalPrice,onSuccess:function(t){var a,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Success",t),e.emptyPayment(),a=Object(z.a)({},e.buyer,{paymentID:t.id,payerID:t.payer.payer_id}),r.next=5,s.a.awrap(Ne(a));case 5:n=0;case 6:if(!(n<a.products.length)){r.next=13;break}return r.next=9,s.a.awrap(Y(a.products[n].id,a.products[n]));case 9:e.addProductToPayment(a.products[n]);case 10:n++,r.next=6;break;case 13:e.emptyCart(),e.history.push("/success");case 15:case"end":return r.stop()}}))},onCancel:function(t){e.history.push("/cancel")},onError:function(t){e.history.push("/cancel")},options:{clientId:"Adj7OOpYy0m_jmXT6429H3cjedk6dBd0QDul_Nn5_jIqh1V5h9xmctQzX3ZRP2KlBw2dD0KMRJUhPPnV",currency:"EUR"}})})),Me={setAlert:ae,removeFromCart:v,initializeProducts:le},He=Object(i.b)((function(e){return{cart:e.cart,alert:e.alert,products:e.products}}),Me)((function(e){var t=Object(n.useState)({}),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(d.a)(o,2),p=i[0],E=i[1];if(0===e.cart.length)return r.a.createElement(m.a,{to:"/cart"});var f={display:p?"":"none"},h=e.cart.reduce((function(e,t){return e+t.price}),0),b=Math.round(100*(h+Number.EPSILON))/100;return r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"info-message"},e.alert&&r.a.createElement(A.a,{error:!0,header:e.alert})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"checkout-header"},r.a.createElement("h4",null,"Shipping address")),r.a.createElement("form",{onSubmit:function(t){var a,n,r,c,o,i,u,m,d,p,f,h,b,v;return s.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return t.preventDefault(),t.persist(),a=[],g.prev=3,g.next=6,s.a.awrap(_());case 6:for(n=g.sent,r=0;r<e.cart.length;r++)for(c=0;c<n.length;c++)e.cart[r].id===n[c].id&&a.push(n[c]);if(!((o=a.filter((function(e){return!1===e.availability}))).length>0)){g.next=13;break}for(window.alert("One or more of the products in your cart are not available, these products are removed from your cart"),i=0;i<o.length;i++)e.removeFromCart(o[i].id),e.initializeProducts();return g.abrupt("return");case 13:u=t.target.buyerFirstName.value,m=t.target.buyerLastName.value,d=t.target.buyerEmail.value,p=t.target.buyerAddress.value,f=t.target.buyerPostcode.value,h=t.target.buyerPhone.value,b=t.target.buyerCity.value,v=e.cart,l({firstName:u,lastName:m,email:d,address:p,zip:f,phone:h,city:b,products:v}),E(!0),g.next=30;break;case 26:g.prev=26,g.t0=g.catch(3),console.log("error",g.t0),e.setAlert("Payment was not successful, please try again",5);case 30:case"end":return g.stop()}}),null,null,[[3,26]])}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("input",{id:"firstName",type:"text",name:"buyerFirstName",placeholder:"Firstname",required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("input",{id:"lastName",type:"text",name:"buyerLastName",placeholder:"Lastname",required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("input",{id:"email",type:"email",name:"buyerEmail",placeholder:"Email",required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("input",{id:"street",type:"street",name:"buyerAddress",placeholder:"Street",required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-8"},r.a.createElement("input",{id:"city",type:"city",name:"buyerCity",placeholder:"City",required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("input",{id:"zip",type:"zip",name:"buyerPostcode",placeholder:"Postal code",required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("input",{id:"phone",type:"text",name:"buyerPhone",placeholder:"Phone (optional)",className:"form-control"}))),r.a.createElement("div",{className:"checkout-apply-button"},r.a.createElement(u.b,{to:"/cart",className:"back-cart-link"},r.a.createElement("div",{className:"text","data-testid":"back-to-cart"},"< Back to cart")),r.a.createElement("button",{className:"ui button",id:"checkBtn",type:"submit",disabled:p},"Continue to payment")))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"checkout-total"},r.a.createElement("p",null,"Total: ",r.a.createElement("b",null,b)," \u20ac")),r.a.createElement("div",{style:f},r.a.createElement(_e,{buyer:c,totalPrice:b,products:e.cart})),r.a.createElement("hr",null),e.cart.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("div",{className:"checkout-product-container"},r.a.createElement("div",{className:"checkout-img-desc"},r.a.createElement("div",{className:"checkout-img"},r.a.createElement("div",{className:"img-container-checkout"},r.a.createElement("img",{src:e.img.location,alt:"product"}))),r.a.createElement("div",{className:"checkout-desc"},r.a.createElement("h6",null,e.description))),r.a.createElement("div",{className:"checkout-price"},r.a.createElement("p",null,e.price,"\u20ac"))))})))))})),We={initializeProducts:le,initializeShops:se},Ye=Object(i.b)((function(e){return{payment:e.payment}}),We)((function(e){return 0===e.payment.length?r.a.createElement(m.a,{to:"/"}):(e.initializeProducts(),e.initializeShops(),r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"success-header","data-testid":"success"},r.a.createElement("h1",null,"Thank you for your purchase!"),r.a.createElement("p",null,"Order ref-nro: ",r.a.createElement("span",null,r.a.createElement("b",null,e.payment[0].id))),r.a.createElement("p",null,"Order's total sum: ",r.a.createElement("span",null,r.a.createElement("b",null,e.payment.reduce((function(e,t){return e+t.price}),0))," \u20ac")),r.a.createElement("h5",null,"You bought the following product(s):")," ",r.a.createElement("br",null)," ",r.a.createElement("hr",null)),r.a.createElement("div",{className:"row","data-testid":"success-products"},e.payment.map((function(e){return r.a.createElement("div",{key:e.id,className:"col-lg-4 col-md-6 col-md-12"},r.a.createElement("div",{className:"success-product-container"},r.a.createElement("div",{className:"img-container-success"},r.a.createElement("img",{src:e.img.location,alt:"product"})),r.a.createElement("div",{className:"success-product-desc"},r.a.createElement("h4",null,e.description),r.a.createElement("hr",{className:"divider"}),r.a.createElement("p",null,"Shop: ",r.a.createElement("b",null,e.shop.name)),r.a.createElement("p",null,"Price: ",r.a.createElement("b",null,e.price)," \u20ac"))))})))))})),qe=Object(i.b)((function(e){return{cart:e.cart}}))((function(e){return 0===e.cart.length?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"cancel-container","data-testid":"cancel"},r.a.createElement("h1",null,"Oops! Something went wrong"),r.a.createElement("h3",null,"Payment was cancelled/interrupted"),r.a.createElement("h3",null,"Please try again"),r.a.createElement(u.b,{to:"/cart"},r.a.createElement("button",{className:"ui button cancel-button"},"Back to cart"))))})),Be={addToCart:b},Ze=Object(i.b)((function(e){return{shops:e.shops,products:e.products,cart:e.cart}}),Be)((function(e){var t=Object(n.useState)("Discover offers"),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(d.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(!1),p=Object(d.a)(m,2),E=p[0],f=p[1],h=Object(n.useState)(!0),b=Object(d.a)(h,2),v=b[0],g=b[1],N=Object(n.useState)(!1),y=Object(d.a)(N,2),k=y[0],O=y[1],S=Object(n.useState)([]),x=Object(d.a)(S,2),j=x[0],C=x[1],P=Object(n.useState)({address:"none",zip:"none",city:"none",phone:"none",website:"none"}),A=Object(d.a)(P,2),z=A[0],I=A[1],L=Object(n.useState)({latitude:60.169857,longitude:24.938379,width:"100vw",height:"100vh",zoom:12}),D=Object(d.a)(L,2),T=D[0],F=D[1];Object(n.useEffect)((function(){C(e.products.filter((function(e){return!0===e.availability})))}),[e.products]);var R=e.shops.filter((function(e){return null!==e.latitude||null!==e.longitude})).filter((function(e){return e.products.length>0})),_=e.shops.filter((function(e){return null!==e.latitude||null!==e.longitude})).filter((function(e){return 0===e.products.length})),M=function(t){C(e.products.filter((function(e){return e.shop.id===t.id})).filter((function(e){return!0===e.availability}))),l(t.name),u(!0),g(!0),O(!1)},H=function(e){l(e.name),f(!0),I(e),u(!0)},W=function(t){return e.cart.find((function(e){return e.id===t.id}))},Y={visibility:i?"":"hidden"},q={display:E?"":"none"},B={display:v?"":"none"},Z={display:k?"":"none"};return r.a.createElement("div",{className:"main map-container"},r.a.createElement("div",{className:"map-side-window"},r.a.createElement("div",{className:"map-side-header"},r.a.createElement("div",{style:Y,className:"map-back-button",onClick:function(){l("Discover offers"),u(!1),f(!1),g(!0),O(!1),C(e.products.filter((function(e){return!0===e.availability})))}},"< Show all"),r.a.createElement("h3",null,c)),r.a.createElement("div",{style:q,className:"map-shop-details"},r.a.createElement("div",{className:"map-shop-address"},z.address,", ",z.zip," ",z.city),r.a.createElement("div",{className:"map-shop-phone"},r.a.createElement("i",{className:"fas fa-phone"})," ",z.phone),r.a.createElement("div",{className:"map-shop-website"},""!==z.website&&r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-globe"})," ",z.website))),r.a.createElement("div",{className:"map-no-products",style:Z},r.a.createElement("h5",null,"This shop has currently no offers, please check again later")),r.a.createElement("div",{style:B},j.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("div",{className:"map-product-container"},r.a.createElement("div",{onClick:function(){return M((a=t).shop),H(a.shop),void C(e.products.filter((function(e){return e.id===a.id})));var a},className:"map-product-details"},r.a.createElement("div",{className:"map-name-discount"},r.a.createElement("h5",null,r.a.createElement("b",null,t.description)),r.a.createElement("h5",{className:"map-discount"},"-",t.discount,"%")),r.a.createElement("p",{className:"map-shop-name"},r.a.createElement("i",{className:"fas fa-store"})," ",t.shop.name),r.a.createElement("h6",{className:"map-expiration"},"Expiration date: ",r.a.createElement("span",{className:"expiration-date"},r.a.createElement("b",null,w(t.date))))),r.a.createElement("div",{className:"map-price-cart-button"},r.a.createElement("div",{className:"map-price-container"},r.a.createElement("div",{className:"map-prices"},r.a.createElement("h5",null,t.price," \u20ac"),r.a.createElement("h6",{className:"map-original-price"},t.originalPrice," \u20ac"))),r.a.createElement("button",{className:"ui button map-cart-button",disabled:W(t),onClick:function(){return e.addToCart(t)}},W(t)?r.a.createElement("p",null,"In cart"):r.a.createElement("p",null,"Add to Cart")))),r.a.createElement("hr",{className:"map-product-divider"}))})))),r.a.createElement(he.b,Object.assign({className:"map"},T,{mapboxApiAccessToken:"pk.eyJ1IjoibHVua2lvIiwiYSI6ImNrNzRid2FkZzAwNmEzZm1ydThsYWV6Nm8ifQ.0Opp0v-zWtJ9H9OI5SKN1A",onViewportChange:function(e){F(e)},mapStyle:"mapbox://styles/lunkio/ck74chdp3094a1ip59po50vd1"}),R.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(he.a,{latitude:t.latitude,longitude:t.longitude},r.a.createElement("i",{className:"fas fa-map-marker-alt map-marker-products",onClick:function(e){e.preventDefault(),M(t),H(t)}},r.a.createElement("div",{className:"marker-product-amount"},r.a.createElement("p",null,e.products.filter((function(e){return e.shop.id===t.id})).filter((function(e){return!0===e.availability})).length)))))})),_.map((function(e){return r.a.createElement(he.a,{key:e.id,latitude:e.latitude,longitude:e.longitude},r.a.createElement("i",{className:"fas fa-map-marker-alt map-marker-noProducts",onClick:function(t){t.preventDefault(),H(e),O(!0),g(!1)}}))}))))})),Je=a(153),Ve=a.n(Je),Ue=a(154),Ge=a.n(Ue),Ke=a(155),Qe=a.n(Ke),Xe=a(156),$e=a.n(Xe),et=a(75),tt=a.n(et),at=a(76),nt=a.n(at),rt=a(77),ct=a.n(rt),lt=function(){return r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"info-first-section sections"},r.a.createElement("div",{className:"info-intro"},r.a.createElement("div",{className:"info-first-section-header"},r.a.createElement("h1",null,r.a.createElement("b",null,"Increase your revenue and reduce waste."))),r.a.createElement("p",null,"Throwing away products is bad business. Running out of products and having empty shelves is also bad business. Let us help you sell your surplus products and turn it into good business."),r.a.createElement("div",{className:"info-signup-btn"},r.a.createElement(u.b,{to:"/register"},r.a.createElement("button",{className:"ui button"},"Sign up"))),r.a.createElement("div",{className:"info-already-account"},r.a.createElement("h6",null,r.a.createElement("b",null,"Already have an account? ",r.a.createElement(u.b,{className:"info-login-link",to:"/login"},"Login in"))))),r.a.createElement("div",{className:"info-intro-img"},r.a.createElement("div",{className:"info-img-container"},r.a.createElement("img",{className:"info-img",src:Ve.a,alt:"shop"})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"info-second-section sections"},r.a.createElement("div",{className:"info-second-section-header"},r.a.createElement("h2",null,r.a.createElement("b",null,"Benefits of joining Shelp"))),r.a.createElement("div",{className:"info-benefits"},r.a.createElement("div",{className:"first-benefit benefits"},r.a.createElement("div",{className:"benefit-image-container"},r.a.createElement("img",{src:Ge.a,alt:"revenue"})),r.a.createElement("h4",{className:"benefit-header"},"Increased revenue"),r.a.createElement("p",null,"Shelp turns the lost revenue from your unsold products into an extra revenue stream by bringing in customers who pay real money for your surplus products. One sold product brings on average 4 euros to your bank account \u2013 you'll do the math on what it means for your bottom line!")),r.a.createElement("div",{className:"second-benefit benefits"},r.a.createElement("div",{className:"benefit-image-container"},r.a.createElement("img",{src:Qe.a,alt:"happy"})),r.a.createElement("h4",{className:"benefit-header"},"New customers"),r.a.createElement("p",null,"70% of our users have found new products and offers while using Shelp. Selling surplus products with us doesn't cannibalize your regular sales, as buying Shelp products brings awareness and new buying habits.")),r.a.createElement("div",{className:"third-benefit benefits"},r.a.createElement("div",{className:"benefit-image-container"},r.a.createElement("img",{src:$e.a,alt:"earth"})),r.a.createElement("h4",{className:"benefit-header"},"Reduction of waste"),r.a.createElement("p",null,"Following our best practices, you are likely to sell more than half of your surplus products with Shelp. Every product sold and not thrown away reduces unnecessary emissions caused by food production and shows you care about the environment.")))),r.a.createElement("hr",null),r.a.createElement("div",{className:"info-third-section sections"},r.a.createElement("div",{className:"info-third-section-header"},r.a.createElement("h2",null,r.a.createElement("b",null,"Shelp fits right into your current workflow"))),r.a.createElement("div",{className:"info-workflow"},r.a.createElement("div",{className:"info-workflow-img"},r.a.createElement("img",{src:tt.a,alt:"workflow1"})),r.a.createElement("div",{className:"info-workflow-header-text"},r.a.createElement("div",{className:"info-workflow-header"},r.a.createElement("div",{className:"info-workflow-nr"},"1"),r.a.createElement("h4",null,r.a.createElement("b",null,"Announce your surplus products"))),r.a.createElement("div",{className:"info-workflow-text"},r.a.createElement("p",null,"When you look through the products and check the expiration dates, you can also publish those products with closing expiration dates on our platform using our intuitive web-based Partner pages."))))," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"info-workflow"},r.a.createElement("div",{className:"info-workflow-img"},r.a.createElement("img",{src:nt.a,alt:"workflow2"})),r.a.createElement("div",{className:"info-workflow-header-text"},r.a.createElement("div",{className:"info-workflow-header"},r.a.createElement("div",{className:"info-workflow-nr"},"2"),r.a.createElement("h4",null,r.a.createElement("b",null,"Consumers buy your products with the Shelp web application"))),r.a.createElement("div",{className:"info-workflow-text"},r.a.createElement("p",null,"Once you have published your offers, customers can find them by using our web application. Every purchase is made in our application, so there is no extra work or hardware requirements for you. Whenever a purchase is made, your orders list is updated in your Shelp Partner -pages."))))," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"info-workflow"},r.a.createElement("div",{className:"info-workflow-img"},r.a.createElement("img",{src:ct.a,alt:"workflow3"})),r.a.createElement("div",{className:"info-workflow-header-text"},r.a.createElement("div",{className:"info-workflow-header"},r.a.createElement("div",{className:"info-workflow-nr"},"3"),r.a.createElement("h4",null,r.a.createElement("b",null,"Hand out ordered products"))),r.a.createElement("div",{className:"info-workflow-text"},r.a.createElement("p",null,"Customers can come in and pick up their orders within the pickup time window you have defined. Al you need to do is check the order receipt, hand out the order to the customer and mark the order as picked up."))))),r.a.createElement("hr",null),r.a.createElement("div",{className:"info-third-section sections"},r.a.createElement("div",{className:"info-sign-up"},r.a.createElement("h2",null,r.a.createElement("b",null,"Start earning more and wasting less")),r.a.createElement("p",null,"Setting up your account takes no more than a few minutes, after which you can immediately start selling your surplus products with Shelp. We will pay you for your Shelp sales once a month and provide you all the necessary receipts for your bookkeeping."),r.a.createElement("div",{className:"info-signup-btn"},r.a.createElement(u.b,{to:"/register"},r.a.createElement("button",{className:"ui button"},"Sign up"))))),r.a.createElement(x,null))},ot=a(157),st=a.n(ot),it=function(){return r.a.createElement("div",{className:"container main"},r.a.createElement("div",{className:"info-first-section sections"},r.a.createElement("div",{className:"info-intro"},r.a.createElement("div",{className:"info-first-section-header"},r.a.createElement("h1",null,r.a.createElement("b",null,"The more you order, the more you save."))),r.a.createElement("p",null,"Our generous discounts on regular prices saves you money and not needing to visit many shops for offers saves you time. And yeah, the fact that you also save products from ending up in the trash saves the world."),r.a.createElement("div",{className:"info-signup-btn"},r.a.createElement(u.b,{to:"/products"},r.a.createElement("button",{className:"ui button"},"Discover")))),r.a.createElement("div",{className:"info-intro-img"},r.a.createElement("div",{className:"info-img-container"},r.a.createElement("img",{className:"info-img",src:st.a,alt:"customer"})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"info-second-section sections"},r.a.createElement("div",{className:"info-second-section-header"},r.a.createElement("h2",null,r.a.createElement("b",null,"You are two minutes away from saving money and environment"))),r.a.createElement("div",{className:"info-workflow"},r.a.createElement("div",{className:"info-workflow-img"},r.a.createElement("img",{src:tt.a,alt:"workflow1"})),r.a.createElement("div",{className:"info-workflow-header-text"},r.a.createElement("div",{className:"info-workflow-header"},r.a.createElement("div",{className:"info-workflow-nr"},"1"),r.a.createElement("h4",null,r.a.createElement("b",null,"Find cheaper products near you"))),r.a.createElement("div",{className:"info-workflow-text"},r.a.createElement("p",null,"Whenever you visit Shelp website, you will see affordable quality products easily on a map and on a list. The offering consists of products with their expiration date closing in that usually have a 50% discount on regular prices. Just browse around and pick the most suitable offer for you."))))," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"info-workflow"},r.a.createElement("div",{className:"info-workflow-img"},r.a.createElement("img",{src:nt.a,alt:"workflow2"})),r.a.createElement("div",{className:"info-workflow-header-text"},r.a.createElement("div",{className:"info-workflow-header"},r.a.createElement("div",{className:"info-workflow-nr"},"2"),r.a.createElement("h4",null,r.a.createElement("b",null,"Buy directly within the website"))),r.a.createElement("div",{className:"info-workflow-text"},r.a.createElement("p",null,"Purchase your desired product easily with your payment card or PayPal. You can also add multiple offers to your order if there's more than one mouth to feed."))))," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"info-workflow"},r.a.createElement("div",{className:"info-workflow-img"},r.a.createElement("img",{src:ct.a,alt:"workflow3"})),r.a.createElement("div",{className:"info-workflow-header-text"},r.a.createElement("div",{className:"info-workflow-header"},r.a.createElement("div",{className:"info-workflow-nr"},"3"),r.a.createElement("h4",null,r.a.createElement("b",null,"Pick it up before the closing time"))),r.a.createElement("div",{className:"info-workflow-text"},r.a.createElement("p",null,"Unlike food delivery apps, there's no waiting involved \u2013 Shelp orders are ready for pickup immediately after your order. You can choose to grab your products to go as you are passing by the grocery store."))))),r.a.createElement(x,null))},ut=Object(i.b)(null,{initializeProducts:le,initializeShops:se,initializeShop:function(){return function(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:(t=window.localStorage.getItem("loggedInShop"))&&(a=JSON.parse(t),e({type:"LOGIN_SHOP",data:a}));case 2:case"end":return n.stop()}}))}}})((function(e){return Object(n.useEffect)((function(){e.initializeProducts(),e.initializeShops(),e.initializeShop()}),[]),Object(n.useEffect)((function(){!function(){var t,a,n,r,c,l;s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s.a.awrap(_());case 2:for(t=o.sent,a=t.filter((function(e){return!0===e.availability})),n=new Date,r=a.map((function(e){return{date:e.date,id:e.id}})).map((function(e){return{date:new Date(e.date),id:e.id}})),c=0;c<r.length;c++)r[c].date.setHours(23),r[c].date.setMinutes(59),r[c].date.setSeconds(59);l=0;case 8:if(!(l<r.length)){o.next=15;break}if(!(n>=r[l].date)){o.next=12;break}return o.next=12,s.a.awrap(q(r[l].id));case 12:l++,o.next=8;break;case 15:e.initializeProducts();case 16:case"end":return o.stop()}}))}()}),[]),r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(f,null),r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(j,null)}}),r.a.createElement(m.b,{path:"/products",render:function(){return r.a.createElement(P,null)}}),r.a.createElement(m.b,{path:"/partnerinfo",render:function(){return r.a.createElement(lt,null)}}),r.a.createElement(m.b,{path:"/customerinfo",render:function(){return r.a.createElement(it,null)}}),r.a.createElement(m.b,{path:"/login",render:function(){return r.a.createElement(Ce,null)}}),r.a.createElement(m.b,{path:"/register",render:function(){return r.a.createElement(Ae,null)}}),r.a.createElement(m.b,{path:"/cart",render:function(){return r.a.createElement(De,null)}}),r.a.createElement(m.b,{path:"/checkout",render:function(){return r.a.createElement(He,null)}}),r.a.createElement(m.b,{path:"/map",render:function(){return r.a.createElement(Ze,null)}}),r.a.createElement(m.b,{path:"/success",render:function(){return r.a.createElement(Ye,null)}}),r.a.createElement(m.b,{path:"/cancel",render:function(){return r.a.createElement(qe,null)}})))})),mt=a(158),dt=Object(Te.c)({products:oe,shops:ie,cart:N,alert:ne,confirm:ce,shopLogin:te,payment:Re}),pt=Object(Te.e)(dt,Object(Te.a)(mt.a));a(303);l.a.render(r.a.createElement(i.a,{store:pt},r.a.createElement(ut,null)),document.getElementById("root"))},75:function(e,t,a){e.exports=a.p+"static/media/work1.569356b6.jpg"},76:function(e,t,a){e.exports=a.p+"static/media/work2.e92cf56c.jpg"},77:function(e,t,a){e.exports=a.p+"static/media/work3.89965bd6.jpg"}},[[170,1,2]]]);
//# sourceMappingURL=main.0ca977e8.chunk.js.map