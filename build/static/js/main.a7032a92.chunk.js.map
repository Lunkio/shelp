{"version":3,"sources":["images/background.jpeg","images/info1.jpg","images/revenue.svg","images/happy.svg","images/earth.svg","images/info2.jpg","components/Navbar.js","reducers/cartReducer.js","components/Modal.js","services/shared.js","components/SingleProduct.js","components/Footer.js","components/Home.js","components/Products.js","services/productsService.js","services/shopsService.js","reducers/shopLoginReducer.js","reducers/alertReducer.js","reducers/confirmReducer.js","reducers/productsReducer.js","reducers/shopsReducer.js","components/shop/ShopProduct.js","components/shop/ShopAddProduct.js","services/loginService.js","components/shop/ShopManage.js","services/buyerService.js","components/shop/ShopBoughtProduct.js","components/shop/ShopExpiredProduct.js","components/shop/ShopLoggedIn.js","components/shop/ShopLogin.js","components/shop/ShopRegister.js","components/cart/InCartProducts.js","components/cart/Cart.js","reducers/paymentReducer.js","components/cart/PayPal.js","components/cart/Checkout.js","components/cart/PaymentSuccess.js","components/cart/PaymentCancel.js","components/MapBox.js","components/PartnerInfo.js","components/CustomerInfo.js","App.js","store.js","index.js","images/work1.jpg","images/work2.jpg","images/work3.jpg"],"names":["module","exports","connect","state","cart","props","useState","expanded","setExpanded","Navbar","fixed","expand","collapseOnSelect","Brand","onClick","to","className","Toggle","aria-controls","Collapse","id","Nav","length","addToCart","product","dispatch","type","data","removeFromCart","emptyCart","cartReducer","action","filter","p","Modal","modalSwitch","src","img","alt","formatDate","date","modifyDate","slice","split","reverse","splice","join","concat","modalOpen","setModalOpen","checkIfInCart","find","location","data-testid","description","shop","name","address","zip","city","phone","website","price","originalPrice","discount","disabled","Footer","products","noProducts","setNoProducts","useEffect","productDatesAndId","availability","map","Date","sort","a","b","freshProducts","i","homeImg","key","shops","selectedShops","setSelectedShops","allShops","s","value","label","options","placeholder","onChange","isMulti","isSearchable","filteredShops","shopNames","forEach","v","url","token","newToken","async","axios","get","response","config","headers","Authorization","post","put","delete","productToFalse","loginShop","window","localStorage","setItem","JSON","stringify","logoutShop","removeItem","shopLoginReducer","setAlert","content","duration","setTimeout","alertReducer","setConfirm","confirmReducer","initializeProducts","productsService","productReducer","initializeShops","shopsService","shopsReducer","mapDispatchToProps","shopLogin","setName","setPrice","setDiscount","setDate","uploadedImage","setUploadedImage","currentProduct","setCurrentProduct","showProducts","setShowProducts","showEdit","setShowEdit","productsShow","display","editShow","buttonStyle0","buttonStyle1","buttonStyle2","buttonStyle3","buttonStyle4","buttonStyle5","buttonStyle6","buttonStyle7","buttonStyle8","buttonStyle9","style","console","log","onSubmit","event","preventDefault","productForm","FormData","append","result","discountedPrice","Math","round","Number","EPSILON","discountToInt","editedProduct","expired","currentTime","formattedDate","setHours","setMinutes","setSeconds","imageId","newImage","e","target","readOnly","files","today","toISOString","dateNow","UNIXdate","getDate","plusDay","amount","setAmount","showLoader","setShowLoader","showForm","setShowForm","currentDate","loaderShow","formShow","Loader","active","size","newProduct","addedImg","imgId","UNIXtomorrow","tomorrow","credentials","email","setEmail","setAddress","setZip","setCity","setPhone","latitude","setLatitude","longitude","setLongitude","setWebsite","showRemoveQuery","setShowRemoveQuery","showRemovePassword","setShowRemovePassword","passwordReveal","setPasswordReveal","showButtons","setShowButtons","showMap","setShowMap","width","height","zoom","view","setView","buttonsShow","mapShow","removeShow","removePasswordShow","passwordType","password","shopProducts","loginService","editedShop","newShopLogin","parse","htmlFor","required","encodedAddress","encodeURI","process","features","relevance","center","mapboxApiAccessToken","onViewportChange","mapStyle","edit","buyer","buyers","setBuyers","buyerService","allBuyers","getData","ids","firstName","lastName","paymentID","timeOfPurchase","showExpiration","setShowExpiration","showEditExpiration","setShowEditExpiration","showEditButtons","setShowEditButtons","expirationShow","editExpirationShow","editButtonsShow","visibility","handleDateEdit","alert","confirm","selectedProducts","setSelectedProducts","showAdd","setShowAdd","showManage","setShowManage","showBought","setShowBought","showExpired","setShowExpired","allProductsLabel","addShow","manageShow","boughtShow","expiredShow","handleAddShow","productIds","filteredProducts","Message","success","header","error","setPassword","passwordAgain","setPasswordAgain","showIntroduction","setShowIntroduction","showAddress","setShowAddress","showAddressBtn","setShowAddressBtn","showLoginDetails","setShowLoginDetails","showLoginBtn","setShowLoginBtn","showShopDetails","setShowShopDetails","showDetailsBtn","setShowDetailsBtn","showRegisterBtn","setShowRegisterBtn","showSuccess","setShowSuccess","showOverview","setShowOverview","showProgress","setShowProgress","addressShow","addressBtnShow","loginDetails","loginDetailsBtnShow","shopDetailsShow","detailsBtnShow","registerBtnShow","successShow","introductionShow","overviewShow","progressShow","firstProgress","secondProgress","thirdProgress","fourthProgress","newShop","n","toLowerCase","lowerCaseName","includes","Icon","totalPrice","reduce","savedPrice","paymentReducer","compose","withRouter","addProductToPayment","emptyPayment","onSuccess","payment","newBuyer","payerID","payer","payer_id","history","push","onCancel","onError","err","clientId","currency","setBuyer","showPayPal","setShowPayPal","show","totalPriceRounded","persist","databaseProductsInCart","allProducts","j","alreadySold","buyerFirstName","buyerLastName","buyerEmail","buyerAddress","buyerPostcode","buyerPhone","buyerCity","mapDistatchToProps","sideHeader","setSideHeader","showBack","setShowBack","showShop","setShowShop","showList","setShowList","showEmpty","setShowEmpty","clickedShop","setClickedShop","shopsWithProducts","shopsWithoutProducts","showShopProducts","backShow","shopShow","listShow","emptyShow","PartnerInfo","info1","revenue","happy","earth","work1","work2","work3","CustomerInfo","info2","initializeShop","loggedInShop","getItem","availableProducts","dates","checkExpirationDates","exact","path","render","reducers","combineReducers","productsReducer","store","createStore","applyMiddleware","thunk","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a7032a92.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/background.2385d97e.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/info1.ebd76ad0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/revenue.50c53316.svg\";","module.exports = __webpack_public_path__ + \"static/media/happy.ad2afc43.svg\";","module.exports = __webpack_public_path__ + \"static/media/earth.6bcfa3a5.svg\";","module.exports = __webpack_public_path__ + \"static/media/info2.a6baadb6.jpg\";","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { Navbar, Nav } from 'react-bootstrap'\r\n\r\nconst NavbarComponent = (props) => {\r\n    const [expanded, setExpanded] = useState(false)\r\n\r\n    return (\r\n        <Navbar expanded={expanded} fixed='top' expand='lg' collapseOnSelect>\r\n            <Navbar.Brand>\r\n                <Link onClick={() => setExpanded(false)} to='/' className='nav-link home-link'><h2 className='nav-link-header'>Shelp</h2></Link>\r\n            </Navbar.Brand>\r\n            <Navbar.Toggle aria-controls='basic-navbar-nav' onClick={() => setExpanded(expanded ? false : 'expanded')} />\r\n            <Navbar.Collapse id='basic-navbar-nav'>\r\n                <Nav className='nav-links-container'>\r\n                    <Nav className='nav-links-one'>\r\n                        <Nav><Link onClick={() => setExpanded(false)} to='/login' className='shop-login link-nav'>Shop Login</Link></Nav>\r\n                    </Nav>\r\n                    <Nav className='nav-links-two'>\r\n                        <Nav><Link onClick={() => setExpanded(false)} className='nav-link-two link-nav' to='/products'>All Products</Link></Nav>\r\n                        <Nav><Link onClick={() => setExpanded(false)} className='nav-link-two link-nav' to='/Map'>See Map</Link></Nav>\r\n                        <Nav><Link onClick={() => setExpanded(false)} className='nav-link-two link-nav' to='/cart'><span><i className='fas fa-shopping-cart' /></span><b>{`Cart (${props.cart.length})`}</b></Link></Nav>\r\n                    </Nav>\r\n                </Nav>\r\n            </Navbar.Collapse>\r\n        </Navbar>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        cart: state.cart\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps\r\n)(NavbarComponent)","const cartReducer = (state = [], action) => {\r\n    switch(action.type) {\r\n        case 'ADD':\r\n            return [...state, action.data]\r\n        case 'REMOVE':\r\n            return state.filter(p => p.id !== action.data)\r\n        case 'EMPTY_CART':\r\n            return action.data\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const addToCart = (product) => {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: 'ADD',\r\n            data: product\r\n        })\r\n    }\r\n}\r\n\r\nexport const removeFromCart = (id) => {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: 'REMOVE',\r\n            data: id\r\n        })\r\n    }\r\n}\r\n\r\nexport const emptyCart = () => {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: 'EMPTY_CART',\r\n            data: []\r\n        })\r\n    }\r\n}\r\n\r\nexport default cartReducer","import React from 'react'\r\n\r\nconst Modal = (props) => {\r\n    return (\r\n        <div className='modal-container'>\r\n            <div className='img-modal-container' onClick={props.modalSwitch}>\r\n                <img className='modal-img' src={props.img} alt='big product' onClick={props.modalSwitch}/>\r\n                <button className='ui button modal-close-button' onClick={props.modalSwitch}>Close</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Modal","export const formatDate = (date) => {\r\n    let modifyDate = date.slice(5,10).split('-').reverse()\r\n    modifyDate.splice(1,0,'.')\r\n    modifyDate.splice(3,0,'.')\r\n    return modifyDate.join('').concat(date.slice(0,4))\r\n}","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { addToCart } from '../reducers/cartReducer'\r\nimport Modal from './Modal'\r\nimport { formatDate } from '../services/shared'\r\n\r\nconst SingleProduct = (props) => {\r\n    //console.log(props)\r\n    const [modalOpen, setModalOpen] = useState(false)\r\n\r\n    const checkIfInCart = (product) => {\r\n        return props.cart.find(p => p.id === product.id)\r\n    }\r\n\r\n    const modalSwitch = () => {\r\n        if (modalOpen) {\r\n            setModalOpen(false)\r\n        } else {\r\n            setModalOpen(true)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {modalOpen && <Modal img={props.product.img.location} modalSwitch={modalSwitch}/>}\r\n            <div className='row product-container'>\r\n                <div className='col-md-2'>\r\n                    <div className='img-container'>\r\n                        <img className='single-product-img' onClick={modalSwitch} src={props.product.img.location} alt='product' data-testid='img' />\r\n                    </div>\r\n                </div>\r\n                <div className='col-md-6 product-shop-desc'>\r\n                    <div className='product-header-date'>\r\n                        <h3 data-testid='desc'>{props.product.description}</h3> <h6>Expiration date: <span data-testid='expiration' className='expiration-date'><b>{formatDate(props.product.date)}</b></span></h6>\r\n                    </div> <hr />\r\n                    <div className='product-shop-small-screen-container'>\r\n                        <div className='product-shop-desc-texts'>\r\n                            <p className='product-shop-desc-text' data-testid='shopname'><i className='fas fa-store'/> <b>{props.product.shop.name}</b></p>\r\n                            <p className='product-shop-desc-text' data-testid='shopaddress'><i className='fas fa-map-marker-alt' /> {props.product.shop.address}, {props.product.shop.zip} {props.product.shop.city}</p>\r\n                            <p className='product-shop-desc-text' data-testid='shopphone'><i className='fas fa-phone' /> {props.product.shop.phone} {props.product.shop.website !== '' && <span><i className='fas fa-globe' /> {props.product.shop.website}</span>}</p>\r\n                        </div>\r\n                        <div className='img-container-small-screen'>\r\n                            <img className='single-product-img' onClick={modalSwitch} src={props.product.img.location} alt='product' />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='col-md-2'>\r\n                    <div className='price-container'>\r\n                        <div className='prices'>\r\n                            <h3 data-testid='price'>{props.product.price}€</h3>\r\n                            <h6 className='original-price' data-testid='originalprice'>{props.product.originalPrice}€</h6>\r\n                        </div>\r\n                        <h5 className='discount' data-testid='discount'>-{props.product.discount}%</h5>\r\n                    </div>\r\n                </div>\r\n                <div className='col-md-2 cart-button-container'>\r\n                    <button\r\n                        className='ui button cart-button'\r\n                        data-testid='cartbutton'\r\n                        disabled={checkIfInCart(props.product)}\r\n                        onClick={() => props.addToCart(props.product)}>\r\n                            {checkIfInCart(props.product) ? <p>In cart</p> : <p>Add to Cart</p>}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        cart: state.cart\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { addToCart })(SingleProduct)","import React from 'react'\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <footer className='page-footer font-small footer'>\r\n            <hr className='footer-hr' />\r\n            <div className='footer-copyright'>© Shelp 2020</div>\r\n            <div className='footer-contact row'>\r\n                <div className='footer-email col-md-6 col-sm-6'>\r\n                    <i className='fas fa-at footer-icon' />\r\n                    <p> support@shelp.fi</p>\r\n                </div>\r\n                <div className='footer-phone col-md-6 col-sm-6'>\r\n                    <i className='fas fa-phone-square footer-icon' />\r\n                    <p> 050-12345678</p>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport SingleProduct from './SingleProduct'\r\nimport homeImg from '../images/background.jpeg'\r\nimport Footer from './Footer'\r\n\r\nconst Home = (props) => {\r\n    //console.log(props)\r\n    const [noProducts, setNoProducts] = useState(false)\r\n\r\n    useEffect(() => {\r\n        props.products.length === 0 ? setNoProducts(true) : setNoProducts(false)\r\n    }, [props.products])\r\n\r\n    // näyttää viisi tuotetta joiden expiration date kauimpana umpeutumisesta\r\n    const productDatesAndId = props.products\r\n        .filter(p => p.availability === true)\r\n        .map(p => { return {date: new Date(p.date), id: p.id} })\r\n        .sort((a,b) => b.date - a.date)\r\n        .slice(0,5)\r\n\r\n    let freshProducts = []\r\n    for (let i = 0; i < productDatesAndId.length; i++) {\r\n        freshProducts = freshProducts.concat(props.products.filter(p => p.id === productDatesAndId[i].id))\r\n    }\r\n\r\n    return (\r\n        <div className='main container-fluid home-container'>\r\n            <div className='home-header-image-container'>\r\n                <div className='home-image-container'>\r\n                    <img src={homeImg} alt='background' data-testid='background-img'/>\r\n                </div>\r\n                <div className='introduction'>\r\n                    <div data-testid='introduction-texts'>\r\n                        <h1 className='introduction-header'>Welcome to Shelp!</h1>\r\n                        <p className='introduction-text'>\r\n                            Every month, people like you use Shelp to save \r\n                            tens of thousands of food products from ending up \r\n                            in the trash bin. Buy cheaper and better,\r\n                            saving the world has never tasted this good!\r\n                        </p>\r\n                    </div>\r\n                    <div className='home-buttons' data-testid='homebuttons'>\r\n                        <div className='button-text'>\r\n                            <Link to='/customerinfo'>\r\n                                <button className='ui button'>Order</button>\r\n                            </Link>\r\n                            <p>\r\n                                <b>Ordering</b> with Shelp saves you\r\n                                hundreds of euros every year.\r\n                            </p>\r\n                        </div>\r\n                        <div className='button-text'>\r\n                            <Link to='/partnerinfo'>\r\n                                <button className='ui button'>Sell</button>\r\n                            </Link>\r\n                            <p>\r\n                                <b>Selling</b> with Shelp increases your\r\n                                revenue by 2-6%.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='container home-intro-container'>\r\n                <div className='home-intro'>\r\n                    <h3><b>Save as much as you can eat</b></h3>\r\n                    <p>\r\n                        For consumers, using Shelp means discovering\r\n                        new products that grocery stores offer at \r\n                        around 50% discount and creating a more \r\n                        sustainable environment while at it.\r\n                    </p> <hr />\r\n                    {/* Näyttää myynnissä olevat tuotteet */}\r\n                    {!noProducts &&\r\n                        <div>\r\n                            <h2><b>Our freshest offers!</b></h2>\r\n                            <div data-testid='home-products'>\r\n                                {freshProducts\r\n                                    .map(p => <SingleProduct key={p.id} product={p}/>\r\n                                )}\r\n                            </div>\r\n                            <p><strong>To discover more, see \r\n                                <span>\r\n                                    <Link to='/products' className='home-span-link'> \"All Products\"</Link>\r\n                                </span>\r\n                            </strong></p>\r\n                        </div>\r\n                    }\r\n                    {/* Näkymä jos ei tuotteita myynnissä */}\r\n                    {noProducts &&\r\n                        <div data-testid='home-no-products'>\r\n                            <h4><b>There are currently no products on sale, please check again later</b></h4>\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <Footer />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        products: state.products\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n)(Home)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Select from 'react-select'\r\nimport SingleProduct from './SingleProduct'\r\nimport Footer from './Footer'\r\n\r\nconst Products = (props) => {\r\n    //console.log(props)\r\n    const [selectedShops, setSelectedShops] = useState([])\r\n    //console.log(selectedShop)\r\n    if (selectedShops === null) {\r\n        setSelectedShops([])\r\n        return null\r\n    }\r\n\r\n    if (props.products.length === 0) {\r\n        return (\r\n            <div className='container main'>\r\n                <div className='products-header'>\r\n                    <h2>Products on sale:</h2>\r\n                </div> <hr />\r\n                <div className='no-products-onsale'>\r\n                    <h3><b>There are currently no products on sale, please check again later</b></h3>\r\n                </div>\r\n                <Footer />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // asettaa kauppojen nimet Select -valikon vaihtoehdoiksi\r\n    let allShops = []\r\n    allShops = props.shops.map(s => { return { value: s.name, label: s.name } })\r\n\r\n    if (selectedShops.length === 0) {        \r\n        return (\r\n            <div className='container main'>\r\n                <div className='products-header'>\r\n                    <h2>Products on sale:</h2>\r\n                </div> <hr />\r\n                <div>\r\n                    <p>Search shop:</p>\r\n                    <Select \r\n                        options={allShops}\r\n                        placeholder='Select shop(s)'\r\n                        onChange={setSelectedShops}\r\n                        isMulti\r\n                        isSearchable                    \r\n                    />\r\n                </div>\r\n                <div data-testid='products'>\r\n                    {props.products\r\n                        .filter(p => p.availability === true)\r\n                        .map(p => <SingleProduct key={p.id} product={p}/>\r\n                    )}\r\n                </div>\r\n                <Footer />\r\n            </div>\r\n        )\r\n    } else {\r\n\r\n        let filteredShops = []\r\n        let shopNames = selectedShops.map(s => s.label)\r\n\r\n        return (\r\n            <div className='container main'>\r\n                <div className='products-header'>\r\n                    <h2>Products on sale:</h2>\r\n                </div> <hr />\r\n                <div>\r\n                    <p>Search shop:</p>\r\n                    <Select \r\n                        options={allShops}\r\n                        placeholder='Select shop(s)'\r\n                        onChange={setSelectedShops}\r\n                        isMulti\r\n                        isSearchable                    \r\n                    />\r\n                </div>\r\n                <div>\r\n                    {shopNames.forEach(v => {\r\n                            filteredShops = filteredShops.concat(props.products.filter(p => p.shop.name === v))\r\n                            //console.log('filtered', filteredShops)\r\n                        }                            \r\n                    )}\r\n                    {filteredShops\r\n                        .filter(p => p.availability === true)\r\n                        .map(p => <SingleProduct key={p.id} product={p}/>\r\n                    )}\r\n                </div>\r\n                {filteredShops.length === 0 &&\r\n                    <div className='no-shop-results'>\r\n                        <h1>No search results...</h1>\r\n                        <h6>Try with different shop(s)</h6>\r\n                    </div>\r\n                }\r\n                <Footer />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        products: state.products,\r\n        shops: state.shops\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps\r\n)(Products)","import axios from 'axios'\r\n\r\nconst url = '/api/products'\r\n\r\nlet token = null\r\n\r\nconst setToken = (newToken) => {\r\n    token = `bearer ${newToken}`\r\n}\r\n\r\nconst destroyToken = () => {\r\n    token = null\r\n}\r\n\r\nconst getAllProducts = async () => {\r\n    const response = await axios.get(url)\r\n    return response.data\r\n}\r\n\r\nconst addNewProduct = async (product) => {\r\n    const config = {\r\n        headers: { Authorization: token }\r\n    }\r\n    const response = await axios.post(url, product, config)\r\n    return response.data\r\n}\r\n\r\nconst updateProduct = async (id, product) => {\r\n    const config = {\r\n        headers: { Authorization: token }\r\n    }\r\n    const response = await axios.put(`${url}/${id}`, product, config)\r\n    return response.data\r\n}\r\n\r\nconst removeProduct = async (id) => {\r\n    const config = {\r\n        headers: { Authorization: token }\r\n    }\r\n    const response = await axios.delete(`${url}/${id}`, config)\r\n    return response.data\r\n}\r\n\r\nconst productAvailabilityToFalse = async (id, product) => {\r\n    const productToFalse = { ...product, availability: false }\r\n    const response = await axios.put(`${url}/availability/${id}`, productToFalse)\r\n    return response.data\r\n}\r\n\r\nconst productExpired = async (id) => {\r\n    // const expiredToTrue = { ...product, expired: true }\r\n    const response = await axios.put(`${url}/expired/${id}`)\r\n    return response.data\r\n}\r\n\r\nconst uploadImg = async (img) => {\r\n    const response = await axios.post(`${url}/image`, img)\r\n    return response.data\r\n}\r\n\r\nconst removeImg = async (id) => {\r\n    const response = await axios.delete(`${url}/images/${id}`)\r\n    return response.data\r\n}\r\n\r\nexport default { setToken, destroyToken, getAllProducts, addNewProduct, updateProduct, removeProduct, productAvailabilityToFalse, productExpired, uploadImg, removeImg }","import axios from 'axios'\r\n\r\nconst url = '/api/shops'\r\n\r\nlet token = null\r\n\r\nconst setToken = (newToken) => {\r\n    token = `bearer ${newToken}`\r\n}\r\n\r\nconst destroyToken = () => {\r\n    token = null\r\n}\r\n\r\nconst getAllShops = async () => {\r\n    const response = await axios.get(url)\r\n    return response.data\r\n}\r\n\r\nconst addNewShop = async (shop) => {\r\n    const response = await axios.post(url, shop)\r\n    return response.data\r\n}\r\n\r\nconst editShop = async (shop) => {\r\n    const config = {\r\n        headers: { Authorization: token }\r\n    }\r\n    const response = await axios.put(`${url}/${shop.id}`, shop, config)\r\n    return response.data\r\n}\r\n\r\nconst removeShop = async (id) => {\r\n    const config = {\r\n        headers: { Authorization: token }\r\n    }\r\n    const response = await axios.delete(`${url}/${id}`, config)\r\n    return response.data\r\n}\r\n\r\nexport default { setToken, destroyToken, getAllShops, addNewShop, editShop, removeShop }","const shopLoginReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case 'LOGIN_SHOP':\r\n            return action.data\r\n        case 'LOGOUT_SHOP':\r\n            return null\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const loginShop = (shop) => {\r\n    return async dispatch => {\r\n        window.localStorage.setItem('loggedInShop', JSON.stringify(shop))\r\n        dispatch({\r\n            type: 'LOGIN_SHOP',\r\n            data: shop\r\n        })\r\n    }\r\n}\r\n\r\nexport const logoutShop = () => {\r\n    return async dispatch => {\r\n        window.localStorage.removeItem('loggedInShop')\r\n        dispatch({\r\n            type: 'LOGOUT_SHOP'\r\n        })\r\n    }\r\n}\r\n\r\nexport const initializeShop = () => {\r\n    return async dispatch => {\r\n        const loggedInShop = window.localStorage.getItem('loggedInShop')\r\n        if (loggedInShop) {\r\n            const shop = JSON.parse(loggedInShop)\r\n            dispatch({\r\n                type: 'LOGIN_SHOP',\r\n                data: shop\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport default shopLoginReducer","const alertReducer = (state = '', action) => {\r\n    switch(action.type) {\r\n        case 'NEW_ALERT':\r\n            return action.data\r\n        case 'HIDE_ALERT':\r\n            return state = ''\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const setAlert = (content, duration) => {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: 'NEW_ALERT',\r\n            data: content\r\n        })\r\n        setTimeout(() => {\r\n            dispatch({\r\n                type: 'HIDE_ALERT'\r\n            })\r\n        }, duration * 1000)\r\n    }\r\n}\r\n\r\nexport default alertReducer","const confirmReducer = (state = '', action) => {\r\n    switch(action.type) {\r\n        case 'NEW_CONFIRM':\r\n            return action.data\r\n        case 'HIDE_CONFIRM':\r\n            return state = ''\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const setConfirm = (content, duration) => {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: 'NEW_CONFIRM',\r\n            data: content\r\n        })\r\n        setTimeout(() => {\r\n            dispatch({\r\n                type: 'HIDE_CONFIRM'\r\n            })\r\n        }, duration * 1000)\r\n    }\r\n}\r\n\r\nexport default confirmReducer","import productsService from '../services/productsService'\r\n\r\nconst productReducer = (state = [], action) => {\r\n    switch(action.type) {\r\n        case 'INIT_PRODUCTS':\r\n            return action.data\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const initializeProducts = () => {\r\n    return async dispatch => {\r\n        const products = await productsService.getAllProducts()\r\n        dispatch({\r\n            type: 'INIT_PRODUCTS',\r\n            data: products\r\n        })\r\n    }\r\n}\r\n\r\nexport default productReducer","import shopsService from '../services/shopsService'\r\n\r\nconst shopsReducer = (state = [], action) => {\r\n    switch(action.type) {\r\n        case 'INIT_SHOPS':\r\n            return action.data\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const initializeShops = () => {\r\n    return async dispatch => {\r\n        const shops = await shopsService.getAllShops()\r\n        dispatch({\r\n            type: 'INIT_SHOPS',\r\n            data: shops\r\n        })\r\n    }\r\n}\r\n\r\nexport default shopsReducer","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { setAlert } from '../../reducers/alertReducer'\r\nimport { setConfirm } from '../../reducers/confirmReducer'\r\nimport { initializeProducts } from '../../reducers/productsReducer'\r\nimport { initializeShops } from '../../reducers/shopsReducer'\r\nimport productsService from '../../services/productsService'\r\nimport { formatDate } from '../../services/shared'\r\n\r\nconst ShopProduct = (props) => {\r\n    //console.log(props)\r\n    const [name, setName] = useState('')\r\n    const [price, setPrice] = useState(1)\r\n    const [discount, setDiscount] = useState(0)\r\n    const [date, setDate] = useState('')\r\n    const [uploadedImage, setUploadedImage] = useState(null)\r\n    const [currentProduct, setCurrentProduct] = useState(null)\r\n\r\n    const [showProducts, setShowProducts] = useState(true)\r\n    const [showEdit, setShowEdit] = useState(false)\r\n\r\n    const productsShow = { display: showProducts ? '' : 'none' }\r\n    const editShow = { display: showEdit ? '' : 'none' }\r\n\r\n    const close = () => {\r\n        setShowEdit(false)\r\n        setShowProducts(true)\r\n    }\r\n\r\n    const edit = (product) => {\r\n        setShowProducts(false)\r\n        setShowEdit(true)\r\n        setName(product.description)\r\n        setPrice(product.originalPrice)\r\n        setDiscount(product.discount / 100)\r\n        setDate(product.date)\r\n        setCurrentProduct(product)\r\n    }\r\n\r\n    const editUploadHandler = (event) => { setUploadedImage(event.target.files[0]) }\r\n\r\n    const handleProductEdit = async (event) => {\r\n        event.preventDefault()\r\n\r\n        const productForm = new FormData()\r\n        productForm.append('img', uploadedImage)\r\n\r\n        //laskee alennus-%\r\n        const result = price * (1 - discount)\r\n        let discountedPrice = Math.round((result + Number.EPSILON) * 100) / 100\r\n        let discountToInt = discount * 100\r\n\r\n        if (discount === 0) { \r\n            discountedPrice = price\r\n            discountToInt = 0\r\n        }\r\n\r\n        const editedProduct = {\r\n            description: name,\r\n            price: discountedPrice,\r\n            discount: discountToInt,\r\n            originalPrice: price,\r\n            date: date,\r\n            availability: true,\r\n            expired: false,\r\n            shop: props.shopLogin.id\r\n        }\r\n\r\n        if (name === '') {\r\n            props.setAlert('Product needs a name or a short description', 5)\r\n            return\r\n        }\r\n\r\n        // tarkistaa että tuotteen pvm vähintään nykyinen pvm\r\n        let currentTime = new Date()\r\n        let formattedDate = new Date(date)\r\n        formattedDate.setHours(23)\r\n        formattedDate.setMinutes(59)\r\n        formattedDate.setSeconds(59)\r\n        if (currentTime > formattedDate) {\r\n            props.setAlert('Expiration date must be at least current date', 5)\r\n            return\r\n        }\r\n\r\n        productsService.setToken(props.shopLogin.token)\r\n        let imageId = currentProduct.img.id\r\n\r\n        try {\r\n            if (uploadedImage !== null) {\r\n                await productsService.removeImg(currentProduct.img.id)\r\n                const newImage = await productsService.uploadImg(productForm)\r\n                imageId = newImage.id\r\n            }\r\n            editedProduct.img = imageId\r\n            await productsService.updateProduct(currentProduct.id, editedProduct)\r\n            props.initializeProducts()\r\n            props.initializeShops()\r\n            props.setConfirm('Product edited successfully!', 5)\r\n            setShowProducts(true)\r\n            setShowEdit(false)\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Could not edit product, please try again', 5)\r\n        }\r\n    }\r\n\r\n    const remove = async (product) => {\r\n        //console.log(product)\r\n        productsService.setToken(props.shopLogin.token)\r\n        try {\r\n            await productsService.removeProduct(product.id)\r\n            await productsService.removeImg(product.img.id)\r\n            props.setConfirm('Product was removed!', 5)\r\n            props.initializeProducts()\r\n            props.initializeShops()\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Product was not removed, please try again', 5)\r\n        }\r\n    }\r\n\r\n    const handleToday = () => {\r\n        let currentTime = new Date()\r\n        let today = currentTime.toISOString().slice(0,10)\r\n        setDate(today)\r\n    }\r\n\r\n    const handleOneDay = () => {\r\n        let dateNow = new Date(date)\r\n        let UNIXdate = dateNow.setDate(dateNow.getDate() +1)\r\n        let plusDay = new Date(UNIXdate).toISOString().slice(0,10)\r\n        setDate(plusDay)\r\n    }\r\n\r\n    const buttonStyle0 = discount === 0 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle1 = discount === 0.1 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle2 = discount === 0.2 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle3 = discount === 0.3 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle4 = discount === 0.4 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle5 = discount === 0.5 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle6 = discount === 0.6 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle7 = discount === 0.7 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle8 = discount === 0.8 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle9 = discount === 0.9 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n\r\n    return (\r\n        <div>\r\n            <div style={productsShow} className='row product-container'>\r\n                <div className='col-md-2'>\r\n                    <div className='img-container'>\r\n                        <img src={props.product.img.location} alt='product' />\r\n                    </div>\r\n                </div>\r\n                <div className='col-md-6 col-sm-12'>\r\n                    <h4>{props.product.description}</h4><hr className='divider' />\r\n                    <h6>Expiration date: <b>{formatDate(props.product.date)}</b></h6>\r\n                </div>\r\n                <div className='img-container-small-screen'>\r\n                    <img src={props.product.img.location} alt='product' />\r\n                </div>\r\n                <div className='col-md-2 col-sm-12 price-container-shop'>\r\n                    <div className='price-container shop-prices'>\r\n                        <div className='prices'>\r\n                            <h4>{props.product.price} €</h4>\r\n                            <h6 className='original-price'>{props.product.originalPrice} €</h6>\r\n                        </div>\r\n                        <h5 className='discount'>-{props.product.discount}%</h5>\r\n                    </div>\r\n                </div>\r\n                <div className='col-md-2 col-sm-12'>\r\n                    <div className='shop-product-buttons'>\r\n                        <button className='btn btn-info edit-button' onClick={() => edit(props.product)} data-testid='shop-product-edit'>Edit</button>\r\n                        <button className='btn btn-danger' onClick={() => remove(props.product)} data-testid='shop-product-remove'>Remove</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Edit Product */}\r\n            <div style={editShow}>\r\n                <form onSubmit={handleProductEdit}>\r\n                    <hr />\r\n                    <div className='form-group row product-edit-form'>\r\n                        <label className='col-lg-2 col-md-3 col-form-label'>Name/description:</label>\r\n                        <div className='col-lg-5 col-md-9'>\r\n                            <input data-testid='name' type='text' className='form-control' value={name} onChange={e => setName(e.target.value)} />\r\n                        </div>\r\n                    </div>\r\n                    <div className='form-group row product-edit-form'>\r\n                        <label className='col-lg-2 col-md-3 col-form-label'>Original price:</label>\r\n                        <div className='col-lg-5 col-md-9'>\r\n                            <input data-testid='originalPrice' type='number' className='form-control' value={price} onChange={e => setPrice(e.target.value)} />\r\n                        </div>\r\n                    </div>\r\n                    <div className='form-group row product-edit-form'>\r\n                        <label className='col-lg-2 col-md-3 col-form-label'>Discount %:</label>\r\n                        <div className='col-lg-5 col-md-9'>\r\n                            <div className='discount-buttons'>\r\n                                <div onClick={() => setDiscount(0)} className={buttonStyle0}>0 %</div>\r\n                                <div onClick={() => setDiscount(0.1)} className={buttonStyle1}>10 %</div>\r\n                                <div onClick={() => setDiscount(0.2)} className={buttonStyle2}>20 %</div>\r\n                                <div onClick={() => setDiscount(0.3)} className={buttonStyle3}>30 %</div>\r\n                                <div onClick={() => setDiscount(0.4)} className={buttonStyle4}>40 %</div>\r\n                                <div onClick={() => setDiscount(0.5)} className={buttonStyle5}>50 %</div>\r\n                                <div onClick={() => setDiscount(0.6)} className={buttonStyle6}>60 %</div>\r\n                                <div onClick={() => setDiscount(0.7)} className={buttonStyle7}>70 %</div>\r\n                                <div onClick={() => setDiscount(0.8)} className={buttonStyle8}>80 %</div>\r\n                                <div onClick={() => setDiscount(0.9)} className={buttonStyle9}>90 %</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='form-group row product-edit-form'>\r\n                        <label className='col-lg-2 col-md-3 col-form-label'>Discounted price:</label>\r\n                        <div className='col-lg-2 col-md-9'>\r\n                            <input type='number' className='form-control-plaintext discounted-price' value={props.product.price} readOnly />\r\n                        </div>\r\n                    </div>\r\n                    <div className='form-group row product-edit-form'>\r\n                        <label className='col-lg-2 col-md-3 col-form-label'>Select image:</label>\r\n                        <div className='col-md-3'>\r\n                            <input data-testid='file' type='file' onChange={editUploadHandler} />\r\n                        </div>\r\n                    </div>\r\n                    <div className='form-group row'>\r\n                        <label className='col-lg-2 col-md-3 col-form-label'>Expiration date:</label>\r\n                        <div className='col-lg-3 col-md-4'>\r\n                            <input data-testid='date' type='date' className='form-control' value={date} onChange={e => setDate(e.target.value)} />\r\n                        </div>\r\n                        <div className='col-md-4'>\r\n                            <div onClick={handleToday} className='ui basic teal button' data-testid='product-today'>Today</div>\r\n                            <div onClick={handleOneDay} className='ui basic teal button' data-testid='product-1Day'>+1 Day</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='edit-product-buttons'>\r\n                        <div className='ui basic red button' onClick={close} data-testid='shop-product-cancel'>Cancel</div>\r\n                        <button className='ui button' type='submit' data-testid='shop-product-edit-product'>Edit Product</button>\r\n                    </div>\r\n                    <hr />\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        shopLogin: state.shopLogin\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setAlert,\r\n    setConfirm,\r\n    initializeProducts,\r\n    initializeShops\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShopProduct)","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Loader } from 'semantic-ui-react'\r\nimport { setAlert } from '../../reducers/alertReducer'\r\nimport { setConfirm } from '../../reducers/confirmReducer'\r\nimport { initializeProducts } from '../../reducers/productsReducer'\r\nimport { initializeShops } from '../../reducers/shopsReducer'\r\nimport productsService from '../../services/productsService'\r\n// import defaultImage from '../../images/defaultImage.jpg'\r\n\r\nconst ShopAddProduct = (props) => {\r\n    //console.log(props)\r\n    const [name, setName] = useState('')\r\n    const [price, setPrice] = useState(1)\r\n    const [discount, setDiscount] = useState(0)\r\n    const [amount, setAmount] = useState(1)\r\n    const [uploadedImage, setUploadedImage] = useState(null)\r\n    const [date, setDate] = useState('')\r\n    //console.log('uploadedimage', uploadedImage)\r\n    const [showLoader, setShowLoader] = useState(false)\r\n    const [showForm, setShowForm] = useState(true)\r\n\r\n    let currentTime = new Date()\r\n    let currentDate = currentTime.toISOString().slice(0,10)\r\n\r\n    useEffect(() => {\r\n        setDate(currentDate)\r\n    }, [currentDate])\r\n\r\n    const uploadHandler = (event) => { setUploadedImage(event.target.files[0]) }\r\n\r\n    const handleNewProduct = async (event) => {\r\n        event.preventDefault()\r\n\r\n        if (uploadedImage === null) {\r\n            props.setAlert('Please add an image to the product', 5)\r\n            return\r\n        }\r\n\r\n        const productForm = new FormData()\r\n        productForm.append('img', uploadedImage)\r\n\r\n        //laskee alennus-%\r\n        const result = price * (1 - discount)\r\n        let discountedPrice = Math.round((result + Number.EPSILON) * 100) / 100\r\n        let discountToInt = discount * 100\r\n\r\n        if (discount === 0) { \r\n            discountedPrice = price\r\n            discountToInt = 0\r\n        }\r\n\r\n        const newProduct = {\r\n            description: name,\r\n            price: discountedPrice,\r\n            discount: discountToInt,\r\n            originalPrice: price,\r\n            date: date,\r\n            availability: true,\r\n            expired: false,\r\n            shop: props.shopLogin.id\r\n        }\r\n\r\n        if (name === '') {\r\n            props.setAlert('Product needs a name or a short description', 5)\r\n            return\r\n        }\r\n\r\n        // tarkistaa että tuotteen pvm vähintään nykyinen pvm\r\n        let currentTime = new Date()\r\n        let formattedDate = new Date(date)\r\n        formattedDate.setHours(23)\r\n        formattedDate.setMinutes(59)\r\n        formattedDate.setSeconds(59)\r\n        if (currentTime > formattedDate) {\r\n            props.setAlert('Expiration date must be at least current date', 5)\r\n            return\r\n        }\r\n\r\n        let imageId = ''\r\n        productsService.setToken(props.shopLogin.token)\r\n\r\n        try {\r\n            setShowForm(false)\r\n            setShowLoader(true)\r\n            for (let i = 0; i < amount; i++) {\r\n                let addedImg = await productsService.uploadImg(productForm)\r\n                //console.log('addedImg', addedImg)\r\n                imageId = addedImg.id\r\n                newProduct.imgId = addedImg.id\r\n                await productsService.addNewProduct(newProduct)\r\n            }\r\n            setName('')\r\n            setPrice(1)\r\n            setDiscount(0)\r\n            setAmount(1)\r\n            setDate(currentDate)\r\n            setShowLoader(false)\r\n            setShowForm(true)\r\n            props.initializeProducts()\r\n            props.initializeShops()\r\n            props.setConfirm(`Product(s) added successfully!`, 5)            \r\n        } catch (error) {\r\n            setShowLoader(false)\r\n            setShowForm(true)\r\n            console.log('error', error)\r\n            props.setAlert('Product wasn\\'t added, please try again', 5)\r\n            await productsService.removeImg(imageId)\r\n        }\r\n    }\r\n\r\n    const buttonStyle0 = discount === 0 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle1 = discount === 0.1 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle2 = discount === 0.2 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle3 = discount === 0.3 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle4 = discount === 0.4 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle5 = discount === 0.5 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle6 = discount === 0.6 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle7 = discount === 0.7 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle8 = discount === 0.8 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n    const buttonStyle9 = discount === 0.9 ? 'ui button selected-btn' : 'ui basic teal button not-selected-btn'\r\n\r\n    const loaderShow = { display: showLoader ? '' : 'none' }\r\n    const formShow = { display: showForm ? '' : 'none' }\r\n\r\n    const handleDateTomorrow = () => {\r\n        let today = new Date()\r\n        let UNIXtomorrow = today.setDate(today.getDate() +1)\r\n        let tomorrow = new Date(UNIXtomorrow).toISOString().slice(0,10)\r\n        setDate(tomorrow)\r\n    }\r\n\r\n    const handleOneDay = () => {\r\n        let dateNow = new Date(date)\r\n        let UNIXdate = dateNow.setDate(dateNow.getDate() +1)\r\n        let plusDay = new Date(UNIXdate).toISOString().slice(0,10)\r\n        setDate(plusDay)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className='loader' style={loaderShow}>\r\n                <Loader active size='big' content='Please wait' />\r\n            </div>\r\n            <form onSubmit={handleNewProduct} style={formShow}>\r\n                <div className='form-group row product-edit-form'>\r\n                    <label className='col-lg-2 col-md-3 col-form-label'>Name/description:</label>\r\n                    <div className='col-lg-5 col-md-9'>\r\n                        <input type='text' className='form-control' id='desc' value={name} onChange={e => setName(e.target.value)} />\r\n                    </div>\r\n                </div>\r\n                <div className='form-group row product-edit-form'>\r\n                    <label className='col-lg-2 col-md-3 col-form-label'>Price:</label>\r\n                    <div className='col-lg-5 col-md-9'>\r\n                        <input type='number' className='form-control' id='price' value={price} onChange={e => setPrice(e.target.value)} />\r\n                    </div>\r\n                </div>\r\n                <div className='form-group row product-edit-form'>\r\n                    <label className='col-lg-2 col-md-3 col form-label'>Discount %:</label>\r\n                    <div className='col-lg-5 col-md-9'>\r\n                        <div className='discount-buttons'>\r\n                            <div onClick={() => setDiscount(0)} className={buttonStyle0}>0 %</div>\r\n                            <div onClick={() => setDiscount(0.1)} className={buttonStyle1}>10 %</div>\r\n                            <div onClick={() => setDiscount(0.2)} className={buttonStyle2}>20 %</div>\r\n                            <div onClick={() => setDiscount(0.3)} className={buttonStyle3}>30 %</div>\r\n                            <div onClick={() => setDiscount(0.4)} className={buttonStyle4}>40 %</div>\r\n                            <div onClick={() => setDiscount(0.5)} className={buttonStyle5}>50 %</div>\r\n                            <div onClick={() => setDiscount(0.6)} className={buttonStyle6}>60 %</div>\r\n                            <div onClick={() => setDiscount(0.7)} className={buttonStyle7}>70 %</div>\r\n                            <div onClick={() => setDiscount(0.8)} className={buttonStyle8}>80 %</div>\r\n                            <div onClick={() => setDiscount(0.9)} className={buttonStyle9}>90 %</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='form-group row product-edit-form'>\r\n                    <label className='col-lg-2 col-md-3 col-form-label'>Select image:</label>\r\n                    <div className='col-md-3'>\r\n                        <input type='file' id='add-img' onChange={uploadHandler} />\r\n                    </div>\r\n                </div>\r\n                <div className='form-group row product-edit-form'>\r\n                    <label className='col-lg-2 col-md-3 col-form-label'>How many?</label>\r\n                    <div className='col-lg-2 col-md-2'>\r\n                        <input type='number' className='form-control' id='amount' value={amount} onChange={e => setAmount(e.target.value)} />\r\n                    </div>\r\n                </div>\r\n                <div className='form-group row'>\r\n                    <label className='col-lg-2 col-md-3 col-form-label'>Expiration date:</label>\r\n                    <div className='col-lg-3 col-md-4'>\r\n                        <input type='date' className='form-control' id='date' value={date} onChange={e => setDate(e.target.value)} />\r\n                    </div>\r\n                    <div className='col-md-4'>\r\n                        <div onClick={handleDateTomorrow} className='ui basic teal button' data-testid='tomorrow'>Tomorrow</div>\r\n                        <div onClick={handleOneDay} className='ui basic teal button' data-testid='+1Day'>+1 Day</div>\r\n                    </div>\r\n                </div>\r\n                <div className='add-product-button'>\r\n                    <button className='ui button' type='submit' data-testid='upload'>Upload</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        shopLogin: state.shopLogin\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setAlert,\r\n    setConfirm,\r\n    initializeProducts,\r\n    initializeShops\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShopAddProduct)","import axios from 'axios'\r\n\r\nconst url = '/api/login'\r\n\r\nconst login = async (credentials) => {\r\n    const response = await axios.post(url, credentials)\r\n    return response.data\r\n}\r\n\r\nexport default { login }","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport shopsService from '../../services/shopsService'\r\nimport productsService from '../../services/productsService'\r\nimport loginService from '../../services/loginService'\r\nimport { setAlert } from '../../reducers/alertReducer'\r\nimport { setConfirm } from '../../reducers/confirmReducer'\r\nimport { initializeProducts } from '../../reducers/productsReducer'\r\nimport { initializeShops } from '../../reducers/shopsReducer'\r\nimport { logoutShop } from '../../reducers/shopLoginReducer'\r\nimport { loginShop } from '../../reducers/shopLoginReducer'\r\nimport ReactMapGL, { Marker } from 'react-map-gl'\r\n\r\nconst ShopManage = (props) => {\r\n    //console.log(props)    \r\n    const [name, setName] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [address, setAddress] = useState('')\r\n    const [zip, setZip] = useState('')\r\n    const [city, setCity] = useState('')\r\n    const [phone, setPhone] = useState('')\r\n    const [latitude, setLatitude] = useState('')\r\n    const [longitude, setLongitude] = useState('')\r\n    const [website, setWebsite] = useState('')\r\n\r\n    const [showRemoveQuery, setShowRemoveQuery] = useState(false)\r\n    const [showRemovePassword, setShowRemovePassword] = useState(false)\r\n    const [passwordReveal, setPasswordReveal] = useState(true)\r\n    const [showButtons, setShowButtons] = useState(true)\r\n    const [showEdit, setShowEdit] = useState(false)\r\n    const [showMap, setShowMap] = useState(false)\r\n    const [view, setView] = useState({\r\n        latitude: 60.169857,\r\n        longitude: 24.938379,\r\n        width: '20vw',\r\n        height: '38vh',\r\n        zoom: 15\r\n    })\r\n\r\n    useEffect(() => {\r\n        setView({\r\n            latitude: latitude,\r\n            longitude: longitude,\r\n            width: '20vw',\r\n            height: '38vh',\r\n            zoom: 15\r\n        })\r\n    }, [latitude, longitude])\r\n\r\n    const shop = props.shops.find(s => s.id === props.shopLogin.id)\r\n\r\n    const buttonsShow = { display: showButtons ? '' : 'none' }\r\n    const editShow = { display: showEdit ? '' : 'none' }\r\n    const mapShow = { display: showMap ? '' : 'none' }\r\n    const removeShow = { display: showRemoveQuery ? '' : 'none' }\r\n    const removePasswordShow = { display: showRemovePassword ? '' : 'none' }\r\n\r\n    const edit = (shop) => {\r\n        setShowEdit(true)\r\n        setShowButtons(false)\r\n        setName(shop.name)\r\n        setEmail(shop.email)\r\n        setAddress(shop.address)\r\n        setZip(shop.zip)\r\n        setCity(shop.city)\r\n        setPhone(shop.phone)\r\n        setWebsite(shop.website)\r\n        if (shop.latitude === null) {\r\n            setLatitude('')\r\n        } else { setLatitude(shop.latitude) }\r\n        if (shop.longitude === null) {\r\n            setLongitude('')\r\n        } else { setLongitude(shop.longitude) }\r\n    }\r\n\r\n    const close = () => {\r\n        setShowEdit(false)\r\n        setShowButtons(true)\r\n    }\r\n\r\n    const handleEdit = async (event) => {\r\n        event.preventDefault()\r\n        shopsService.setToken(props.shopLogin.token)\r\n\r\n        const editedShop = {\r\n            id: props.shopLogin.id,\r\n            name,\r\n            email,\r\n            address,\r\n            zip,\r\n            city,\r\n            phone,\r\n            latitude,\r\n            longitude,\r\n            website\r\n        }\r\n        const newShopLogin = JSON.parse(JSON.stringify(props.shopLogin))\r\n        newShopLogin.name = editedShop.name\r\n\r\n        try {\r\n            await shopsService.editShop(editedShop)\r\n            props.loginShop(newShopLogin)\r\n            props.initializeShops()\r\n            props.setConfirm('Shop details updated successfully!', 5)\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Shop details were not edited, please try again', 5)\r\n        }\r\n    }\r\n\r\n    const testRemove = () => {\r\n        setShowRemoveQuery(true)\r\n        setShowRemovePassword(false)\r\n    }\r\n\r\n    const removeCancel = () => {\r\n        setShowRemoveQuery(false)\r\n        setShowRemovePassword(false)\r\n    }\r\n\r\n    const removeHandle = () => {\r\n        setShowRemovePassword(true)\r\n    }\r\n\r\n    const remove = async (event) => {\r\n        event.preventDefault()\r\n\r\n        let name = props.shopLogin.name\r\n        let password = event.target.password.value\r\n\r\n        shopsService.setToken(props.shopLogin.token)\r\n        productsService.setToken(props.shopLogin.token)\r\n\r\n        const shopProducts = props.products.filter(p => p.shop.id === props.shopLogin.id)\r\n        try {\r\n            await loginService.login({ name, password })\r\n            for (let i = 0; i < shopProducts.length; i++) {\r\n                await productsService.removeProduct(shopProducts[i].id)\r\n                await productsService.removeImg(shopProducts[i].img.id)\r\n            }\r\n            await shopsService.removeShop(props.shopLogin.id)\r\n            props.initializeProducts()\r\n            props.initializeShops()\r\n            productsService.destroyToken()\r\n            shopsService.destroyToken()\r\n            props.logoutShop()\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Deletion was not successful, check your password and please try again', 5)\r\n        }\r\n    }\r\n\r\n    const getCoordinates = async () => {\r\n        setShowMap(false)\r\n        setLatitude('')\r\n        setLongitude('')\r\n        if (address === '' || zip === '' || city === '') {\r\n            props.setAlert('To get the coordinates, please type shop\\'s address, zip code and city', 5)\r\n            return\r\n        }\r\n        const encodedAddress = encodeURI(`${address}, ${zip}, ${city}, Finland`)\r\n        try {\r\n            const result = await axios.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodedAddress}.json?types=address&access_token=${process.env.REACT_APP_MAPBOX}`)\r\n            // tarkistaa että kyseinen osoite on olemassa, jos ei niin return\r\n            if (result.data.features[0].relevance !== 1) {\r\n                props.setAlert('Couldn\\'t get the coordinates, please check that given address is correct. If this doesn\\'t help, leave coordinate fields empty and contact us at support@shelp.fi', 10)\r\n                return\r\n            }\r\n            setLatitude(result.data.features[0].center[1])\r\n            setLongitude(result.data.features[0].center[0])\r\n            setShowMap(true)\r\n        } catch(error) {\r\n            console.log('error', error)\r\n            props.setAlert('Couldn\\'t get the coordinates, please check that given address is correct. If this doesn\\'t help, leave coordinate fields empty and contact us at support@shelp.fi', 10)\r\n        }\r\n    }\r\n\r\n    const clearCoordinates = () => {\r\n        setShowMap(false)\r\n        setLatitude('')\r\n        setLongitude('')\r\n    }\r\n\r\n    // näyttää salasanan\r\n    const passwordType = passwordReveal ? 'password' : 'text'\r\n    const handlePasswordReveal = () => {\r\n        if (passwordReveal) {\r\n            setPasswordReveal(false)\r\n        } else {\r\n            setPasswordReveal(true)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={removeShow} className='remove-shop-modal'>\r\n                <div className='remove-alert-text'>\r\n                    <p>ALERT! This will delete everything, including shop registration, there's no way back. Are you sure?</p>\r\n                </div>\r\n                <div className='remove-alert-buttons'>\r\n                    <button onClick={removeHandle} className='ui basic red button' data-testid='remove-yes'>Yes, I'm sure</button>\r\n                    <button onClick={removeCancel} className='ui basic teal button' data-testid='remove-no'>No, take me back</button>\r\n                </div>\r\n                <div style={removePasswordShow} className='remove-password-container'>\r\n                    <div className='remove-confirm-text'>\r\n                        <p>To confirm, please give your password:</p>\r\n                    </div>\r\n                    <form onSubmit={remove}>\r\n                        <div className='form-group'>\r\n                            <input name='password' type={passwordType} className='form-control' id='shopRemovePassword' placeholder='Password' />\r\n                        </div>\r\n                        <div className='show-password'>\r\n                            <input type='checkbox' onClick={handlePasswordReveal} />Show password\r\n                        </div>\r\n                        <button type='submit' className='ui red button' data-testid='remove'>Remove everything</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div style={editShow}>\r\n                    <div className='edit-shop-header'>\r\n                        <h3>Edit shop details</h3>\r\n                        <div className='ui basic grey button' onClick={close} data-testid='manage-cancel'>Cancel</div>\r\n                    </div>\r\n                    <form onSubmit={handleEdit} className='row'>\r\n                        <div className='col-md-6'>\r\n                            <label htmlFor='newName'>Shop Name</label>\r\n                            <input type='text' value={name} onChange={e => setName(e.target.value)} className='form-control edit-field' id='newName' required />\r\n                        </div>\r\n                        <div className='col-md-6'>\r\n                            <label htmlFor='editEmail'>Shop email</label>\r\n                            <input type='text' value={email} onChange={e => setEmail(e.target.value)} className='form-control edit-field' id='editEmail' required />\r\n                        </div>\r\n                        <div className='col-md-12'>\r\n                            <label htmlFor='editAddress'>Address</label>\r\n                            <input type='text' value={address} onChange={e => setAddress(e.target.value)} className='form-control edit-field' id='editAddress' required />\r\n                        </div>\r\n                        <div className='col-md-6'>\r\n                            <label htmlFor='shopZip'>Zip Code</label>\r\n                            <input type='text' value={zip} onChange={e => setZip(e.target.value)} className='form-control edit-field' id='editZip' required />\r\n                        </div>\r\n                        <div className='col-md-6'>\r\n                            <label htmlFor='editCity'>City</label>\r\n                            <input type='text' value={city} onChange={e => setCity(e.target.value)} className='form-control edit-field' id='editCity' required />\r\n                        </div>\r\n                        <div className='col-md-6'>\r\n                            <label htmlFor='editPhone'>Phone number</label>\r\n                            <input type='text' value={phone} onChange={e => setPhone(e.target.value)} className='form-control edit-field' id='editPhone' required />\r\n                        </div>\r\n                        <div className='col-md-6'>\r\n                            <label htmlFor='editWebsite'>Website (optional)</label>\r\n                            <input type='text' value={website} onChange={e => setWebsite(e.target.value)} className='form-control edit-field' id='editWebsite' />\r\n                        </div>\r\n                        <div className='col-md-12 coordinates-info'>\r\n                            <h6>\r\n                                If you want your shop to be shown on the map, you need to give latitude and longitude values.\r\n                                You need to fill at least \"address\", \"zip code\" and \"city\" fields to find the coordinates using \r\n                                \"Get Coordinates\" -button.\r\n                            </h6>\r\n                        </div>\r\n                        <div className='coordinates-zone col-md-12'>\r\n                            <div className='coordinates-fields'>\r\n                                <div className='col-md-6'>\r\n                                    <label htmlFor='editLatitude'>Latitude (optional)</label>\r\n                                    <input type='text' value={latitude} onChange={e => setLatitude(e.target.value)} className='form-control edit-field' placeholder='Latitude (optional)' id='editLatitude' />\r\n                                </div>\r\n                                <div className='col-md-6'>\r\n                                    <label htmlFor='editLongitude'>Longitude (optional)</label>\r\n                                    <input type='text' value={longitude} onChange={e => setLongitude(e.target.value)} className='form-control edit-field' placeholder='Longitude (optional)' id='editLongitude' />\r\n                                </div>\r\n                            </div>\r\n                            <div className='get-coordinates-map-container'>\r\n                                <div className='left-of-register-map'>\r\n                                    <div onClick={getCoordinates} className='ui teal button' data-testid='manage-coordinates'>Get Coordinates</div>\r\n                                    <div className='clear-coordinates-container' style={mapShow}>\r\n                                        <p className='coordinates-text'>If the location is not correct on the map, clear the coordinates and \r\n                                        leave both latitude and longitude fields empty. Please contact us at <b>support@shelp.fi</b> for help.\r\n                                        </p>\r\n                                        <div onClick={clearCoordinates} className='ui basic red button' data-testid='manage-clear-coordinates'>Clear coordinates</div>\r\n                                    </div>\r\n                                </div>\r\n                                {showMap && \r\n                                    <ReactMapGL\r\n                                        style={{'width': '300px !important'}}\r\n                                        className='register-map'\r\n                                        {...view}\r\n                                        mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\r\n                                        onViewportChange={view => { setView(view) }}\r\n                                        mapStyle='mapbox://styles/lunkio/ck74chdp3094a1ip59po50vd1'\r\n                                    >\r\n                                        {showMap && \r\n                                            <Marker\r\n                                                latitude={latitude}\r\n                                                longitude={longitude}\r\n                                            >\r\n                                                <i className='fas fa-map-marker-alt map-marker-register'/>\r\n                                            </Marker>\r\n                                        }\r\n                                    </ReactMapGL>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                        <div className='edit-submit-button col-md-12'>\r\n                            <button data-testid='manage-submit' type='submit' className='ui button'>Submit changes</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div style={buttonsShow} className='zones-container'>\r\n                <div className='edit-zone'>\r\n                    <div>\r\n                        <p><b>Edit shop details</b></p>\r\n                        <p>Change and update your shop details</p>\r\n                    </div>\r\n                    <button data-testid='manage-edit-shop' className='btn btn-info' onClick={() => edit(shop)}>Edit Shop Details</button>\r\n                </div> <hr />\r\n                <div>\r\n                    <h3>Danger Zone</h3>\r\n                    <div className='danger-zone'>\r\n                        <div>\r\n                            <p><b>Delete everything</b></p>\r\n                            <p>\r\n                                Once you delete this shop, everything including \r\n                                its products will be deleted forever.\r\n                            </p>\r\n                        </div>\r\n                        <button data-testid='manage-delete-shop' className='btn btn-danger' onClick={testRemove}>Delete Everything</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        shopLogin: state.shopLogin,\r\n        products: state.products,\r\n        shops: state.shops\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setAlert,\r\n    setConfirm,\r\n    initializeProducts,\r\n    initializeShops,\r\n    logoutShop,\r\n    loginShop\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShopManage)","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/buyers'\r\n\r\nlet token = null\r\n\r\nconst setToken = (newToken) => {\r\n    token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAllBuyers = async () => {\r\n    const response = await axios.get(baseUrl)\r\n    return response.data\r\n}\r\n\r\nconst addBuyer = async (buyer) => {\r\n    const response = await axios.post(baseUrl, buyer)\r\n    return response.data\r\n}\r\n\r\nconst removeBuyer = async (id) => {\r\n    const config = {\r\n        headers: { Authorization: token }\r\n    }\r\n    const response = await axios.delete(`${baseUrl}/${id}`, config)\r\n    return response.data\r\n}\r\n\r\nexport default { setToken, getAllBuyers, addBuyer, removeBuyer }","import React, {useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport buyerService from '../../services/buyerService'\r\nimport productsService from '../../services/productsService'\r\nimport { setAlert } from '../../reducers/alertReducer'\r\nimport { setConfirm } from '../../reducers/confirmReducer'\r\nimport { initializeProducts } from '../../reducers/productsReducer'\r\n\r\nconst ShopBoughtProduct = (props) => {\r\n    //console.log(props)\r\n    const [buyers, setBuyers] = useState([])\r\n\r\n    useEffect(() => {\r\n        async function getData() {\r\n            const allBuyers = await buyerService.getAllBuyers()\r\n            setBuyers(allBuyers)\r\n        }\r\n        getData()\r\n    }, [])\r\n\r\n    if (buyers.length === 0) {\r\n        return null\r\n    }\r\n\r\n    // finds the buyer of the product\r\n    const buyer = buyers.find(b => {\r\n        let ids = b.products.map(p => p.id)\r\n        for (let i = 0; i < ids.length; i++) {\r\n            if (ids[i] === props.product.id) {\r\n                return b\r\n            }\r\n        }\r\n        return null\r\n    })\r\n    //console.log(buyer)\r\n\r\n    const handleRemove = async (product) => {\r\n        productsService.setToken(props.shopLogin.token)\r\n        try {\r\n            await productsService.removeProduct(product.id)\r\n            await productsService.removeImg(product.img.id)\r\n            props.setConfirm('Bought product is now removed from this list', 5)\r\n            props.initializeProducts()\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Product was not removed, please try again', 5)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='row bought-product-container'>\r\n            <div className='col-md-2'>\r\n                <div className='img-container'>\r\n                    <img src={props.product.img.location} alt='product' data-testid='bought-img'/>\r\n                </div>\r\n            </div>\r\n            <div className='col-md-6 bought-product-desc-container'>\r\n                <div className='bought-product-desc'>\r\n                    <h4>{props.product.description}</h4> <hr />\r\n                    <p><b>Buyer:</b> {buyer.firstName} {buyer.lastName}, {buyer.email} {buyer.phone}</p>\r\n                    <p><b>Payment ID:</b> {buyer.paymentID}</p>\r\n                    <p><b>Purchase time:</b> {buyer.timeOfPurchase}</p>\r\n                </div>\r\n                <div className='img-container-small-screen bought-small-screen'>\r\n                    <img src={props.product.img.location} alt='product' />\r\n                </div>\r\n            </div>\r\n            <div className='col-md-2 bought-product-price'>\r\n                <p><b>{props.product.price} €</b></p>\r\n            </div>\r\n            <div className='col-md-2 bought-product-delete-button'>\r\n                <div>\r\n                    <button data-testid='remove-bought' className='btn btn-danger' onClick={() => handleRemove(props.product)}>Picked up/Remove</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        shopLogin: state.shopLogin\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setAlert,\r\n    setConfirm,\r\n    initializeProducts\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShopBoughtProduct)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { formatDate } from '../../services/shared'\r\nimport productsService from '../../services/productsService'\r\nimport { setAlert } from '../../reducers/alertReducer'\r\nimport { setConfirm } from '../../reducers/confirmReducer'\r\nimport { initializeProducts } from '../../reducers/productsReducer'\r\nimport { initializeShops } from '../../reducers/shopsReducer'\r\n\r\nconst ShopExpiredProduct = (props) => {\r\n    const [date, setDate] = useState('')\r\n    const [showExpiration, setShowExpiration] = useState(true)\r\n    const [showEditExpiration, setShowEditExpiration] = useState(false)\r\n    const [showEditButtons, setShowEditButtons] = useState(true)\r\n\r\n    const expirationShow = { display: showExpiration ? '' : 'none' }\r\n    const editExpirationShow = { display: showEditExpiration ? '' : 'none' }\r\n    const editButtonsShow = { visibility: showEditButtons ? 'visible' : 'hidden' }\r\n\r\n    const edit = (product) => {\r\n        setDate(product.date)\r\n        setShowExpiration(false)\r\n        setShowEditExpiration(true)\r\n        setShowEditButtons(false)\r\n    }\r\n\r\n    const handleDateEdit = async (product) => {\r\n        const editedProduct = {\r\n            description: product.description,\r\n            price: product.price,\r\n            discount: product.discount,\r\n            originalPrice: product.originalPrice,\r\n            date: date,\r\n            availability: true,\r\n            expired: false,\r\n            img: product.img.id\r\n        }\r\n        //console.log('editedProduct', editedProduct)\r\n\r\n        // tarkistaa että tuotteen pvm vähintään nykyinen pvm\r\n        let currentTime = new Date()\r\n        let formattedDate = new Date(date)\r\n        formattedDate.setHours(23)\r\n        formattedDate.setMinutes(59)\r\n        formattedDate.setSeconds(59)\r\n        if (currentTime > formattedDate) {\r\n            props.setAlert('Expiration date must be at least current date', 5)\r\n            return\r\n        }\r\n\r\n        productsService.setToken(props.shopLogin.token)\r\n        try {\r\n            await productsService.updateProduct(product.id, editedProduct)\r\n            props.initializeProducts()\r\n            props.initializeShops()\r\n            props.setConfirm('Product\\'s date edited successfully!', 5)\r\n\r\n        } catch (error) {\r\n            console.log('error')\r\n            props.setAlert('Date was not updated, please try again', 5)\r\n        }\r\n    }\r\n\r\n    const remove = async (product) => {\r\n        //console.log(product)\r\n        productsService.setToken(props.shopLogin.token)\r\n        try {\r\n            await productsService.removeProduct(product.id)\r\n            await productsService.removeImg(product.img.id)\r\n            props.setConfirm('Product was removed!', 5)\r\n            props.initializeProducts()\r\n            props.initializeShops()\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Product was not removed, please try again', 5)\r\n        }\r\n    }\r\n\r\n    const handleCancel = () => {\r\n        setShowExpiration(true)\r\n        setShowEditExpiration(false)\r\n        setShowEditButtons(true)\r\n    }\r\n\r\n    const handleOneDay = () => {\r\n        let dateNow = new Date(date)\r\n        let UNIXdate = dateNow.setDate(dateNow.getDate() +1)\r\n        let plusDay = new Date(UNIXdate).toISOString().slice(0,10)\r\n        setDate(plusDay)\r\n    }\r\n\r\n    return (\r\n        <div className='row product-container'>\r\n            <div className='col-md-2'>\r\n                <div className='img-container'>\r\n                    <img src={props.product.img.location} alt='product' data-testid='expired-img' />\r\n                </div>\r\n            </div>\r\n            <div className='col-md-6 col-sm-12'>\r\n                <h4>{props.product.description}</h4><hr className='divider' />\r\n                <h6 style={expirationShow}>Expiration date: <b style={{'color': 'red'}}>{formatDate(props.product.date)}</b></h6>\r\n                <div style={editExpirationShow} className='row expired-edit'>\r\n                    <input type='date' className='form-control col-xl-4 col-lg-12 col-md-12' value={date} onChange={e => setDate(e.target.value)} />\r\n                    <div className='col-xl-8 col-lg-12 col-md-12 expiry-set-buttons'>\r\n                        <div>\r\n                            <div onClick={handleOneDay} className='ui basic teal button' data-testid='expired-1Day'>+1 Day</div>\r\n                            <div onClick={() => handleDateEdit(props.product)} className='ui button set-date-button' data-testid='expired-set-date'>Set Date</div>\r\n                        </div>\r\n                        <div>\r\n                            <div onClick={handleCancel} className='ui basic red button' data-testid='expired-cancel'>Cancel</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='img-container-small-screen'>\r\n                <img src={props.product.img.location} alt='product' />\r\n            </div>\r\n            <div className='col-md-1 col-sm-12 price-container-shop'>\r\n                <div className='price-container shop-prices'>\r\n                    <div className='prices'>\r\n                        <h5>{props.product.price}€</h5>\r\n                        <h6 className='original-price'>{props.product.originalPrice}€</h6>\r\n                    </div>\r\n                    <h5 className='discount'>-{props.product.discount}%</h5>\r\n                </div>\r\n            </div>\r\n            <div className='col-md-3 col-sm-12' style={editButtonsShow}>\r\n                <div className='shop-expire-edit-button'>\r\n                    <button className='btn btn-info expire-edit-button' onClick={() => edit(props.product)} data-testid='expired-edit'>Edit expiration date</button>\r\n                    <button className='btn btn-danger' onClick={() => remove(props.product)} data-testid='expired-remove'>Remove</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        shopLogin: state.shopLogin\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setAlert,\r\n    setConfirm,\r\n    initializeProducts,\r\n    initializeShops\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShopExpiredProduct)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Select from 'react-select'\r\nimport { Message } from 'semantic-ui-react'\r\nimport productsService from '../../services/productsService'\r\nimport shopsService from '../../services/shopsService'\r\nimport { logoutShop } from '../../reducers/shopLoginReducer'\r\nimport ShopProduct from './ShopProduct'\r\nimport ShopAddProduct from './ShopAddProduct'\r\nimport ShopManage from './ShopManage'\r\nimport ShopBoughtProduct from './ShopBoughtProduct'\r\nimport ShopExpiredProduct from './ShopExpiredProduct'\r\n\r\nconst ShopLoggedIn = (props) => {\r\n    //console.log(props)\r\n    const [selectedProducts, setSelectedProducts] = useState([])\r\n    //console.log('selectedProducts', selectedProducts)\r\n\r\n    const [showProducts, setShowProducts] = useState(true)\r\n    const [showAdd, setShowAdd] = useState(false)\r\n    const [showManage, setShowManage] = useState(false)\r\n    const [showBought, setShowBought] = useState(false)\r\n    const [showExpired, setShowExpired] = useState(false)\r\n\r\n    if (selectedProducts === null) {\r\n        setSelectedProducts([])\r\n        return null\r\n    }\r\n\r\n    const productsShow = { display: showProducts ? '' : 'none' }\r\n    const addShow = { display: showAdd ? '' : 'none' }\r\n    const manageShow = { display: showManage ? '' : 'none' }\r\n    const boughtShow = { display: showBought ? '' : 'none' }\r\n    const expiredShow = { display: showExpired ? '' : 'none' }\r\n\r\n    const handleProductsShow = () => {\r\n        setShowProducts(true)\r\n        setShowAdd(false)\r\n        setShowManage(false)\r\n        setShowBought(false)\r\n        setShowExpired(false)\r\n    }\r\n\r\n    const handleBoughtProduct = () => {\r\n        setShowProducts(false)\r\n        setShowAdd(false)\r\n        setShowManage(false)\r\n        setShowBought(true)\r\n        setShowExpired(false)\r\n    }\r\n\r\n    const handleExpired = () => {\r\n        setShowProducts(false)\r\n        setShowAdd(false)\r\n        setShowManage(false)\r\n        setShowBought(false)\r\n        setShowExpired(true)\r\n    }\r\n\r\n    const handleAddShow = () => {\r\n        setShowProducts(false)\r\n        setShowAdd(true)\r\n        setShowManage(false)\r\n        setShowBought(false)\r\n        setShowExpired(false)\r\n    }\r\n\r\n    const handleManage = () => {\r\n        setShowProducts(false)\r\n        setShowAdd(false)\r\n        setShowManage(true)\r\n        setShowBought(false)\r\n        setShowExpired(false)\r\n    }\r\n\r\n    const handleLogout = () => {\r\n        productsService.destroyToken()\r\n        shopsService.destroyToken()\r\n        props.logoutShop()\r\n    }\r\n\r\n    // asettaa tuotteiden nimet Select -valikon vaihtoehdoiksi\r\n    let allProductsLabel = []\r\n    allProductsLabel = props.products\r\n        .filter(p => p.shop.id === props.shopLogin.id)\r\n        .filter(p => p.availability === true)\r\n        .map(p => { return { value: p.id, label: p.description } })\r\n    let productIds = selectedProducts.map(p => p.value)\r\n    let filteredProducts = []\r\n\r\n    return (\r\n        <div className='container main'>\r\n            <div className='loggedin-header row'>\r\n                <h5 className='col-md-4 col-sm-12 partner-pages'><b>Shelp Partner pages</b></h5>\r\n                <h3 className='col-md-4 col-sm-12 shopname'>Logged in as {props.shopLogin.name}</h3>\r\n                <div className='col-md-4 col-sm-12 logout-shop'>\r\n                    <button data-testid='logout' onClick={handleLogout} className='btn btn-danger'>Logout</button>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className='loggedin-buttons'>\r\n                <button className='ui button' data-testid='products' onClick={handleProductsShow}>Products on sale</button>\r\n                <button className='ui button' data-testid='bought' onClick={handleBoughtProduct}>Bought Products</button>\r\n                <button className='ui button' data-testid='expired' onClick={handleExpired}>Expired Products</button>\r\n                <button className='ui button' data-testid='add' onClick={handleAddShow}>Add products</button>\r\n                <button className='ui button' data-testid='manage' onClick={handleManage} >Manage Shop</button>\r\n            </div>\r\n\r\n            <div className='info-message'>\r\n                {props.confirm && <Message success header={props.confirm} />}\r\n                {props.alert && <Message error header={props.alert} />}\r\n            </div>\r\n            \r\n            {/* Shows Products on sale */}\r\n            <div style={productsShow}>\r\n                <div>\r\n                    <h3>Products on sale:</h3>\r\n                </div><hr />\r\n                <Select \r\n                    options={allProductsLabel}\r\n                    placeholder='Search products...'\r\n                    onChange={setSelectedProducts}\r\n                    isMulti\r\n                    isSearchable\r\n                /> <br />\r\n                {allProductsLabel.length === 0 &&\r\n                    <div className='no-products-sale'>\r\n                        <h1>No products on sale</h1>\r\n                        <h5 onClick={handleAddShow}>Add products</h5>\r\n                    </div>\r\n                }\r\n                {selectedProducts.length === 0 &&\r\n                    <div>\r\n                        {props.products\r\n                            .filter(p => p.shop.id === props.shopLogin.id)\r\n                            .filter(p => p.availability === true)\r\n                            .map(p => <ShopProduct key={p.id} product={p} />\r\n                        )}\r\n                    </div>\r\n                }\r\n                {selectedProducts.length > 0 && \r\n                    <div>\r\n                        {productIds.forEach(v => {\r\n                                filteredProducts = filteredProducts.concat(props.products.filter(p => p.id === v))\r\n                            }\r\n                        )}\r\n                        {filteredProducts\r\n                            .map(p => <ShopProduct key={p.id} product={p} />\r\n                        )}\r\n                    </div>\r\n                }\r\n            </div>\r\n\r\n            {/* Shows bought Products */}\r\n            <div style={boughtShow}>\r\n                <div>\r\n                    <h3>Bought products:</h3>\r\n                </div><hr />\r\n                {props.products\r\n                    .filter(p => p.shop.id === props.shopLogin.id)\r\n                    .filter(p => p.expired !== true)\r\n                    .filter(p => p.availability === false)\r\n                    .map(p => <ShopBoughtProduct key={p.id} product={p} />\r\n                )}\r\n            </div>\r\n\r\n            {/* Shows expired Products */}\r\n            <div style={expiredShow}>\r\n                <div>\r\n                    <h3>Expired products:</h3>\r\n                </div><hr />\r\n                {props.products\r\n                    .filter(p => p.shop.id === props.shopLogin.id)\r\n                    .filter(p => p.expired === true)\r\n                    .map(p => <ShopExpiredProduct key={p.id} product={p} />\r\n                )}\r\n            </div>\r\n\r\n            {/* Add Products */}\r\n            <div style={addShow}>\r\n                <div>\r\n                    <h3>Add new product:</h3>\r\n                </div><hr />\r\n                <ShopAddProduct />\r\n            </div>\r\n\r\n            {/* Manage Shop */}\r\n            <div style={manageShow}>\r\n                <div>\r\n                    <h3>Manage Shop:</h3>\r\n                </div><hr />\r\n                <ShopManage />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        shopLogin: state.shopLogin,\r\n        products: state.products,\r\n        alert: state.alert,\r\n        confirm: state.confirm\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    logoutShop\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShopLoggedIn)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport ShopLoggedIn from './ShopLoggedIn'\r\nimport { Link } from 'react-router-dom'\r\nimport { Message } from 'semantic-ui-react'\r\nimport loginService from '../../services/loginService'\r\nimport productsService from '../../services/productsService'\r\nimport { loginShop } from '../../reducers/shopLoginReducer'\r\nimport { setAlert } from '../../reducers/alertReducer'\r\n\r\nconst ShopLogin = (props) => {\r\n    //console.log(props)\r\n    const [passwordReveal, setPasswordReveal] = useState(true)\r\n\r\n    const login = async (event) => {\r\n        event.preventDefault()\r\n\r\n        let name = event.target.name.value\r\n        let password = event.target.password.value\r\n\r\n        try {\r\n            const shop = await loginService.login({ name, password })\r\n            productsService.setToken(shop.token)\r\n            props.loginShop(shop)\r\n\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Wrong username or password', 3)\r\n        }\r\n    }\r\n\r\n    if (props.shopLogin) {\r\n        return (\r\n            <ShopLoggedIn />\r\n        )\r\n    }\r\n\r\n    //paljastaa salasanan\r\n    const passwordType = passwordReveal ? 'password' : 'text'\r\n    const handlePasswordReveal = () => {\r\n        if (passwordReveal) {\r\n            setPasswordReveal(false)\r\n        } else {\r\n            setPasswordReveal(true)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='container main login-form'>\r\n            <div className='login-header'>\r\n                <h2>Login as Shelp Partner</h2>\r\n            </div>\r\n            <form onSubmit={login}>\r\n                <div className='form-group'>\r\n                    <label htmlFor='shopName'>Shop Name</label>\r\n                    <input name='name' type='text' className='form-control' id='shopName' />\r\n                </div>\r\n                <div className='form-group'>\r\n                    <label htmlFor='shopPassword'>Password</label>\r\n                    <input name='password' type={passwordType} className='form-control' id='shopPassword' />\r\n                </div>\r\n                <div className='show-password'>\r\n                    <input type='checkbox' onClick={handlePasswordReveal} id='showPassword'/>Show password\r\n                </div>\r\n                <div className='login-button'>\r\n                    <button id='loginBtn' type='submit' className='ui button'>Login</button>\r\n                </div>\r\n            </form>\r\n            <div className='info-message'>\r\n                {props.alert && <Message error header={props.alert} />}\r\n            </div>\r\n            <div className='signup-container'>\r\n                <p>Not yet a partner?</p>\r\n                <Link to='register'>\r\n                    <button className='ui grey basic button' data-testid='signup'>Sign up</button>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        shopLogin: state.shopLogin,\r\n        alert: state.alert\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loginShop,\r\n    setAlert\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShopLogin)","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { Message } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { setAlert } from '../../reducers/alertReducer'\r\nimport { initializeShops } from '../../reducers/shopsReducer'\r\nimport { logoutShop } from '../../reducers/shopLoginReducer'\r\nimport shopsService from '../../services/shopsService'\r\nimport productsService from '../../services/productsService'\r\nimport ReactMapGL, { Marker } from 'react-map-gl'\r\n\r\nconst ShopRegister = (props) => {\r\n    const [address, setAddress] = useState('')\r\n    const [zip, setZip] = useState('')\r\n    const [city, setCity] = useState('')\r\n    const [name, setName] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [passwordAgain, setPasswordAgain] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [phone, setPhone] = useState('')\r\n    const [website, setWebsite] = useState('')\r\n    const [latitude, setLatitude] = useState('')\r\n    const [longitude, setLongitude] = useState('')\r\n    \r\n    const [showIntroduction, setShowIntroduction] = useState(true)\r\n    const [showAddress, setShowAddress] = useState(true)\r\n    const [showAddressBtn, setShowAddressBtn] = useState(true)\r\n    const [showLoginDetails, setShowLoginDetails] = useState(false)\r\n    const [showLoginBtn, setShowLoginBtn] = useState(false)\r\n    const [showShopDetails, setShowShopDetails] = useState(false)\r\n    const [showDetailsBtn, setShowDetailsBtn] = useState(false)\r\n    const [showRegisterBtn, setShowRegisterBtn] = useState(false)\r\n    const [showSuccess, setShowSuccess] = useState(false)\r\n    const [showOverview, setShowOverview] = useState(false)\r\n    const [showProgress, setShowProgress] = useState(true)\r\n    const [showMap, setShowMap] = useState(false)\r\n\r\n    const [passwordReveal, setPasswordReveal] = useState(true)\r\n    const [view, setView] = useState({\r\n        latitude: 60.169857,\r\n        longitude: 24.938379,\r\n        width: '20vw',\r\n        height: '38vh',\r\n        zoom: 15\r\n    })\r\n\r\n    useEffect(() => {\r\n        setView({\r\n            latitude: latitude,\r\n            longitude: longitude,\r\n            width: '20vw',\r\n            height: '38vh',\r\n            zoom: 15\r\n        })\r\n    }, [latitude, longitude])\r\n\r\n    //rekisteröi kaupan\r\n    const handleRegistration = async (event) => {\r\n        event.preventDefault()\r\n\r\n        if (password !== passwordAgain || password === '' || passwordAgain === '') {\r\n            props.setAlert('Please check that both passwords are identical and not empty', 5)\r\n            return\r\n        }\r\n\r\n        const newShop = {\r\n            name: name,\r\n            email: email,\r\n            password: password,\r\n            address: address,\r\n            zip: zip,\r\n            city: city,\r\n            phone: phone,\r\n            latitude: latitude,\r\n            longitude: longitude,\r\n            website: website\r\n        }\r\n        //console.log(newShop)\r\n        try {\r\n            await shopsService.addNewShop(newShop)\r\n            setShowSuccess(true)\r\n            setShowAddress(false)\r\n            setShowLoginDetails(false)\r\n            setShowShopDetails(false)\r\n            setShowRegisterBtn(false)\r\n            setShowIntroduction(false)\r\n            setShowProgress(false)\r\n            productsService.destroyToken()\r\n            shopsService.destroyToken()\r\n            props.logoutShop()\r\n            props.initializeShops()\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Shop name already in use, please try with another name', 5)\r\n        }\r\n    }\r\n\r\n    // tarkistaa, että osoitekentät eivät ole tyhjiä\r\n    const handleAddressCheck = () => {\r\n        if (address === '' || zip === '' || city === '') {\r\n            props.setAlert('All the fields must be filled', 5)\r\n        } else {\r\n            setShowAddress(false)\r\n            setShowAddressBtn(false)\r\n            setShowLoginDetails(true)\r\n            setShowLoginBtn(true)\r\n        }\r\n    }\r\n\r\n    // tarkistaa että login-tiedot kunnossa, kaupan nimi unique yms\r\n    const handleLoginDetails = async () => {\r\n        try {\r\n            const shops = await shopsService.getAllShops()\r\n            const shopNames = shops.map(s => s.name).map(n => n.toLowerCase())\r\n            const lowerCaseName = name.toLowerCase()\r\n            if (shopNames.includes(lowerCaseName)) {\r\n                props.setAlert('Shop name already in use, please try with another name', 5)\r\n                return\r\n            }\r\n        } catch (error) {\r\n            console.log('error')\r\n            props.setAlert('Something went wrong, please try again', 5)\r\n        }\r\n        if (name === '') {\r\n            props.setAlert('Please type your shop name', 5)\r\n            return\r\n        }\r\n        if (password !== passwordAgain || password === '' || passwordAgain === '') {\r\n            props.setAlert('Please check that both passwords are identical and not empty', 5)\r\n            return\r\n        }\r\n        setShowLoginDetails(false)\r\n        setShowLoginBtn(false)\r\n        setShowShopDetails(true)\r\n        setShowDetailsBtn(true)\r\n    }\r\n\r\n    // tarkistaa että vähintään email ja puhnro ovat asetetut\r\n    const handleDetailsCheck = () => {\r\n        if (email === '' || phone === '') {\r\n            props.setAlert('Please provide at least shop\\'s phone and email information', 5)\r\n        } else {\r\n            setShowDetailsBtn(false)\r\n            setShowOverview(true)\r\n            setShowAddress(true)\r\n            setShowLoginDetails(true)\r\n            setShowRegisterBtn(true)\r\n        }\r\n    }\r\n\r\n    const goBackToAddress = () => {\r\n        setShowAddress(true)\r\n        setShowAddressBtn(true)\r\n        setShowLoginDetails(false)\r\n        setShowLoginBtn(false)\r\n    }\r\n\r\n    const goBackToDetails = () => {\r\n        setShowLoginDetails(true)\r\n        setShowLoginBtn(true)\r\n        setShowShopDetails(false)\r\n        setShowDetailsBtn(false)\r\n    }\r\n\r\n    const addressShow = { display: showAddress ? '' : 'none' }\r\n    const addressBtnShow = { display: showAddressBtn ? '' : 'none' }\r\n\r\n    const loginDetails = { display: showLoginDetails ? '' : 'none' }\r\n    const loginDetailsBtnShow = { display: showLoginBtn ? '' : 'none' }\r\n\r\n    const shopDetailsShow = { display: showShopDetails ? '' : 'none' }\r\n    const detailsBtnShow = { display: showDetailsBtn ? '' : 'none' }\r\n\r\n    const registerBtnShow = { display: showRegisterBtn ? '' : 'none' }\r\n    const successShow = { display: showSuccess ? '' : 'none' }\r\n\r\n    const introductionShow = { display: showIntroduction ? '' : 'none' }\r\n    const overviewShow = { display: showOverview ? '' : 'none' }\r\n    const progressShow = { display: showProgress ? '' : 'none' }\r\n    const mapShow = { display: showMap ? '' : 'none' }\r\n\r\n    const firstProgress = showAddressBtn ? 'progress-ball-active' : 'progress-ball-nonactive'\r\n    const secondProgress = showLoginBtn ? 'progress-ball-active' : 'progress-ball-nonactive'\r\n    const thirdProgress = showDetailsBtn ? 'progress-ball-active' : 'progress-ball-nonactive'\r\n    const fourthProgress = showOverview ? 'progress-ball-active' : 'progress-ball-nonactive'\r\n\r\n    //paljastaa salasanan\r\n    const passwordType = passwordReveal ? 'password' : 'text'\r\n    const handlePasswordReveal = () => {\r\n        if (passwordReveal) {\r\n            setPasswordReveal(false)\r\n        } else {\r\n            setPasswordReveal(true)\r\n        }\r\n    }\r\n\r\n    // hakee koordinaatit osoitteen perusteella\r\n    const getCoordinates = async () => {\r\n        setShowMap(false)\r\n        setLatitude('')\r\n        setLongitude('')\r\n        if (address === '' || zip === '' || city === '') {\r\n            props.setAlert('To get the coordinates, please type shop\\'s address, zip code and city', 5)\r\n            return\r\n        }\r\n        const encodedAddress = encodeURI(`${address}, ${zip}, ${city}, Finland`)\r\n        try {\r\n            const result = await axios.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodedAddress}.json?types=address&access_token=${process.env.REACT_APP_MAPBOX}`)\r\n            //console.log('RESULT', result)\r\n            // tarkistaa että kyseinen osoite on olemassa, jos ei niin return\r\n            if (result.data.features[0].relevance !== 1) {\r\n                props.setAlert('Couldn\\'t get the coordinates, please check that given address is correct. If this doesn\\'t help, leave coordinate fields empty, they can be added also after registration', 10)\r\n                return\r\n            }\r\n            setLatitude(result.data.features[0].center[1])\r\n            setLongitude(result.data.features[0].center[0])\r\n            setShowMap(true)\r\n        } catch(error) {\r\n            console.log('error', error)\r\n            props.setAlert('Couldn\\'t get the coordinates, please check that given address is correct. If this doesn\\'t help, leave coordinate fields empty, they can be added also after registration', 10)\r\n        }\r\n    }\r\n\r\n    const clearCoordinates = () => {\r\n        setShowMap(false)\r\n        setLatitude('')\r\n        setLongitude('')\r\n    }\r\n    \r\n    return (\r\n        <div className='container main register-container'>\r\n            <div style={introductionShow}>\r\n                <div className='goback-login-button'>\r\n                    <Link to='/partnerinfo'>\r\n                        <button className='ui grey basic button'>Go back</button>\r\n                    </Link>\r\n                </div>\r\n                <div className='register-header'>\r\n                    <div>\r\n                        <h2>Start selling with Shelp</h2>\r\n                        <p>\r\n                            Throwing food products away is bad business.\r\n                            Let us help you sell your surplus products\r\n                            and turn it into good business.\r\n                        </p>\r\n                        <p><b>Set up your Shelp account in just minutes\r\n                            by following the next steps!</b>\r\n                        </p><hr />\r\n                    </div> \r\n                </div>\r\n                <div className='register-progress' style={progressShow}>\r\n                    <div className={firstProgress}></div>\r\n                    <div className={secondProgress}></div>\r\n                    <div className={thirdProgress}></div>\r\n                    <div className={fourthProgress}></div>\r\n                </div>\r\n                <div className='register-overview' style={overviewShow}>\r\n                    <h2>Overview</h2>\r\n                    <h6>Check all the details and then press 'Submit' to register your Shop</h6>\r\n                </div>\r\n            </div>\r\n            <form onSubmit={handleRegistration} className='row register-form'>\r\n                {/* Shop location */}\r\n                <div style={addressShow} className='row register-fields'>\r\n                    <div className='register-question col-md-12' style={addressBtnShow}>\r\n                        <h6><b>Where is your shop located?</b></h6>\r\n                    </div>\r\n                    <div className='col-md-12'>\r\n                        <label htmlFor='shopAddress'>Address</label>\r\n                        <input type='text' onChange={e => setAddress(e.target.value)} className='form-control register-field' placeholder='Address' id='shopAddress' required />\r\n                    </div>\r\n                    <div className='col-md-6'>\r\n                        <label htmlFor='shopZip'>Zip Code</label>\r\n                        <input type='text' onChange={e => setZip(e.target.value)} className='form-control register-field' placeholder='Zip Code' id='shopZip' required />\r\n                    </div>\r\n                    <div className='col-md-6'>\r\n                        <label htmlFor='shopCity'>City</label>\r\n                        <input type='text' onChange={e => setCity(e.target.value)} className='form-control register-field' placeholder='City' id='shopCity' required />\r\n                    </div>\r\n                    <div style={addressBtnShow} className='col-md-12 coordinates-info'>\r\n                        <h6>If you want your shop to be shown on the map, \r\n                            you need to give latitude and longitude values.\r\n                            Fill all the fields above and press the \"Get Coordinates\"\r\n                            -button for the coordinates.\r\n                        </h6>\r\n                    </div>\r\n                    <div style={addressBtnShow} className='coordinates-zone col-md-12'>\r\n                        <div className='coordinates-fields'>\r\n                            <div className='col-md-6'>\r\n                                <label htmlFor='shopLatitude'>Latitude (optional)</label>\r\n                                <input type='text' value={latitude} onChange={e => setLatitude(e.target.value)} className='form-control register-field' placeholder='Latitude (optional)' id='shopLatitude' />\r\n                            </div>\r\n                            <div className='col-md-6'>\r\n                                <label htmlFor='shopLongitude'>Longitude (optional)</label>\r\n                                <input type='text' value={longitude} onChange={e => setLongitude(e.target.value)} className='form-control register-field' placeholder='Longitude (optional)' id='shopLongitude' />\r\n                            </div>\r\n                        </div>\r\n                        <div className='get-coordinates-map-container'>\r\n                            <div className='left-of-register-map'>\r\n                                <div onClick={getCoordinates} className='ui teal button'>Get Coordinates</div>\r\n                                <div className='clear-coordinates-container' style={mapShow}>\r\n                                    <p className='coordinates-text'>If the location is not correct on the map, clear the coordinates and \r\n                                        leave both latitude and longitude fields empty. They can be added after\r\n                                        registration if needed.\r\n                                    </p>\r\n                                    <div onClick={clearCoordinates} className='ui basic red button'>Clear coordinates</div>\r\n                                </div>\r\n                            </div>\r\n                            {showMap && \r\n                                <ReactMapGL\r\n                                    className='register-map'\r\n                                    {...view}\r\n                                    mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\r\n                                    onViewportChange={view => { setView(view) }}\r\n                                    mapStyle='mapbox://styles/lunkio/ck74chdp3094a1ip59po50vd1'\r\n                                >\r\n                                    {showMap && \r\n                                        <Marker\r\n                                            latitude={latitude}\r\n                                            longitude={longitude}\r\n                                        >\r\n                                            <i className='fas fa-map-marker-alt map-marker-register'/>\r\n                                        </Marker>\r\n                                    }\r\n                                </ReactMapGL>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <div style={addressBtnShow} className='register-continue-button col-md-12'>\r\n                        <div onClick={handleAddressCheck} className='ui basic teal button'>Continue</div>\r\n                    </div>\r\n                </div>\r\n                {/* Login details */}\r\n                <div style={loginDetails} className='row register-fields'>\r\n                    <div className='register-question col-md-12' style={loginDetailsBtnShow}>\r\n                        <h6><b>Please set your account details</b></h6>\r\n                    </div>\r\n                    <div className='col-md-12'>\r\n                        <label htmlFor='shopName'>Shop Name (You will login with shop name once registered)</label>\r\n                        <input type='text' onChange={e => setName(e.target.value)} className='form-control register-field' placeholder='Shop Name' id='shopName' required />\r\n                    </div>\r\n                    <div className='col-md-6'>\r\n                        <label htmlFor='shopPsw'>Password</label>\r\n                        <input type={passwordType} onChange={e => setPassword(e.target.value)} className='form-control register-field' placeholder='Password' id='shopPsw' required />\r\n                    </div>\r\n                    <div className='col-md-6'>\r\n                        <label htmlFor='shopPswAgain'>Password Again</label>\r\n                        <input type={passwordType} onChange={e => setPasswordAgain(e.target.value)} className='form-control register-field' placeholder='Password Again' id='shopPswAgain' required />\r\n                    </div>\r\n                    <div className='show-password col-md-12'>\r\n                        <input type='checkbox' onClick={handlePasswordReveal} />Show password\r\n                    </div>\r\n                    <div style={loginDetailsBtnShow} className='register-continue-button col-md-12'>\r\n                        <div onClick={goBackToAddress} className='ui basic grey button'>Back</div>\r\n                        <div onClick={handleLoginDetails} className='ui basic teal button'>Continue</div>\r\n                    </div>\r\n                </div>\r\n                {/* Shop details */}\r\n                <div style={shopDetailsShow} className='row register-fields'>\r\n                    <div className='register-question col-md-12' style={detailsBtnShow}>\r\n                        <h6><b>Please give your shop information</b></h6>\r\n                    </div>\r\n                    <div className='col-md-12'>\r\n                        <label htmlFor='shopEmail'>Shop Email</label>\r\n                        <input type='text' onChange={e => setEmail(e.target.value)} className='form-control register-field' placeholder='Email' id='shopEmail' required />\r\n                    </div>\r\n                    <div className='col-md-6'>\r\n                        <label htmlFor='shopPhone'>Phone number</label>\r\n                        <input type='text' onChange={e => setPhone(e.target.value)} className='form-control register-field' placeholder='Phone number' id='shopPhone' required />\r\n                    </div>\r\n                    <div className='col-md-6'>\r\n                        <label htmlFor='shopWebsite'>Website (optional)</label>\r\n                        <input type='text' onChange={e => setWebsite(e.target.value)} className='form-control register-field' placeholder='Website (optional)' id='shopWebsite' />\r\n                    </div>\r\n                    <div style={detailsBtnShow} className='register-continue-button col-md-12'>\r\n                        <div onClick={goBackToDetails} className='ui basic grey button'>Back</div>\r\n                        <div onClick={handleDetailsCheck} className='ui basic teal button'>Continue</div>\r\n                    </div>\r\n                </div>\r\n                <div style={registerBtnShow} className='col-md-12 register-submit-button'>\r\n                    <button id='submitBtn' type='submit' className='ui button'>Submit</button>\r\n                </div>\r\n                <div className='info-message'>\r\n                    {props.alert && <Message error header={props.alert} />}\r\n                </div>\r\n            </form>\r\n            <div style={successShow} className='register-success'>\r\n                <h2><b>{name}</b> is now registered!</h2>\r\n                <h6>\r\n                    You can \r\n                    <span>\r\n                        <Link to='/login' className='home-span-link'> Login</Link>\r\n                    </span> now.\r\n                </h6>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        alert: state.alert\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setAlert,\r\n    initializeShops,\r\n    logoutShop\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShopRegister)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Icon } from 'semantic-ui-react'\r\nimport { removeFromCart } from '../../reducers/cartReducer'\r\nimport { formatDate } from '../../services/shared'\r\n\r\nconst InCartProducts = (props) => {\r\n\r\n    const remove = (product) => {\r\n        props.removeFromCart(product.id)\r\n    }\r\n\r\n    return (\r\n        <div className='row cart-product-container'>\r\n            <div className='col-md-2'>\r\n                <div className='cart-img-container'>\r\n                    <img src={props.product.img.location} alt='cart product' data-testid='incart-img' />\r\n                </div>\r\n            </div>\r\n            <div className='col-md-6 cart-product-desc'>\r\n                <div className='product-header-date'>\r\n                    <h4>{props.product.description}</h4> <h6>Expiration date: <span className='expiration-date'><b>{formatDate(props.product.date)}</b></span></h6>\r\n                </div> <hr className='divider' />\r\n                <div className='product-shop-small-screen-container'>\r\n                    <div className='product-shop-desc-texts'>\r\n                        <p><i className='fas fa-store'/> <b>{props.product.shop.name}</b></p>\r\n                        <p><i className='fas fa-map-marker-alt' /> {props.product.shop.address}, {props.product.shop.zip} {props.product.shop.city}</p>\r\n                        <p><i className='fas fa-phone' /> {props.product.shop.phone} {props.product.shop.website !== '' && <span><i className='fas fa-globe' /> {props.product.shop.website}</span>}</p>\r\n                    </div>\r\n                    <div className='img-container-small-screen'>\r\n                        <img src={props.product.img.location} alt='cart product'/>\r\n                    </div>\r\n                </div>\r\n            </div>            \r\n            <div className='col-md-2 price-container'>\r\n                <div className='prices'>\r\n                    <h4>{props.product.price}€</h4>\r\n                    <h6 className='original-price'>{props.product.originalPrice}€</h6>\r\n                </div>\r\n                <h5 className='discount'>-{props.product.discount}%</h5>\r\n            </div>\r\n            <div className='col-md-2 cart-remove-item-icon'>\r\n                <div className='cart-remove-button' onClick={() => remove(props.product)} data-testid='remove-from-cart'><Icon name='remove circle' size='large' /></div>\r\n                <div className='cart-remove-text-small-screen'>Remove</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, { removeFromCart })(InCartProducts)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport InCartProducts from './InCartProducts'\r\nimport { emptyCart } from '../../reducers/cartReducer'\r\nimport Footer from '../Footer'\r\n\r\nconst Cart = (props) => {\r\n    //console.log(props)\r\n\r\n    if (props.cart.length === 0) {\r\n        return (\r\n            <div className='container main empty-cart'>\r\n                <h1>Cart is empty</h1>\r\n                <Link to='/products'>\r\n                    <button className='ui button' data-testid='cart-empty-back-to-products'>Discover offers</button>\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const totalPrice = props.cart.reduce((a,p) => a + p.price, 0)\r\n    const priceWithoutDiscount = props.cart.reduce((a,p) => a + p.originalPrice, 0)\r\n    const savedPrice = priceWithoutDiscount - totalPrice\r\n\r\n    const handleEmptyCart = () => {\r\n        props.emptyCart()\r\n    }\r\n\r\n    return (\r\n        <div className='container main'>\r\n            <div className='cart-header'>\r\n                <h1>Shopping Cart</h1> <hr />\r\n            </div>\r\n            <div className='row cart-descriptions' data-testid='cart-desc'>\r\n                <div className='col-md-8'>\r\n                    <p><b>Product</b></p> <hr />\r\n                </div>\r\n                <div className='col-md-2'>\r\n                    <p><b>Price</b></p> <hr />\r\n                </div>\r\n                <div className='col-md-2'>\r\n                    <p><b>Remove</b></p> <hr />\r\n                </div>\r\n            </div>\r\n            <div data-testid='cart-products'>\r\n                {props.cart.map(product =>\r\n                    <InCartProducts key={product.id} product={product} />    \r\n                )}\r\n            </div>\r\n            <div className='row cart-buttons'>\r\n                <div className='col-lg-5 col-md-6 col-sm-8 cart-continue-empty-buttons'>\r\n                    <Link to='/products'>\r\n                        <button className='ui teal basic button' data-testid='continue-shopping'>Continue shopping</button>\r\n                    </Link>\r\n                    <button className='btn btn-danger' onClick={handleEmptyCart} data-testid='empty-cart'>Empty Cart</button>\r\n                </div>\r\n                <div className='col-lg-5 col-md-3 col-sm-4 col-12 cart-price-container'>\r\n                    <div className='cart-prices'>\r\n                        <h4>Total: <b>{Math.round((totalPrice + Number.EPSILON) * 100) / 100}</b> €</h4>\r\n                        <h6>You save {Math.round((savedPrice + Number.EPSILON) * 100) / 100} €</h6>\r\n                    </div>\r\n                </div>\r\n                <div className='col-lg-2 col-md-3 col-sm-12 checkout-button'>\r\n                    <Link to='/checkout'>\r\n                        <button className='ui button' data-testid='cart-checkout-button'>Checkout</button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        cart: state.cart\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    emptyCart\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Cart)","const paymentReducer = (state = [] , action) => {\r\n    switch(action.type) {\r\n        case 'ADD_PRODUCT_TO_PAYMENT':\r\n            return [...state, action.data]\r\n        case 'EMPTY_PAYMENT':\r\n            return action.data\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const addProductToPayment = (product) => {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: 'ADD_PRODUCT_TO_PAYMENT',\r\n            data: product\r\n        })\r\n    }\r\n}\r\n\r\nexport const emptyPayment = () => {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: 'EMPTY_PAYMENT',\r\n            data: []\r\n        })\r\n    }\r\n}\r\n\r\nexport default paymentReducer","import React from 'react'\r\nimport { compose } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport { PayPalButton } from 'react-paypal-button-v2'\r\nimport { withRouter } from 'react-router-dom'\r\nimport buyerService from '../../services/buyerService'\r\nimport productsService from '../../services/productsService'\r\nimport { addProductToPayment } from '../../reducers/paymentReducer'\r\nimport { emptyPayment } from '../../reducers/paymentReducer'\r\nimport { emptyCart } from '../../reducers/cartReducer'\r\n\r\nconst PayPal = (props) => {\r\n\r\n    const onSuccess = async (payment) => {\r\n        console.log(\"Success\", payment)\r\n        props.emptyPayment() //tyhjentää staten ennen kuin lisää uudet tuotteet\r\n\r\n        const newBuyer = { ...props.buyer, paymentID: payment.id, payerID: payment.payer.payer_id}\r\n        //console.log('newbuyer', newBuyer)\r\n\r\n        await buyerService.addBuyer(newBuyer)\r\n        for (let i = 0; i < newBuyer.products.length; i++) {\r\n            await productsService.productAvailabilityToFalse(newBuyer.products[i].id, newBuyer.products[i]) // tuotteiden availability falseksi\r\n            props.addProductToPayment(newBuyer.products[i]) // lisää tuotteet paymentReduceriin, jotta cartin voi tyhjentää\r\n        }\r\n        props.emptyCart()\r\n        \r\n        props.history.push('/success')\r\n    }\r\n\r\n    const onCancel = (data) => {\r\n        props.history.push('/cancel')\r\n    }\r\n\r\n    const onError = (err) => {\r\n        props.history.push('/cancel')\r\n    }\r\n\r\n    return (\r\n        <PayPalButton\r\n            amount={props.totalPrice}\r\n            onSuccess={onSuccess}\r\n            onCancel={onCancel}\r\n            onError={onError}\r\n            options={{clientId: process.env.REACT_APP_CLIENT_ID, currency: 'EUR'}}\r\n        />\r\n    )\r\n}\r\n\r\nexport default compose(\r\n    withRouter,\r\n    connect(null, { addProductToPayment, emptyPayment, emptyCart })\r\n)(PayPal)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Message } from 'semantic-ui-react'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport PayPalButton from './PayPal'\r\nimport productsService from '../../services/productsService'\r\nimport { setAlert } from '../../reducers/alertReducer'\r\nimport { removeFromCart } from '../../reducers/cartReducer'\r\nimport { initializeProducts } from '../../reducers/productsReducer'\r\n\r\nconst Checkout = (props) => {\r\n    //console.log('PROPS', props)\r\n    const [buyer, setBuyer] = useState({})\r\n    const [showPayPal, setShowPayPal] = useState(false)\r\n\r\n    if (props.cart.length === 0) {\r\n        return <Redirect to='/cart' />\r\n    }\r\n\r\n    const checkPayPal = () => {\r\n        return showPayPal\r\n    }\r\n\r\n    const show = { display: showPayPal ? '' : 'none' }\r\n    const totalPrice = props.cart.reduce((a,p) => a + p.price, 0)\r\n    const totalPriceRounded = Math.round((totalPrice + Number.EPSILON) * 100) / 100\r\n\r\n    const handleCustomer = async (event) => {\r\n        event.preventDefault()\r\n        event.persist()\r\n\r\n        const databaseProductsInCart = []\r\n\r\n        try {\r\n            // tarkistaa että tuotteiden availability on true ostovaiheessa\r\n            const allProducts = await productsService.getAllProducts()\r\n            for (let i = 0; i < props.cart.length; i++) {\r\n                for (let j = 0; j < allProducts.length; j++) {\r\n                    if (props.cart[i].id === allProducts[j].id) {\r\n                        databaseProductsInCart.push(allProducts[j])\r\n                    }\r\n                }\r\n            }\r\n            let alreadySold = databaseProductsInCart.filter(p => p.availability === false)\r\n            if (alreadySold.length > 0) {\r\n                window.alert('One or more of the products in your cart are not available, these products are removed from your cart')\r\n                for (let i = 0; i < alreadySold.length; i++) {\r\n                    props.removeFromCart(alreadySold[i].id)\r\n                    props.initializeProducts()\r\n                }\r\n                return\r\n            }\r\n\r\n            const firstName = event.target.buyerFirstName.value\r\n            const lastName = event.target.buyerLastName.value\r\n            const email = event.target.buyerEmail.value\r\n            const address = event.target.buyerAddress.value\r\n            const zip = event.target.buyerPostcode.value\r\n            const phone = event.target.buyerPhone.value\r\n            const city = event.target.buyerCity.value\r\n            const products = props.cart\r\n\r\n            const newBuyer = {\r\n                firstName: firstName,\r\n                lastName: lastName,\r\n                email: email,\r\n                address: address,\r\n                zip: zip,\r\n                phone: phone,\r\n                city: city,\r\n                products\r\n            }\r\n            setBuyer(newBuyer)\r\n            setShowPayPal(true)\r\n\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            props.setAlert('Payment was not successful, please try again', 5)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='container main'>\r\n            <div className='info-message'>\r\n                {props.alert && <Message error header={props.alert} />}\r\n            </div>\r\n            <div className='row'>\r\n                <div className='col-md-8'>\r\n                    <div className='checkout-header'>\r\n                        <h4>Shipping address</h4>\r\n                    </div>\r\n                    <form onSubmit={handleCustomer}>\r\n                        <div className='form-row'>\r\n                            <div className='form-group col-md-6'>\r\n                                <input id='firstName' type='text' name='buyerFirstName' placeholder='Firstname' required className='form-control' />\r\n                            </div>\r\n                            <div className='form-group col-md-6'>\r\n                                <input id='lastName' type='text' name='buyerLastName' placeholder='Lastname' required className='form-control' />\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-row'>\r\n                            <div className='form-group col-md-12'>\r\n                                <input id='email' type='email' name='buyerEmail' placeholder='Email' required className='form-control' />\r\n                            </div>\r\n                            <div className='form-group col-md-12'>\r\n                                <input id='street' type='street' name='buyerAddress' placeholder='Street' required className='form-control' />\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-row'>\r\n                            <div className='form-group col-md-8'>\r\n                                <input id='city' type='city' name='buyerCity' placeholder='City' required className='form-control' />\r\n                            </div>\r\n                            <div className='form-group col-md-4'>\r\n                                <input id='zip' type='zip' name='buyerPostcode' placeholder='Postal code' required className='form-control' />\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-row'>\r\n                            <div className='form-group col-md-12'>\r\n                                <input id='phone' type='text' name='buyerPhone' placeholder='Phone (optional)' className='form-control' />\r\n                            </div>\r\n                        </div>\r\n                        <div className='checkout-apply-button'>\r\n                            <Link to='/cart' className='back-cart-link'>\r\n                                <div className='text' data-testid='back-to-cart'>{`< Back to cart`}</div>\r\n                            </Link>\r\n                            <button\r\n                                className='ui button'\r\n                                id='checkBtn'\r\n                                type='submit'\r\n                                disabled={checkPayPal()}>\r\n                                    Continue to payment\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div className='col-md-4'>\r\n                    <div className='checkout-total'>\r\n                        <p>Total: <b>{totalPriceRounded}</b> €</p>\r\n                    </div>\r\n                    <div style={show}>\r\n                        <PayPalButton buyer={buyer} totalPrice={totalPriceRounded} products={props.cart} />\r\n                    </div>\r\n                    <hr />\r\n                    {props.cart.map(p => \r\n                        <div key={p.id}>\r\n                            <div className='checkout-product-container'>\r\n                                <div className='checkout-img-desc'>\r\n                                    <div className='checkout-img'>\r\n                                        <div className='img-container-checkout'>\r\n                                            <img src={p.img.location} alt='product' />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className='checkout-desc'>\r\n                                        <h6>{p.description}</h6>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='checkout-price'>\r\n                                    <p>{p.price}€</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        cart: state.cart,\r\n        alert: state.alert,\r\n        products: state.products\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setAlert,\r\n    removeFromCart,\r\n    initializeProducts\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Checkout)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { initializeProducts } from '../../reducers/productsReducer'\r\nimport { initializeShops } from '../../reducers/shopsReducer'\r\n\r\nconst PaymentSuccess = (props) => {\r\n    //console.log('SUCCESS PROPS', props)\r\n\r\n    if (props.payment.length === 0) {\r\n        return <Redirect to='/' />\r\n    }\r\n\r\n    props.initializeProducts()\r\n    props.initializeShops()\r\n\r\n    return (\r\n        <div className='container main'>\r\n            <div className='success-header' data-testid='success'>\r\n                <h1>Thank you for your purchace!</h1>\r\n                <p>Order ref-nro: <span><b>{props.payment[0].id}</b></span></p>\r\n                <p>Order's total sum: <span><b>{props.payment.reduce((a, p) => a + p.price, 0)}</b> €</span></p>\r\n                <h5>You bought the following product(s):</h5> <br /> <hr />\r\n            </div>\r\n            <div className='row' data-testid='success-products'>\r\n                {props.payment.map(p => \r\n                    <div key={p.id} className='col-lg-4 col-md-6 col-md-12'>\r\n                        <div className='success-product-container'>\r\n                            <div className='img-container-success'>\r\n                                <img src={p.img.location} alt='product' />\r\n                            </div>\r\n                            <div className='success-product-desc'>\r\n                                <h4>{p.description}</h4>\r\n                                <hr className='divider' />\r\n                                <p>Shop: <b>{p.shop.name}</b></p>\r\n                                <p>Price: <b>{p.price}</b> €</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        payment: state.payment\r\n    }\r\n}\r\n\r\nconst mapDistatchToProps = {\r\n    initializeProducts,\r\n    initializeShops\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDistatchToProps\r\n)(PaymentSuccess)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect, Link } from 'react-router-dom'\r\n\r\nconst PaymentCancel = (props) => {\r\n\r\n    if (props.cart.length === 0) {\r\n        return <Redirect to='/' />\r\n    }\r\n\r\n    return (\r\n        <div className='container main'>\r\n            <div className='cancel-container' data-testid='cancel'>\r\n                <h1>Oops! Something went wrong</h1>\r\n                <h3>Payment was cancelled/interrupted</h3>\r\n                <h3>Please try again</h3>\r\n                <Link to='/cart'>\r\n                    <button className='ui button cancel-button'>Back to cart</button>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        cart: state.cart\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps\r\n)(PaymentCancel)","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport ReactMapGL, { Marker } from 'react-map-gl'\r\nimport { addToCart } from '../reducers/cartReducer'\r\nimport { formatDate } from '../services/shared'\r\n\r\nconst MapBox = (props) => {\r\n    //console.log(props)\r\n    const [sideHeader, setSideHeader] = useState('Discover offers')\r\n    const [showBack, setShowBack] = useState(false)\r\n    const [showShop, setShowShop] = useState(false)\r\n    const [showList, setShowList] = useState(true)\r\n    const [showEmpty, setShowEmpty] = useState(false)\r\n    const [showProducts, setShowProducts] = useState([])\r\n    const [clickedShop, setClickedShop] = useState({\r\n        address: 'none',\r\n        zip: 'none',\r\n        city: 'none',\r\n        phone: 'none',\r\n        website: 'none'\r\n    })\r\n    const [view, setView] = useState({\r\n        latitude: 60.169857,\r\n        longitude: 24.938379,\r\n        width: '100vw',\r\n        height: '100vh',\r\n        zoom: 12\r\n    })\r\n\r\n    useEffect(() => {\r\n        setShowProducts(props.products.filter(p => p.availability === true))\r\n    }, [props.products])\r\n\r\n    const shopsWithProducts = props.shops.filter(s => s.latitude !== null || s.longitude !== null).filter(s => s.products.length > 0)\r\n    const shopsWithoutProducts = props.shops.filter(s => s.latitude !== null || s.longitude !== null).filter(s => s.products.length === 0)\r\n\r\n    const handleShow = () => {\r\n        setSideHeader('Discover offers')\r\n        setShowBack(false)\r\n        setShowShop(false)\r\n        setShowList(true)\r\n        setShowEmpty(false)\r\n        setShowProducts(props.products.filter(p => p.availability === true))\r\n    }\r\n    \r\n    const showShopProducts = (shop) => {\r\n        setShowProducts(props.products.filter(p => p.shop.id === shop.id).filter(p => p.availability === true))\r\n        setSideHeader(shop.name)\r\n        setShowBack(true)\r\n        setShowList(true)\r\n        setShowEmpty(false)\r\n    }\r\n\r\n    const showShopDetails = (shop) => {\r\n        setSideHeader(shop.name)\r\n        setShowShop(true)\r\n        setClickedShop(shop)\r\n        setShowBack(true)\r\n    }\r\n\r\n    const showEmptyList = () => {\r\n        setShowEmpty(true)\r\n        setShowList(false)\r\n    }\r\n\r\n    const handleClick = (product) => {\r\n        showShopProducts(product.shop)\r\n        showShopDetails(product.shop)\r\n        setShowProducts(props.products.filter(p => p.id === product.id))\r\n    }\r\n\r\n    const checkIfInCart = (product) => {\r\n        return props.cart.find(p => p.id === product.id)\r\n    }\r\n\r\n    let backShow = { visibility: showBack ? '' : 'hidden' }\r\n    let shopShow = { display: showShop ? '' : 'none' }\r\n    let listShow = { display: showList ? '' : 'none' }\r\n    let emptyShow = { display: showEmpty ? '' : 'none' }\r\n\r\n    return (\r\n        <div className='main map-container'>\r\n            <div className='map-side-window'>\r\n                <div className='map-side-header'>\r\n                    <div style={backShow} className='map-back-button' onClick={handleShow}>{`< Show all`}</div>\r\n                    <h3>{sideHeader}</h3>\r\n                </div>\r\n                <div style={shopShow} className='map-shop-details'>\r\n                    <div className='map-shop-address'>{clickedShop.address}, {clickedShop.zip} {clickedShop.city}</div>\r\n                    <div className='map-shop-phone'><i className='fas fa-phone' /> {clickedShop.phone}</div>\r\n                    <div className='map-shop-website'>{clickedShop.website !== '' && <span><i className='fas fa-globe' /> {clickedShop.website}</span>}</div>\r\n                </div>\r\n                <div className='map-no-products' style={emptyShow}>\r\n                    <h5>This shop has currently no offers, please check again later</h5>\r\n                </div>\r\n                <div style={listShow}>\r\n                    {showProducts.map(p =>\r\n                        <div key={p.id}>\r\n                            <div className='map-product-container'>\r\n                                <div onClick={() => handleClick(p)} className='map-product-details'>\r\n                                    <div className='map-name-discount'>\r\n                                        <h5><b>{p.description}</b></h5>\r\n                                        <h5 className='map-discount'>-{p.discount}%</h5>\r\n                                    </div>\r\n                                    <p className='map-shop-name'><i className='fas fa-store'/> {p.shop.name}</p>\r\n                                    <h6 className='map-expiration'>Expiration date: <span className='expiration-date'><b>{formatDate(p.date)}</b></span></h6>\r\n                                </div>\r\n                                <div className='map-price-cart-button'>\r\n                                    <div className='map-price-container'>\r\n                                        <div className='map-prices'>\r\n                                            <h5>{p.price} €</h5>\r\n                                            <h6 className='map-original-price'>{p.originalPrice} €</h6>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        className='ui button map-cart-button'\r\n                                        disabled={checkIfInCart(p)}\r\n                                        onClick={() => props.addToCart(p)}>\r\n                                            {checkIfInCart(p) ? <p>In cart</p> : <p>Add to Cart</p>}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <hr className='map-product-divider' />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <ReactMapGL\r\n                className='map'\r\n                {...view}\r\n                mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\r\n                onViewportChange={view => { setView(view) }}\r\n                mapStyle='mapbox://styles/lunkio/ck74chdp3094a1ip59po50vd1'\r\n            >\r\n                {shopsWithProducts.map(shop => \r\n                    <div key={shop.id}>\r\n                        <Marker\r\n                            latitude={shop.latitude}\r\n                            longitude={shop.longitude}\r\n                        >\r\n                            <i \r\n                                className='fas fa-map-marker-alt map-marker-products'\r\n                                onClick={e => {\r\n                                    e.preventDefault()\r\n                                    showShopProducts(shop)\r\n                                    showShopDetails(shop)\r\n                                }}\r\n                            >\r\n                                <div className='marker-product-amount'><p>{props.products.filter(p => p.shop.id === shop.id).filter(p => p.availability === true).length}</p></div>\r\n                            </i>\r\n                        </Marker>\r\n                    </div>\r\n                )}\r\n                {shopsWithoutProducts.map(shop => \r\n                    <Marker \r\n                        key={shop.id}\r\n                        latitude={shop.latitude}\r\n                        longitude={shop.longitude}\r\n                    >\r\n                        <i \r\n                            className='fas fa-map-marker-alt map-marker-noProducts'\r\n                            onClick={e => {\r\n                                e.preventDefault()\r\n                                showShopDetails(shop)\r\n                                showEmptyList()\r\n                            }}\r\n                        />\r\n                    </Marker>\r\n                )}\r\n            </ReactMapGL>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        shops: state.shops,\r\n        products: state.products,\r\n        cart: state.cart\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addToCart\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MapBox)","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Footer from './Footer'\r\nimport info1 from '../images/info1.jpg'\r\nimport revenue from '../images/revenue.svg'\r\nimport happy from '../images/happy.svg'\r\nimport earth from '../images/earth.svg'\r\nimport work1 from '../images/work1.jpg'\r\nimport work2 from '../images/work2.jpg'\r\nimport work3 from '../images/work3.jpg'\r\n\r\nconst PartnerInfo = () => {\r\n    return (\r\n        <div className='container main'>\r\n            <div className='info-first-section sections'>\r\n                <div className='info-intro'>\r\n                    <div className='info-first-section-header'>\r\n                        <h1><b>Increase your revenue and reduce waste.</b></h1>\r\n                    </div>\r\n                    <p>\r\n                        Throwing away products is bad business. Running out of\r\n                        products and having empty shelves is also bad business. \r\n                        Let us help you sell your surplus products and turn it \r\n                        into good business.\r\n                    </p>\r\n                    <div className='info-signup-btn'>\r\n                        <Link to='/register'>\r\n                            <button className='ui button'>Sign up</button>\r\n                        </Link>\r\n                    </div>\r\n                    <div className='info-already-account'>\r\n                        <h6><b>Already have an account? <Link className='info-login-link' to='/login'>Login in</Link></b></h6>\r\n                    </div>\r\n                </div>\r\n                <div className='info-intro-img'>\r\n                    <div className='info-img-container'>\r\n                        <img className='info-img' src={info1} alt='shop'/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className='info-second-section sections'>\r\n                <div className='info-second-section-header'>\r\n                    <h2><b>Benefits of joining Shelp</b></h2>\r\n                </div>\r\n                <div className='info-benefits'>\r\n                    <div className='first-benefit benefits'>\r\n                        <div className='benefit-image-container'>\r\n                            <img src={revenue} alt='revenue' />\r\n                        </div>\r\n                        <h4 className='benefit-header'>Increased revenue</h4>\r\n                        <p>\r\n                            Shelp turns the lost revenue from your unsold products\r\n                            into an extra revenue stream by bringing in \r\n                            customers who pay real money for your surplus products. \r\n                            One sold product brings on average 4 euros to your \r\n                            bank account – you'll do the math on what it means \r\n                            for your bottom line!\r\n                        </p>\r\n                    </div>\r\n                    <div className='second-benefit benefits'>\r\n                        <div className='benefit-image-container'>\r\n                            <img src={happy} alt='happy' />\r\n                        </div>\r\n                        <h4 className='benefit-header'>New customers</h4>\r\n                        <p>\r\n                            70% of our users have found new products and offers\r\n                            while using Shelp. Selling surplus products with us \r\n                            doesn't cannibalize your regular sales, as buying \r\n                            Shelp products brings awareness and new\r\n                            buying habits.\r\n                        </p>\r\n                    </div>\r\n                    <div className='third-benefit benefits'>\r\n                        <div className='benefit-image-container'>\r\n                            <img src={earth} alt='earth' />\r\n                        </div>\r\n                        <h4 className='benefit-header'>Reduction of waste</h4>\r\n                        <p>\r\n                            Following our best practices, you are likely to \r\n                            sell more than half of your surplus products \r\n                            with Shelp. Every product sold and not thrown \r\n                            away reduces unnecessary emissions caused by \r\n                            food production and shows you care about \r\n                            the environment.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className='info-third-section sections'>\r\n                <div className='info-third-section-header'>\r\n                    <h2><b>Shelp fits right into your current workflow</b></h2>\r\n                </div>\r\n                <div className='info-workflow'>\r\n                    <div className='info-workflow-img'>\r\n                        <img src={work1} alt='workflow1'/>\r\n                    </div>\r\n                    <div className='info-workflow-header-text'>\r\n                        <div className='info-workflow-header'>\r\n                            <div className='info-workflow-nr'>1</div>\r\n                            <h4><b>Announce your surplus products</b></h4>\r\n                        </div>\r\n                        <div className='info-workflow-text'>\r\n                            <p>\r\n                                When you look through the products and check\r\n                                the expiration dates, you can also\r\n                                publish those products with closing expiration\r\n                                dates on our platform using our intuitive \r\n                                web-based Partner pages.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div> <hr/>\r\n                <div className='info-workflow'>\r\n                    <div className='info-workflow-img'>\r\n                        <img src={work2} alt='workflow2'/>\r\n                    </div>\r\n                    <div className='info-workflow-header-text'>\r\n                        <div className='info-workflow-header'>\r\n                            <div className='info-workflow-nr'>2</div>\r\n                            <h4><b>Consumers buy your products with the Shelp web application</b></h4>\r\n                        </div>\r\n                        <div className='info-workflow-text'>\r\n                            <p>\r\n                                Once you have published your offers, \r\n                                customers can find them by using our web\r\n                                application. Every purchase is made in our \r\n                                application, so there is no extra work or\r\n                                hardware requirements for you. \r\n                                Whenever a purchase is made, your orders \r\n                                list is updated in your Shelp Partner -pages.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div> <hr />\r\n                <div className='info-workflow'>\r\n                    <div className='info-workflow-img'>\r\n                        <img src={work3} alt='workflow3'/>\r\n                    </div>\r\n                    <div className='info-workflow-header-text'>\r\n                        <div className='info-workflow-header'>\r\n                            <div className='info-workflow-nr'>3</div>\r\n                            <h4><b>Hand out ordered products</b></h4>\r\n                        </div>\r\n                        <div className='info-workflow-text'>\r\n                            <p>\r\n                                Customers can come in and pick up their orders\r\n                                within the pickup time window you have defined.\r\n                                Al you need to do is check the order receipt,\r\n                                hand out the order to the customer and mark\r\n                                the order as picked up.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className='info-third-section sections'>\r\n                <div className='info-sign-up'>\r\n                    <h2><b>Start earning more and wasting less</b></h2>\r\n                    <p>\r\n                        Setting up your account takes no more than a few minutes, \r\n                        after which you can immediately start selling your \r\n                        surplus products with Shelp. We will pay you for your \r\n                        Shelp sales once a month and provide you all the \r\n                        necessary receipts for your bookkeeping.\r\n                    </p>\r\n                    <div className='info-signup-btn'>\r\n                        <Link to='/register'>\r\n                            <button className='ui button'>Sign up</button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PartnerInfo","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Footer from './Footer'\r\nimport info2 from '../images/info2.jpg'\r\nimport work1 from '../images/work1.jpg'\r\nimport work2 from '../images/work2.jpg'\r\nimport work3 from '../images/work3.jpg'\r\n\r\nconst CustomerInfo = () => {\r\n    return (\r\n        <div className='container main'>\r\n            <div className='info-first-section sections'>\r\n                <div className='info-intro'>\r\n                    <div className='info-first-section-header'>\r\n                        <h1><b>The more you order, the more you save.</b></h1>\r\n                    </div>\r\n                    <p>\r\n                        Our generous discounts on regular prices saves you \r\n                        money and not needing to visit many shops for offers\r\n                        saves you time. And yeah, the fact that you also \r\n                        save products from ending up in the trash saves the world.\r\n                    </p>\r\n                    <div className='info-signup-btn'>\r\n                        <Link to='/products'>\r\n                            <button className='ui button'>Discover</button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n                <div className='info-intro-img'>\r\n                    <div className='info-img-container'>\r\n                        <img className='info-img' src={info2} alt='customer'/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className='info-second-section sections'>\r\n                <div className='info-second-section-header'>\r\n                    <h2><b>You are two minutes away from saving money and environment</b></h2>\r\n                </div>\r\n                <div className='info-workflow'>\r\n                    <div className='info-workflow-img'>\r\n                        <img src={work1} alt='workflow1'/>\r\n                    </div>\r\n                    <div className='info-workflow-header-text'>\r\n                        <div className='info-workflow-header'>\r\n                            <div className='info-workflow-nr'>1</div>\r\n                            <h4><b>Find cheaper products near you</b></h4>\r\n                        </div>\r\n                        <div className='info-workflow-text'>\r\n                            <p>\r\n                                Whenever you visit Shelp website, \r\n                                you will see affordable quality products \r\n                                easily on a map and on a list. \r\n                                The offering consists of products with \r\n                                their expiration date closing in that usually \r\n                                have a 50% discount on regular prices. \r\n                                Just browse around and pick the most suitable \r\n                                offer for you.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div> <hr/>\r\n                <div className='info-workflow'>\r\n                    <div className='info-workflow-img'>\r\n                        <img src={work2} alt='workflow2'/>\r\n                    </div>\r\n                    <div className='info-workflow-header-text'>\r\n                        <div className='info-workflow-header'>\r\n                            <div className='info-workflow-nr'>2</div>\r\n                            <h4><b>Buy directly within the website</b></h4>\r\n                        </div>\r\n                        <div className='info-workflow-text'>\r\n                            <p>\r\n                                Purchase your desired product easily with \r\n                                your payment card or PayPal. \r\n                                You can also add multiple offers to your \r\n                                order if there's more than one mouth to feed.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div> <hr />\r\n                <div className='info-workflow'>\r\n                    <div className='info-workflow-img'>\r\n                        <img src={work3} alt='workflow3'/>\r\n                    </div>\r\n                    <div className='info-workflow-header-text'>\r\n                        <div className='info-workflow-header'>\r\n                            <div className='info-workflow-nr'>3</div>\r\n                            <h4><b>Pick it up before the closing time</b></h4>\r\n                        </div>\r\n                        <div className='info-workflow-text'>\r\n                            <p>\r\n                                Unlike food delivery apps, there's no \r\n                                waiting involved – Shelp orders are ready \r\n                                for pickup immediately after your order. \r\n                                You can choose to grab your products to go \r\n                                as you are passing by the grocery store.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CustomerInfo","import React, { useEffect } from 'react'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport { connect } from 'react-redux'\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\r\nimport Navbar from './components/Navbar'\r\nimport Home from './components/Home'\r\nimport Products from './components/Products'\r\nimport ShopLogin from './components/shop/ShopLogin'\r\nimport ShopRegister from './components/shop/ShopRegister'\r\nimport Cart from './components/cart/Cart'\r\nimport Checkout from './components/cart/Checkout'\r\nimport PaymentSuccess from './components/cart/PaymentSuccess'\r\nimport PaymentCancel from './components/cart/PaymentCancel'\r\nimport MapBox from './components/MapBox'\r\nimport PartnerInfo from './components/PartnerInfo'\r\nimport CustomerInfo from './components/CustomerInfo'\r\nimport productsService from './services/productsService'\r\nimport { initializeProducts } from './reducers/productsReducer'\r\nimport { initializeShops } from './reducers/shopsReducer'\r\nimport { initializeShop } from './reducers/shopLoginReducer'\r\n\r\nconst App = (props) => {\r\n\r\n    useEffect(() => {\r\n        props.initializeProducts()\r\n        props.initializeShops()\r\n        props.initializeShop()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    // poistaa tuotteet, joiden expiration date on vanhempi kuin nykyinen pvm\r\n    useEffect(() => {\r\n        async function checkExpirationDates() {\r\n            const allProducts = await productsService.getAllProducts()\r\n            let availableProducts = allProducts.filter(p => p.availability === true)\r\n            const currentTime = new Date() //hae nykyhetki\r\n            // aseta tuotteiden pvm samaan muotoon kuin nykyhetki\r\n            let dates = availableProducts\r\n                .map(p => { return { date: p.date, id: p.id } })\r\n                .map(p => { return { date: new Date(p.date), id: p.id } })\r\n            for (let i = 0; i < dates.length; i++) {\r\n                dates[i].date.setHours(23)\r\n                dates[i].date.setMinutes(59)\r\n                dates[i].date.setSeconds(59)\r\n            }\r\n            // etsi tuotteet joiden viim. käyttöpäivä mennyt ja aseta expired: true\r\n            for (let i = 0; i < dates.length; i++) {\r\n                if (currentTime >= dates[i].date) {\r\n                    await productsService.productExpired(dates[i].id)\r\n                }\r\n            }\r\n            props.initializeProducts()\r\n        }\r\n        checkExpirationDates()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <Router>\r\n                <Navbar />\r\n                <Route exact path='/' render={() => <Home />} />\r\n                <Route path='/products' render={() => <Products />} />\r\n                <Route path='/partnerinfo' render={() => <PartnerInfo />} />\r\n                <Route path='/customerinfo' render={() => <CustomerInfo />} />\r\n                <Route path='/login' render={() => <ShopLogin />} />\r\n                <Route path='/register' render={() => <ShopRegister />} />\r\n                <Route path='/cart' render={() => <Cart />} />\r\n                <Route path='/checkout' render={() => <Checkout />} />\r\n                <Route path='/map' render={() => <MapBox />} />\r\n                <Route path='/success' render={() => <PaymentSuccess />} />\r\n                <Route path='/cancel' render={() => <PaymentCancel />} />\r\n            </Router>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(null, { initializeProducts, initializeShops, initializeShop })(App)","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport productsReducer from './reducers/productsReducer'\r\nimport shopsReducer from './reducers/shopsReducer'\r\nimport cartReducer from './reducers/cartReducer'\r\nimport alertReducer from './reducers/alertReducer'\r\nimport confirmReducer from './reducers/confirmReducer'\r\nimport shopLoginReducer from './reducers/shopLoginReducer'\r\nimport paymentReducer from './reducers/paymentReducer'\r\n\r\nconst reducers = combineReducers({\r\n    products: productsReducer,\r\n    shops: shopsReducer,\r\n    cart: cartReducer,\r\n    alert: alertReducer,\r\n    confirm: confirmReducer,\r\n    shopLogin: shopLoginReducer,\r\n    payment: paymentReducer\r\n})\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunk))\r\n\r\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport store from './store'\nimport { Provider } from 'react-redux'\nimport './index.css'\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>, \n    document.getElementById('root')\n)","module.exports = __webpack_public_path__ + \"static/media/work1.569356b6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/work2.e92cf56c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/work3.89965bd6.jpg\";"],"sourceRoot":""}